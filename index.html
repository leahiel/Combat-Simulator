<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>Combat Simulator</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,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') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<!-- UUID://8A91596D-1642-4080-BDFE-707526D32D3E// --><tw-storydata name="Combat Simulator" startnode="32" creator="Tweego" creator-version="2.1.1" ifid="8A91596D-1642-4080-BDFE-707526D32D3E" zoom="1" format="SugarCube" format-version="2.36.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">/* twine-user-stylesheet #1: "_combat.min.css" */
.initBar{margin:auto}#MainCombatGrid{display:grid;grid-template-columns:31fr 50fr;grid-template-rows:1fr 2fr 3fr;height:92vh}#MainCombatGrid #enemyZone{grid-column-start:1;grid-column-end:4;grid-row:1;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr;grid-template-rows:1fr 1fr;row-gap:1em;column-gap:2em;padding:4px 12px 8px;border:1px solid hsl(312deg 74% 16% / 0%);border-radius:8px;background-color:var(--backgroundTransparent);justify-items:center;grid-auto-flow:dense}#MainCombatGrid #playerZone{grid-column:3;grid-row:2;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;row-gap:1rem;column-gap:1rem;margin-top:1rem;padding:4px 12px 8px;border:1px solid hsl(312deg 74% 16% / 0%);border-radius:8px;background-color:var(--backgroundTransparent);justify-items:center;grid-auto-flow:dense}#MainCombatGrid #combatNotifications{grid-column:1;grid-row-start:2;grid-row-end:4;width:21vw;border-radius:1rem;padding:1em;background-color:var(--backgroundTransparent)}#combatNotifications #AttackInformationPlate,#combatNotifications #CombatantInformationPlate,#combatNotifications #battleLog{height:100%;overflow-y:scroll;margin:auto;border-radius:0;border-color:var(--backgroundplus2);font-size:.9rem}#combatNotifications #battleLog{display:block;padding:.9rem;line-height:1.5;border:1px solid hsl(312deg 74% 16% / 0%);box-shadow:var(--boxShadow);border-radius:20px;background-color:#0c0c0c}#MainCombatGrid #combatButtons{display:flex;grid-column:2;grid-row-start:2;grid-row-end:4;width:7.5vw;align-items:end}#MainCombatGrid #combatButtons span{display:flex;height:7.5vw;border:1px solid var(--backgroundplus2);border-radius:8px;box-shadow:var(--boxShadow);background-color:#0c0c0c;text-align:center;align-items:center}#notifArea.playerTurn{background-color:#072b0a}#notifArea.enemyTurn{background-color:#2b0707}#MainCombatGrid #targetsZone{grid-column:3;grid-row:3;height:100%;grid-template-columns:1fr;grid-template-rows:18% 70%;display:grid;padding:4px 12px 8px;border:1px solid var(--backgroundplus2);border-radius:8px;box-shadow:var(--boxShadow);background-color:#0c0c0c;justify-items:center}#targetsZone #playerAttacks{display:grid;width:100%;margin:1rem;grid-gap:1px;justify-items:center;align-items:center;justify-content:space-evenly}#targetsZone #playerAttacks.target-attacks{grid-template-columns:24% 24% 24% 24%;grid-template-rows:1fr 1fr 1fr 1fr}#targetsZone #playerAttacks.target-all,#targetsZone #playerAttacks.target-self{grid-template-columns:1fr;grid-template-rows:1fr;font-size:2rem}#targetsZone #playerAttacks.target-side{grid-template-columns:1fr;grid-template-rows:1fr 1fr;row-gap:1rem;font-size:1.5rem}#targetsZone #playerAttacks.target-row{grid-template-columns:1fr;grid-template-rows:1fr 1fr 1fr 1fr;row-gap:.5rem;font-size:1.25rem}#targetsZone #playerAttacks.target-single{grid-template-columns:16% 16% 16% 16% 16% 16%;grid-template-rows:1fr 1fr .2fr 1fr 1fr}#targetsZone #playerAttacks.target-single .enemyD{grid-column-start:2;grid-column-end:4;grid-row:1}#targetsZone #playerAttacks.target-single .enemyE{grid-column-start:4;grid-column-end:6;grid-row:1}#targetsZone #playerAttacks.target-single .enemyA,#targetsZone #playerAttacks.target-single .enemyB,#targetsZone #playerAttacks.target-single .enemyC{grid-column:span 2;grid-row:2}#targetsZone #playerAttacks.target-single .playerA,#targetsZone #playerAttacks.target-single .playerB{grid-column:span 3;grid-row:4}#targetsZone #playerAttacks.target-single .playerC,#targetsZone #playerAttacks.target-single .playerD{grid-column:span 3;grid-row:5}#playerAttacks .playerAttack{border:none;background-color:var(--background);box-shadow:none;border-radius:0;font-size:1.05rem;padding:.2em;width:100%;height:95%}#playerAttacks .playerAttack:hover{border:none;background-color:var(--backgroundplus1)}#playerAttacks .playerAttack.disabled{background-color:var(--backgroundminus1);color:grey}#playerAttacks .playerAttack.disabled:hover{background-color:var(--backgroundminus1)}#backForward #back{border:none;background-color:var(--background);box-shadow:none;border-radius:0;width:85%;margin-left:auto;margin-right:auto}#backForward #back #BackAttack{border:none;box-shadow:none;border-radius:0;width:100%;background:0 0;font-size:1.2rem;padding:.2em}.disabled,.playerAttack.disabled{cursor:not-allowed!important;background-color:#444;border:1px solid #666}.disabled:hover,.playerAttack.disabled:hover{cursor:not-allowed!important;background-color:#444;border:1px solid #666}#MainCombatGrid #targetsZone #backForward{grid-column-start:1;grid-column-end:4;grid-row:-1;display:flex;align-content:center;justify-content:space-evenly;flex-direction:row;align-items:center;width:100%;height:100%}.modSlotTitle{text-align:center}#enemyZone [data-name="/if"]{display:none}#notifArea{grid-column:1/span 3;text-align:center;width:100%;border:1px solid hsl(312deg 74% 16% / 0%);border-radius:8px;box-shadow:var(--boxShadow);background-color:var(--backgroundplus1)}#enemyZone griditem#gitemA,#enemyZone span[title="<<if _ep[0]>>"]{grid-row:2;grid-column:1/span 2}#enemyZone griditem#gitemB,#enemyZone span[title="<<if _ep[1]>>"]{grid-row:2;grid-column:3/span 2}#enemyZone griditem#gitemC,#enemyZone span[title="<<if _ep[2]>>"]{grid-row:2;grid-column:5/span 2}#enemyZone griditem#gitemD,#enemyZone span[title="<<if _ep[3]>>"]{grid-row:1;grid-column:2/span 2}#enemyZone griditem#gitemE,#enemyZone span[title="<<if _ep[4]>>"]{grid-row:1;grid-column:4/span 2}#flash-notifs-here{position:absolute;top:0;left:0}.flash-container{position:absolute}.flash-container .flash-message{position:absolute;font-size:1.2em;background-color:transparent;text-shadow:1px 1px 3px #000;line-height:0}.flash-container .flash-message.block-theme{color:#00f}.flash-container .flash-message.deflect-theme{color:grey}.flash-container .flash-message.damage-theme{color:red}.flash-container .flash-message.critical-theme{color:#ff0}.flash-container .flash-message.direct-theme{color:#40e0d0}.flash-container .flash-message.critical-theme,.flash-container .flash-message.damage-theme,.flash-container .flash-message.direct-theme{transition:opacity .5s}
/* twine-user-stylesheet #2: "_introcutscene.min.css" */
body[data-tags~=".introduction"]{margin:initial;width:100vw}body[data-tags~=".introduction"] #passages{position:absolute;top:0;left:0;bottom:0;right:0;height:100%;width:100%;padding:0;background-color:#000}body[data-tags~=".introduction"] #chapterheader,body[data-tags~=".introduction"] #storyTabs,body[data-tags~=".introduction"] #wrapperBottomText{display:none}
/* twine-user-stylesheet #3: "_mainmenu.min.css" */
body[data-tags~="#mainmenu"]{margin:initial;width:100vw}body[data-tags~="#mainmenu"] #passages{position:absolute;top:0;left:0;bottom:0;right:0;height:100%;width:100%;padding:0;background-color:#000}body[data-tags~="#mainmenu"] #chapterheader,body[data-tags~="#mainmenu"] #databaseInfoTab,body[data-tags~="#mainmenu"] #main-menu-menu.hidden,body[data-tags~="#mainmenu"] #main-menu-start.hidden,body[data-tags~="#mainmenu"] #storyTabs,body[data-tags~="#mainmenu"] #wrapperBottomText{display:none}body[data-tags~="#mainmenu"] #main-menu-menu,body[data-tags~="#mainmenu"] #main-menu-start{display:block;margin-top:56vh;color:#737373;font-size:1.75rem;line-height:1.75em;font-family:backslash;text-align:center;user-select:none}body[data-tags~="#mainmenu"] #main-menu-start{margin-top:72vh}body[data-tags~="#mainmenu"] a{color:#787878}body[data-tags~="#mainmenu"] a:hover{color:#b9b9b9}
/* twine-user-stylesheet #4: "flash.min.css" */
.flash-container{z-index:1000;max-width:25%;position:fixed}.top-left-flash-layout{top:75px;left:15px}.top-right-flash-layout{top:75px;right:15px}.middle-right-flash-layout{top:50%;right:15px;-ms-transform:translateY(-50%);transform:translateY(-50%)}.bottom-right-flash-layout{bottom:75px;right:15px}.middle-bottom-flash-layout{bottom:75px;left:50%;-o-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.bottom-left-flash-layout{bottom:75px;left:15px}.middle-left-flash-layout{top:50%;left:15px;-ms-transform:translateY(-50%);transform:translateY(-50%)}.middle-top-flash-layout{top:75px;left:50%;-o-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.flash-container .flash-message{position:relative;opacity:0;-webkit-transform:translateX(-20px);-ms-transform:translateX(-20px);transform:translateX(-20px);-webkit-transition:all .5s;-o-transition:all .5s;transition:all .5s;background-color:#fff;color:#2c3433;-webkit-border-radius:0;border-radius:0;-webkit-border-top-right-radius:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;border-bottom-right-radius:4px;margin-bottom:10px;padding:5px 35px 5px 20px;-webkit-box-shadow:2px 2px 33px 8px rgba(0,0,0,.1);box-shadow:2px 2px 33px 8px rgba(0,0,0,.1);line-height:1.4;cursor:pointer}.flash-container .flash-not-interactive{cursor:default}.flash-container .flash-message .flash-progress{position:absolute;right:0;top:auto;bottom:0;left:0;width:0;height:3px;opacity:1;background-color:rgba(0,0,0,.15);-webkit-transition:opacity .1s;-o-transition:opacity .1s;transition:opacity .1s}.flash-container .flash-message .flash-progress.flash-is-hidden{opacity:0}.flash-container .flash-message .flash-progress.flash-progress-top{top:0;bottom:auto}.flash-container .flash-message:before{position:absolute;content:"";width:7px;height:100%;top:0;bottom:0;left:-7px;background-color:transparent;-webkit-border-top-left-radius:4px;border-top-left-radius:4px;-webkit-border-bottom-left-radius:4px;border-bottom-left-radius:4px}.flash-container .flash-message:after{position:absolute;content:"";font-family:fontAwesome;top:5px;right:8px;text-align:center;vertical-align:middle;color:#9e9e9e}.flash-container .flash-message.flash-is-visible{opacity:1;-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.flash-container .flash-message.flash-success .flash-progress{background-color:rgba(76,175,80,.15)}.flash-container .flash-message.flash-success:before{background-color:#4caf50}.flash-container .flash-message.flash-success:after{color:rgba(76,175,80,.5);content:"\e803";font-family:tme-fa-icons}.flash-container .flash-message.flash-warning .flash-progress{background-color:rgba(255,133,27,.15)}.flash-container .flash-message.flash-warning:before{background-color:#ff851b}.flash-container .flash-message.flash-warning:after{color:rgba(255,133,27,.5);content:"\e80d";font-family:tme-fa-icons}.flash-container .flash-message.flash-danger .flash-progress,.flash-container .flash-message.flash-error .flash-progress{background-color:rgba(255,65,54,.15)}.flash-container .flash-message.flash-danger:before,.flash-container .flash-message.flash-error:before{background-color:#ff4136}.flash-container .flash-message.flash-danger:after,.flash-container .flash-message.flash-error:after{color:rgba(255,65,54,.5);content:"\e80c";font-family:tme-fa-icons}.flash-container .flash-message.flash-info .flash-progress{background-color:rgba(0,116,217,.15)}.flash-container .flash-message.flash-info:before{background-color:#0074d9}.flash-container .flash-message.flash-info:after{color:rgba(0,116,217,.5);content:"\e80a";font-family:tme-fa-icons}.flash-container .flash-message.flash-bug .flash-progress{background-color:rgba(138,43,226,.15)}.flash-container .flash-message.flash-bug:before{background-color:#8a2be2}.flash-container .flash-message.flash-bug:after{color:rgba(138,43,226,.5);content:"\e838";font-family:tme-fa-icons}.flash-container .flash-message.flash-disabled .flash-progress{background-color:rgba(170,170,170,.15)}.flash-container .flash-message.flash-disabled:before{background-color:#aaa}.flash-container .flash-message.flash-disabled:after{color:rgba(170,170,170,.5);content:"\e80f";font-family:tme-fa-icons}.flash-container .flash-message.flash-default{padding-right:20px}@media all and (max-width:1280px){.flash-container{max-width:33.334%}}@media all and (max-width:768px){.flash-container{max-width:50%}}@media all and (max-width:480px){.flash-container{right:10px;left:10px;max-width:100%}}.flash-container .flash-message.dark-theme{background-color:#2c3433;color:#fff}.flash-container .flash-message.dark-theme .flash-progress{background-color:rgba(255,255,255,.5)}
/* twine-user-stylesheet #5: "game.min.css" */
@font-face{font-family:Blackslash;src:url(../fonts/Backslash-RpJol.otf) format("otf");font-family:LeahFantasyFont;src:url(../fonts/LeahFantasyFont.ttf) format("ttf");font-family:Seaweed;src:url(../fonts/Seaweed.ttf) format("ttf")}:root{--body-text:hsl(0, 0%, 93%);--chapter-text-transition:opacity 0.35s;--link-text:hsl(223, 64%, 63%);--warning-color:hsl(0, 39%, 51%);--tabTransition:font-size 0.35s,opacity 0.35s,visibility 0.35s;--boxShadow:0 2px 8px rgb(0 0 0 / 50%);--backgroundminus1:hsl(0, 0%, 8%);--background:hsl(0, 0%, 10%);--backgroundTransparent:hsla(0, 0%, 10%, 0.8);--backgroundplus1:hsl(0, 0%, 15%);--backgroundplus2:hsl(0, 0%, 20%);--tooltip-background-color:hsla(0, 0%, 13%, 0.95)}*{scrollbar-width:thin}::-webkit-scrollbar{width:14px}::-webkit-scrollbar-track{background:0 0;transition:background .1s ease}::-webkit-scrollbar-thumb{border:5px solid transparent;background-clip:padding-box;border-radius:12px;box-shadow:inset 0 0 0 10px hsla(0,0%,35%,.6)}::-webkit-scrollbar-button{display:none;width:0;height:0}::-webkit-scrollbar-corner{background-color:transparent}html{background-color:#323232}body{color:#fff;width:80vw;margin-left:auto;margin-right:auto;box-shadow:var(--boxShadow);border-radius:20px;font-size:20px;text-shadow:1px 1px 3px #000}h3{display:inline;margin-top:0;margin-bottom:0}h4{display:inline;margin-bottom:.5rem}h5{display:inline;text-indent:1rem;margin-top:.25rem;margin-bottom:.5rem}ul{margin-block-start:.45rem;margin-block-end:.45rem}input[type=text]{min-width:min(14em,20vw);max-width:100%}button{box-shadow:var(--boxShadow);border-radius:8px}select{box-shadow:var(--boxShadow);border-radius:2px}tuttext{color:#add8e6;font-style:italic}resource{padding:.2rem .7rem;border-radius:8px;box-shadow:2px 2px 8px 0 hsla(0,0%,0%,.3);margin-left:1rem;text-align:right;font-size:1.2rem;color:#add8e6;background-color:var(--middle)}self{font-style:italic;color:#bfbfbf}tp{color:hsla(200,100%,75%,.85)}tpi{font-style:italic;color:hsla(200,100%,75%,.85)}.redbutton{background-color:#8b0000;border-color:#8b0000}.redbutton:hover{background-color:red;border-color:red}.hidden{display:none}.buttonlistofgirls{background:brown}.row{display:flex}.column{flex:50%;padding:12px}.display-none{display:none}.shade-text-to-link{background-image:linear-gradient(120deg,var(--body-text),var(--link-text));background-size:100%;background-clip:text;-webkit-background-clip:text;-moz-background-clip:text;-webkit-text-fill-color:transparent;-moz-text-fill-color:transparent}.shade-text-to-link:hover{text-decoration:underline}#infoScreenAttacks{display:grid;grid-template-columns:1fr 1fr 1fr;grid-auto-rows:1fr;grid-gap:1rem;padding-top:1rem;padding-bottom:1rem}#AttackInformationPlate,#CombatantInformationPlate,#EquippableInformationPlate{display:block;padding:1rem;width:21vw;line-height:1.5;border:1px solid hsl(312deg 74% 16% / 0%);box-shadow:var(--boxShadow);border-radius:20px;background-color:#0c0c0c}#ui-dialog-body.dialogEquipmentMod #CombatantInformationPlate{grid-column:span all}#infoName{display:inline;font-weight:700;overflow:auto;word-break:break-all;text-overflow:unset;white-space:normal;vertical-align:top}#infoVariant{display:block;font-size:.6em;font-weight:700;color:grey;padding-top:2px;outline:0;text-align:right;margin-top:-1.4rem}#infoDamage,#infoMetrics,#infoResistances,#infoTargeting{padding-top:8px}#infoScreenDescription grid{display:grid;margin-left:-8px;column-gap:.5rem;row-gap:.05rem;font-size:.95rem;padding-bottom:8px}#infoMetricsGrid{display:grid;grid-auto-flow:column;justify-items:center;align-items:center;padding-bottom:.5em;grid-template-rows:1fr 1fr;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:.5em;font-size:.9em;line-height:1.25}#infoMetricsGrid #infoHealth{grid-row:1;grid-column-start:1;grid-column-end:3}.infoMax{font-size:.7em;color:#999}.infoDarkGrey .infoMax{color:inherit}.infoNYI{font-size:.8em;font-style:italic;color:orange}#infoDamageTotal{grid-column-start:1;grid-column-end:3}#infoDamageHitNumber{grid-column-start:3;grid-column-end:4}#infoMetricsGrid #infoInit{grid-row:1;grid-column-start:3;grid-column-end:5}#infoInitVariance{font-size:.8em;color:#666}#infoAttackDescription{display:block;font-size:.9em;color:#999}#infoDeflect{grid-row:2;grid-column:1}#infoBlock{grid-row:2;grid-column:2}#infoCrit{grid-row:2;grid-column:3}#infoDirect{grid-row:2;grid-column:4}#infoBlock,#infoCrit,#infoDeflect,#infoDirect,#infoInit{text-align:center}#infoAbsorbtionGrid,#infoDamageGrid,#infoResistanceGrid{display:grid;justify-items:center;text-align:center;align-items:center;font-size:.7em;grid-auto-flow:row;grid-gap:.5em;padding-bottom:1em;grid-template-rows:auto auto auto auto auto auto auto auto;grid-template-columns:1fr 1fr 1fr}.infoUpper{display:block;font-size:12px;line-height:16px;text-transform:uppercase}.infoDarkGrey{color:#595959}.infoGold{color:#daa520}.plateInformationGridsSpan3Rows{grid-row:span 3}.infoElemental,.infoMaterial,.infoOccult{grid-column:span 3}.infoHidden{visibility:hidden;display:none}#infoDamageGrid{line-height:1.1em;grid-template-rows:auto auto auto auto auto}#infoMetricsAttacksGrid{display:grid;grid-auto-flow:column;justify-items:center;align-items:center;padding-bottom:.5em;grid-template-rows:1fr 1fr;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:.5em;font-size:.9em;line-height:1.25;text-align:center}#infoBuffs{font-size:.7em;text-align:center;display:block}#infoMetricsAttacksGrid #infoWDM{grid-row:1;grid-column-start:1;grid-column-end:3}#infoMetricsAttacksGrid #init{grid-row:1;grid-column-start:3;grid-column-end:5}#infoMetricsAttacksGrid #infoDirect{grid-column:1}#infoMetricsAttacksGrid #infoCrit{grid-column:2}#infoMetricsAttacksGrid #infoTargets{font-size:.9em;grid-row:2;grid-column-start:3;grid-column-end:5}.divider{display:block;height:1px;margin-top:6px;margin-bottom:2px;background-color:hsla(0,0%,75%,.5)}.infoSectionHeader{display:block;font-weight:700;margin-bottom:6px;font-size:12px;line-height:16px;text-transform:uppercase}#accessoryInfoScreenButtons,#armorInfoScreenButtons,#weaponInfoScreenButtons{display:block;margin-top:.5rem}#ui-dialog-body.dialogEquipmentMod,#ui-dialog-body.dialogEquipmentSwap{display:grid;grid-template-rows:auto auto 5fr;grid-template-columns:23vw 23vw;grid-gap:1rem;height:80vh;justify-content:space-between;align-items:start;justify-items:center;overflow-x:hidden}#ui-dialog-body.dialogEquipmentSwap select{width:100%}.dialogEquipmentMod .macro-listbox,.dialogEquipmentSwap .macro-listbox{grid-row:1;height:20vh;cursor:default}#modSelectionGrid select{height:12vh;width:100%}.dialogEquipmentSwap .macro-listbox option:hover{background-color:#666;cursor:pointer}.dialogEquipmentSwap #attackButtons{grid-row:2}.dialogEquipmentSwap #attackInfoDescription{grid-row:3}.dialogEquipmentSwap #equipmentCharacterStats{grid-column:2;grid-row-start:1;grid-row-end:4}#ui-dialog button{transition-duration:initial;-o-transition-duration:initial;-webkit-transition-duration:initial}accordionSection{margin-bottom:3rem}.accordionLabel{font-size:1.5rem;display:flex;align-items:center;justify-content:space-between;padding:0 1rem;margin-bottom:.5rem;background:#b61818;font-weight:700;cursor:pointer;user-select:none;box-shadow:var(--boxShadow);border-radius:20px;font-size:20px;text-shadow:1px 1px 3px #000}.accordionLabel::after{content:"\002B";padding:.5rem;transform:scale(1.8);text-align:center;transition:all .35s}accordionContent{max-height:0;padding:0 .5rem .5rem;transition:all .35s;display:none}accordionSection input[type=checkbox]{position:absolute;opacity:0;z-index:-1}input:checked+.accordionLabel{background:#8f1414}input:checked+.accordionLabel::after{content:"\2013";transform:scale(1.5)}input:checked~accordionContent{max-height:100vh;padding:.5rem .75rem;display:block;transition:all .35s}.knowledge{display:block;margin-top:1.5rem;margin-left:1rem;margin-bottom:-1.25rem;line-height:1.5rem;font-weight:700;text-decoration:#fff underline}.subknowledge{display:block;margin-left:2rem;margin-bottom:-1.25rem;text-decoration:underline}#debug-bar-toggle:before,#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-weight:400}.dialog-header{display:block;margin-top:.67rem;margin-bottom:.67rem;margin-left:0;margin-right:0;font-size:2rem;font-weight:700;text-align:center;text-decoration:underline 2px}#ui-dialog{max-width:68vw}#mainwrapper{margin-left:auto;margin-right:auto;box-shadow:var(--boxShadow);border-radius:20px;background-color:#282828}#wrapperBottomText{padding:3rem;color:hsl(0deg 0% 65%)}#passages{margin-left:auto;margin-right:auto;background-color:var(--background);border-radius:20px;padding:1.5rem 2rem}#databaseInfoTab{position:fixed;right:22vw;top:-1rem;padding:1.25rem .75rem 0;background-color:#262626;box-shadow:var(--boxShadow);border-radius:12px;height:4vh;line-height:4vh;font-size:2vh;text-align:center}#storyTabs ul{position:fixed;width:1px;right:-1rem;top:3rem;list-style-type:none}#storyTabs li{float:right;padding:1rem 1.25rem 1rem .75rem;background-color:#262626;box-shadow:var(--boxShadow);border-radius:20px;margin-top:1rem;margin-left:50vw;height:4vh;line-height:4vh;font-size:2vh;text-align:center;white-space:nowrap;cursor:pointer}#storyTabs li:after{opacity:0;visibility:hidden;font-size:0;content:" ";transition:var(--tabTransition)}#storyTabs li:hover:after{opacity:1;visibility:visible;font-size:inherit;transition:var(--tabTransition)}#storyTabs li#knowledgeTab:after{content:" Knowledge"}#storyTabs li#peopleTab:after{content:" People"}#storyTabs li#settingsTab:after{content:" Settings"}#storyTabs li#disableContentsTab:after{content:" Disable Content"}#storyTabs li#savesTab:after{content:" Saves"}#storyTabs li#restartTab:after{content:" Restart"}#storyTabs li#creditsTab:after{content:" Credits"}#storyTabs li#devTab{background-color:red}#storyTabs li#devTab:after{content:" Dev Menu"}#debug-bar-hint{display:none}#ui-overlay.open{opacity:.75}#ui-dialog-titlebar{border-radius:20px 20px 0 0}#ui-dialog-title{font-family:Helmet,Freesans,sans-serif;text-transform:initial;font-size:2rem;font-weight:700;text-align:center;text-decoration:underline 2px;padding:.4rem 0}#ui-dialog-body{border-radius:0 0 20px 20px;border:none;padding-left:2rem;padding-right:2rem;line-height:1.25;box-shadow:var(--boxShadow);background-color:#191919}#ui-dialog-close{width:2.6rem;border-top-right-radius:20px}#ui-dialog-body ul.buttons{text-align:right}#ui-dialog-body.saves td{padding:.5vh 3vw}img{border-radius:8px;max-width:inherit;max-height:inherit;height:inherit;width:inherit;object-fit:cover}imghori{display:flex;overflow:hidden;max-height:45vh;max-width:65vw;width:max-content;margin:1rem auto;padding:.45rem;border:1px solid #000;border-radius:8px;box-shadow:inset 0 0 0 10px hsl(0deg 0% 35% / 60%)}imgverti{display:flex;overflow:hidden;margin:auto 1rem;max-height:40vh;width:max-content;max-width:35vw;width:max-content;padding:.45rem;border:1px solid #000;border-radius:8px;box-shadow:inset 0 0 0 10px hsl(0deg 0% 35% / 60%)}.blurred{filter:blur(2vw) grayscale(20%) brightness(80%);-webkit-filter:blur(2vw) grayscale(20%) brightness(80%)}gridcontainer{display:grid;row-gap:1rem;column-gap:1rem;--columns:3;grid-template-columns:repeat(auto-fill,minmax(max(200px,96% / var(--columns)),1fr));margin-top:1rem;padding:4px 12px 8px;border:1px solid hsl(312deg 74% 16% / 0%);border-radius:8px;background-color:var(--background)}gridcontainer#charSelect{grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr 1fr}gridcontainer#charSelect2{grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr}gridcontainer.col1{grid-template-columns:initial}gridcontainer.col2{grid-template-columns:max-content max-content}gridcontainer h2{grid-column:1/-1;border-radius:8px;box-shadow:var(--boxShadow);margin:0 10vw -.5rem;text-align:center;color:var(--backgroundplus1);background-image:var(--middletodarkgradiant)}gridcontainer a,gridcontainer not-a{padding:1rem 1.5rem 1.5rem;border:1px solid hsl(312deg 74% 16% / 0%);border-radius:8px;box-shadow:var(--boxShadow);text-align:left;text-decoration:none;color:var(--link-text);transition:all .45s cubic-bezier(.25,1,.2,1);position:relative;z-index:1;background:var(--background)}gridcontainer a::before,gridcontainer not-a::before{position:absolute;content:"";opacity:0;z-index:-1;border-radius:8px;top:-1px;right:-1px;bottom:-1px;left:-1px;background:var(--middletodarkgradiant);transition:all .45s cubic-bezier(.25,1,.2,1)}gridcontainer a:hover,gridcontainer not-a:hover{border-radius:8px;box-shadow:8px 8px 24px 0 var(--middle);color:#e5e5e5}gridcontainer a:hover::before,gridcontainer not-a::before{opacity:1}gridwrap{display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;width:100%;margin-bottom:1rem}gridhelper{justify-self:flex-end;padding:.2rem .7rem;border-radius:8px;box-shadow:2px 2px 8px 0 hsla(0,0%,0%,.3);text-align:right;font-size:.9rem;color:var(--backgroundplus1);background-color:var(--middle);transition:all .45s cubic-bezier(.25,1,.2,1)}imgcont{height:8vh;width:8vh}gridcontainer a img,gridcontainer not-a img{justify-self:flex-start;background-size:cover;filter:brightness(0) saturate(100%) invert(54%) sepia(39%) saturate(1555%) hue-rotate(199deg) brightness(91%) contrast(90%)}gridcontainer a:hover img{filter:invert(98%) sepia(2%) saturate(1971%) hue-rotate(204deg) brightness(114%) contrast(80%)}griditem.notalink{color:#8b0000}griditem.notalink img{justify-self:flex-start;background-size:cover;filter:invert(10%) sepia(92%) saturate(4354%) hue-rotate(357deg) brightness(83%) contrast(113%)}not-a:hover griditem.notalink img{filter:invert(10%) sepia(92%) saturate(4354%) hue-rotate(357deg) brightness(83%) contrast(113%)}gridtitle{display:block;margin-bottom:.2rem;font-size:1.3rem;font-weight:700}griddescript{font-size:1.1rem}griditem.col2{grid-column-end:span 2}griditem.row2{grid-row-end:span 2}.contentdisabletitle{padding-left:1rem;font-size:1.1rem;text-decoration:underline solid 2px}.subtext{color:#7f7f7f;font-size:.9rem;vertical-align:middle;text-align:justify}.notice{font-size:.7rem;vertical-align:middle}.cont-disabled{display:none}.warning{color:var(--warning-color);font-size:.7rem;vertical-align:middle}.warning-link{color:var(--warning-color);font-size:.7rem;vertical-align:top}#chapterheader{display:block;position:relative;margin-left:auto;margin-right:auto;color:#505050;font-size:2.5rem;font-family:backslash;transition:var(--chapter-text-transition);text-align:center;line-height:3rem}#passagetitleheader{display:block;opacity:0;margin-bottom:.7rem;color:#464646;text-align:center;line-height:1.5rem;transition:var(--chapter-text-transition)}#chapterheader:hover~#passagetitleheader{opacity:1;transition:var(--chapter-text-transition)}#passagetitleheader:before{content:"~ "}#passagetitleheader:after{content:" ~"}html[data-tags~="#map"]{overflow:hidden}body[data-tags~="#map"]{width:unset;margin-left:10vw;margin-right:10vw}html[data-tags~="#map"] #passage-map canvas{position:absolute;left:0;top:0}body[data-tags~="#map"] #infoScreen{display:none}#city-menu-container{position:absolute;z-index:100;left:0;top:0;background-color:hsla(0,0%,0%,.5);width:100vw;height:100vh}#city-menu{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;grid-template-rows:auto 1fr 1fr 1fr;padding:2em;grid-gap:.75em;position:relative;margin:auto;height:70vh;width:70vw;top:10vh;background-image:url(assets/imported/img/png/browncanvas.jpeg);background-size:cover}#city-menu #cityImage{display:block;width:300%;height:100%;grid-column:1;grid-row:span 4;background-repeat:no-repeat;background-size:contain}#city-menu #cityName{color:#e2c536;text-indent:1em;font-size:2.25em;font-family:backslash;grid-row:1;grid-column:2/span 4;text-shadow:2px 2px 3px #000;text-decoration:underline #e2c536 solid .1rem;user-select:none}#city-menu #cityGuildHall{grid-column:2;grid-row:span 3}#city-menu #cityInn{grid-column:3;grid-row:2}#city-menu #cityShop{grid-column:3/span 2;grid-row:3}#city-menu #cityTavern{grid-column:3;grid-row:4}#city-menu #cityBazaar{grid-column:5;grid-row:3}#city-menu #cityGatherInfo{grid-column:4;grid-row:4}#city-menu #cityCrafting{grid-column:4/span 2;grid-row:2}#city-menu #exitCity{padding-top:15%;height:50%;align-self:end;grid-column:5;grid-row:4}#city-menu #exitCity.swapMembers{grid-column:4;grid-row:4}#city-menu .noBuilding{display:block;width:100%;height:100%;border:.3rem dashed #a67f53;border-radius:1rem;background-position:left bottom,left top;background:url(assets/imported/img/png/no_building.png),url(assets/imported/img/png/browndot.png);background-size:contain,1rem;background-repeat:no-repeat,repeat;cursor:default;user-select:none}#city-menu .cityButton{display:block;width:100%;height:100%;padding-top:30%;padding-bottom:30%;box-sizing:border-box;border:.2rem solid #b2b2b2;border-radius:.75rem;background-image:url(assets/imported/img/png/rhombii.png);background-size:20px;background-color:hsl(240,100%,40%,.5);cursor:pointer;user-select:none;font-size:1.5em;font-family:backslash;font-style:italic;text-align:center;color:#e8e2e2;text-decoration:underline #e8e2e2 solid .1rem}#city-menu .cityButton:hover{background-color:#000}#city-menu #guildHallImage{display:block;width:100%;height:100%;visibility:hidden;border:1px solid #fff;background-color:#00008b;grid-row:1/span 3;grid-column:1/span 4}#city-menu #guildHallQuests{grid-row:4;grid-column:1/span 4}#city-menu #guildHallSwapMembers{grid-row:span 3;grid-column:5}#city-menu #tp1swap{grid-column:1;grid-row:1/span 3}#city-menu #tp1swapcharplate{grid-column:2;grid-row:1/span 4}#city-menu #tp2swapcharplate{overflow-y:scroll;width:min-content;grid-column:3;grid-row:1/span 4}#city-menu #tp2swap{overflow-y:scroll;width:min-content;grid-column:4;grid-row:1/span 3}#city-menu #CombatantInformationPlate{line-height:1;width:18vw}#city-menu .itemPlate,.itemPlate{display:block;width:15vw;padding:.5rem 1rem;border:1px solid hsl(312deg 74% 16% / 0%);border-radius:8px;box-shadow:var(--boxShadow);background-color:var(--backgroundplus1)}#city-menu .itemPlateButtonHolder{display:block;margin-top:.5rem}#textbox-container{position:absolute;top:0;left:0;z-index:200;width:100vw;height:100vh;background:hsla(0,0%,0%,25%)}#textbox-container.showbackground{background-size:contain}#textbox-container #textbox{z-index:201;width:100vw;height:40vh;bottom:0;position:fixed}#textbox-container #textbox #textbox-portrait{display:none}#textbox-container.showportrait #textbox #textbox-portrait{display:block;position:fixed;left:2.5vw;bottom:2vh;width:18vw;height:50vh;border-radius:1.25rem;border:2px solid #daa520;background-size:contain}#textbox-container #textbox #textbox-speaker{display:none}#textbox-container.showspeakername #textbox #textbox-speaker{display:block;position:fixed;bottom:37vh;left:18vw;font-size:2.25em;font-family:backslash;text-shadow:none;user-select:none}#textbox-container.showspeakername.showportrait #textbox #textbox-speaker{left:21.5vw}#textbox-container #textbox #textbox-text{display:block;position:fixed;left:15vw;bottom:5vh;width:75vw;height:25vh;padding:.75em 1.25em;background-color:#000;border-radius:1em;border:2px gray solid;font-size:1.75em;line-height:1.25em;color:#fff;text-shadow:none;user-select:none}@keyframes fadeAnimation{0%{opacity:.4}50%{opacity:1}100%{opacity:.4}}@-o-keyframes fadeAnimation{0%{opacity:.4}50%{opacity:1}100%{opacity:.4}}@-moz-keyframes fadeAnimation{0%{opacity:.4}50%{opacity:1}100%{opacity:.4}}@-webkit-keyframes fadeAnimation{0%{opacity:.4}50%{opacity:1}100%{opacity:.4}}.animate-fade{-webkit-animation:fadeAnimation 4s infinite;-moz-animation:fadeAnimation 4s infinite;-o-animation:fadeAnimation 4s infinite;animation:fadeAnimation 4s infinite}tooltip{display:inline-block;text-decoration:hsla(0,0%,45%,.8) underline dashed;transition:all .3s ease-in-out}tooltip:focus,tooltip:hover{text-decoration:none;cursor:pointer;transform:translateY(-1px)}.tooltip_templates{display:none}.tooltipster-sidetip.tooltipster-custom .tooltipster-box{border:none;background:var(--tooltip-background-color);max-width:45vw}.tooltipster-sidetip.tooltipster-custom.tooltipster-bottom .tooltipster-box{margin-top:8px}.tooltipster-sidetip.tooltipster-custom.tooltipster-left .tooltipster-box{margin-right:8px}.tooltipster-sidetip.tooltipster-custom.tooltipster-right .tooltipster-box{margin-left:8px}.tooltipster-sidetip.tooltipster-custom.tooltipster-top .tooltipster-box{margin-bottom:8px}.tooltipster-sidetip.tooltipster-custom .tooltipster-arrow{height:8px;margin-left:-8px;width:16px}.tooltipster-sidetip.tooltipster-custom.tooltipster-left .tooltipster-arrow,.tooltipster-sidetip.tooltipster-custom.tooltipster-right .tooltipster-arrow{height:16px;margin-left:0;margin-top:-8px;width:8px}.tooltipster-sidetip.tooltipster-custom .tooltipster-arrow-background{display:none}.tooltipster-sidetip.tooltipster-custom .tooltipster-arrow-border{border:8px solid transparent}.tooltipster-sidetip.tooltipster-custom.tooltipster-bottom .tooltipster-arrow-border{border-bottom-color:var(--tooltip-background-color)}.tooltipster-sidetip.tooltipster-custom.tooltipster-left .tooltipster-arrow-border{border-left-color:var(--tooltip-background-color)}.tooltipster-sidetip.tooltipster-custom.tooltipster-right .tooltipster-arrow-border{border-right-color:var(--tooltip-background-color)}.tooltipster-sidetip.tooltipster-custom.tooltipster-top .tooltipster-arrow-border{border-top-color:var(--tooltip-background-color)}.tooltipster-sidetip.tooltipster-custom.tooltipster-bottom .tooltipster-arrow-uncropped{top:-8px}.tooltipster-sidetip.tooltipster-custom.tooltipster-right .tooltipster-arrow-uncropped{left:-8px}
/* twine-user-stylesheet #6: "tooltipster.bundle.min.css" */
.tooltipster-base{display:flex;pointer-events:none;position:absolute}.tooltipster-box{flex:1 1 auto}.tooltipster-content{box-sizing:border-box;max-height:100%;max-width:100%;overflow:auto}.tooltipster-ruler{bottom:0;left:0;overflow:hidden;position:fixed;right:0;top:0;visibility:hidden}.tooltipster-fade{opacity:0;-webkit-transition-property:opacity;-moz-transition-property:opacity;-o-transition-property:opacity;-ms-transition-property:opacity;transition-property:opacity}.tooltipster-fade.tooltipster-show{opacity:1}.tooltipster-grow{-webkit-transform:scale(0,0);-moz-transform:scale(0,0);-o-transform:scale(0,0);-ms-transform:scale(0,0);transform:scale(0,0);-webkit-transition-property:-webkit-transform;-moz-transition-property:-moz-transform;-o-transition-property:-o-transform;-ms-transition-property:-ms-transform;transition-property:transform;-webkit-backface-visibility:hidden}.tooltipster-grow.tooltipster-show{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);-o-transform:scale(1,1);-ms-transform:scale(1,1);transform:scale(1,1);-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1);-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-moz-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-ms-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-o-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);transition-timing-function:cubic-bezier(.175,.885,.32,1.15)}.tooltipster-swing{opacity:0;-webkit-transform:rotateZ(4deg);-moz-transform:rotateZ(4deg);-o-transform:rotateZ(4deg);-ms-transform:rotateZ(4deg);transform:rotateZ(4deg);-webkit-transition-property:-webkit-transform,opacity;-moz-transition-property:-moz-transform;-o-transition-property:-o-transform;-ms-transition-property:-ms-transform;transition-property:transform}.tooltipster-swing.tooltipster-show{opacity:1;-webkit-transform:rotateZ(0);-moz-transform:rotateZ(0);-o-transform:rotateZ(0);-ms-transform:rotateZ(0);transform:rotateZ(0);-webkit-transition-timing-function:cubic-bezier(.23,.635,.495,1);-webkit-transition-timing-function:cubic-bezier(.23,.635,.495,2.4);-moz-transition-timing-function:cubic-bezier(.23,.635,.495,2.4);-ms-transition-timing-function:cubic-bezier(.23,.635,.495,2.4);-o-transition-timing-function:cubic-bezier(.23,.635,.495,2.4);transition-timing-function:cubic-bezier(.23,.635,.495,2.4)}.tooltipster-fall{-webkit-transition-property:top;-moz-transition-property:top;-o-transition-property:top;-ms-transition-property:top;transition-property:top;-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1);-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-moz-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-ms-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-o-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);transition-timing-function:cubic-bezier(.175,.885,.32,1.15)}.tooltipster-fall.tooltipster-initial{top:0!important}.tooltipster-fall.tooltipster-dying{-webkit-transition-property:all;-moz-transition-property:all;-o-transition-property:all;-ms-transition-property:all;transition-property:all;top:0!important;opacity:0}.tooltipster-slide{-webkit-transition-property:left;-moz-transition-property:left;-o-transition-property:left;-ms-transition-property:left;transition-property:left;-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1);-webkit-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-moz-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-ms-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);-o-transition-timing-function:cubic-bezier(.175,.885,.32,1.15);transition-timing-function:cubic-bezier(.175,.885,.32,1.15)}.tooltipster-slide.tooltipster-initial{left:-40px!important}.tooltipster-slide.tooltipster-dying{-webkit-transition-property:all;-moz-transition-property:all;-o-transition-property:all;-ms-transition-property:all;transition-property:all;left:0!important;opacity:0}@keyframes tooltipster-fading{0%{opacity:0}100%{opacity:1}}.tooltipster-update-fade{animation:tooltipster-fading .4s}@keyframes tooltipster-rotating{25%{transform:rotate(-2deg)}75%{transform:rotate(2deg)}100%{transform:rotate(0)}}.tooltipster-update-rotate{animation:tooltipster-rotating .6s}@keyframes tooltipster-scaling{50%{transform:scale(1.1)}100%{transform:scale(1)}}.tooltipster-update-scale{animation:tooltipster-scaling .6s}.tooltipster-sidetip .tooltipster-box{background:#565656;border:2px solid #000;border-radius:4px}.tooltipster-sidetip.tooltipster-bottom .tooltipster-box{margin-top:8px}.tooltipster-sidetip.tooltipster-left .tooltipster-box{margin-right:8px}.tooltipster-sidetip.tooltipster-right .tooltipster-box{margin-left:8px}.tooltipster-sidetip.tooltipster-top .tooltipster-box{margin-bottom:8px}.tooltipster-sidetip .tooltipster-content{color:#fff;line-height:18px;padding:6px 14px}.tooltipster-sidetip .tooltipster-arrow{overflow:hidden;position:absolute}.tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow{height:10px;margin-left:-10px;top:0;width:20px}.tooltipster-sidetip.tooltipster-left .tooltipster-arrow{height:20px;margin-top:-10px;right:0;top:0;width:10px}.tooltipster-sidetip.tooltipster-right .tooltipster-arrow{height:20px;margin-top:-10px;left:0;top:0;width:10px}.tooltipster-sidetip.tooltipster-top .tooltipster-arrow{bottom:0;height:10px;margin-left:-10px;width:20px}.tooltipster-sidetip .tooltipster-arrow-background,.tooltipster-sidetip .tooltipster-arrow-border{height:0;position:absolute;width:0}.tooltipster-sidetip .tooltipster-arrow-background{border:10px solid transparent}.tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow-background{border-bottom-color:#565656;left:0;top:3px}.tooltipster-sidetip.tooltipster-left .tooltipster-arrow-background{border-left-color:#565656;left:-3px;top:0}.tooltipster-sidetip.tooltipster-right .tooltipster-arrow-background{border-right-color:#565656;left:3px;top:0}.tooltipster-sidetip.tooltipster-top .tooltipster-arrow-background{border-top-color:#565656;left:0;top:-3px}.tooltipster-sidetip .tooltipster-arrow-border{border:10px solid transparent;left:0;top:0}.tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow-border{border-bottom-color:#000}.tooltipster-sidetip.tooltipster-left .tooltipster-arrow-border{border-left-color:#000}.tooltipster-sidetip.tooltipster-right .tooltipster-arrow-border{border-right-color:#000}.tooltipster-sidetip.tooltipster-top .tooltipster-arrow-border{border-top-color:#000}.tooltipster-sidetip .tooltipster-arrow-uncropped{position:relative}.tooltipster-sidetip.tooltipster-bottom .tooltipster-arrow-uncropped{top:-10px}.tooltipster-sidetip.tooltipster-right .tooltipster-arrow-uncropped{left:-10px}
/* twine-user-stylesheet #7: "Backslash-RpJol.otf" */
@font-face {
	font-family: "Backslash-RpJol";
	src: url("data:font/otf;base64,T1RUTwAMAIAAAwBAQ0ZGIGYHrOgAAAscAACXd0dQT1O6caWsAACilAAAFbRHU1VCI0snnwAAuEgAAACMT1MvMmnvZM8AAAEwAAAAYGNtYXAgQiT6AAAFeAAABExoZWFkJnEoPwAAAMwAAAA2aGhlYRTlEJwAAAEEAAAAJGhtdHi3AATuAAAJ5AAAAThtYXhwAE5QAAAAASgAAAAGbWV0Yfck4t8AALjUAAAK/W5hbWUv/sNdAAABkAAAA+dwb3N0AAMAAAAACcQAAAAgAAEAAAABAAAbSmXIXw889QADA+gAAAAA2vpyZAAAAADa+nJk/+X/DxGAA4cAAAADAAIAAQAAAAAAAQAAAzD/DwAAEbL/5f+MEc0AAQAAAAAAAAAAAAAAAAAAAE4AAFAAAE4AAAAEAlkBkAAFAAACigK7AAAAjAKKArsAAAHfADEBAgAAAAAAAAAAAAAAAAAAAAcQAAAAAAAAAAAAAABYWFhYAEAAAPABAzD/DwAAA4cA8QAAAAMAAAAAAdQC0wAgACAACQAAABwBVgABAAAAAAAAABAASwABAAAAAAABAAkAAAABAAAAAAACAAcACQABAAAAAAADABYAWwABAAAAAAAEAAkAEAABAAAAAAAFACIAKQABAAAAAAAGABAAGQABAAAAAAAHABAAcQABAAAAAAAIABAAgQABAAAAAAAJAAwAkQABAAAAAAALABcAnQABAAAAAAAMABcAtAABAAAAAAAQAAkAywABAAAAAAARAAcA1AADAAEECQAAACABcQADAAEECQABABIA2wADAAEECQACAA4A7QADAAEECQADACwBkQADAAEECQAEABIA+wADAAEECQAFAEQBLQADAAEECQAGACABDQADAAEECQAHACABvQADAAEECQAIACAB3QADAAEECQAJABgB/QADAAEECQALAC4CFQADAAEECQAMAC4CQwADAAEECQAQABICcQADAAEECQARAA4Cg0JhY2tzbGFzaFJlZ3VsYXJCYWNrc2xhc2hCYWNrc2xhc2hSZWd1bGFyVmVyc2lvbiAxLjAwNTtGb250c2VsZiBNYWtlciAzLjUuMVNpbHZlcmRhdiBTdHVkaW8xLjAwNTtCYWNrc2xhc2hSZWd1bGFyU2lsdmVyZGF2IFN0dWRpb1NpbHZlcmRhdiBTdHVkaW9EYXZpZCBLYXNpZGl3d3cuc2lsdmVyZGF2c3R1ZGlvLmNvbXd3dy5zaWx2ZXJkYXZzdHVkaW8uY29tQmFja3NsYXNoUmVndWxhcgBCAGEAYwBrAHMAbABhAHMAaABSAGUAZwB1AGwAYQByAEIAYQBjAGsAcwBsAGEAcwBoAEIAYQBjAGsAcwBsAGEAcwBoAFIAZQBnAHUAbABhAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADAANQA7AEYAbwBuAHQAcwBlAGwAZgAgAE0AYQBrAGUAcgAgADMALgA1AC4AMQBTAGkAbAB2AGUAcgBkAGEAdgAgAFMAdAB1AGQAaQBvADEALgAwADAANQA7AEIAYQBjAGsAcwBsAGEAcwBoAFIAZQBnAHUAbABhAHIAUwBpAGwAdgBlAHIAZABhAHYAIABTAHQAdQBkAGkAbwBTAGkAbAB2AGUAcgBkAGEAdgAgAFMAdAB1AGQAaQBvAEQAYQB2AGkAZAAgAEsAYQBzAGkAZABpAHcAdwB3AC4AcwBpAGwAdgBlAHIAZABhAHYAcwB0AHUAZABpAG8ALgBjAG8AbQB3AHcAdwAuAHMAaQBsAHYAZQByAGQAYQB2AHMAdAB1AGQAaQBvAC4AYwBvAG0AQgBhAGMAawBzAGwAYQBzAGgAUgBlAGcAdQBsAGEAcgAAAAABAAMAAQAAAAwABARAAAABDAEAAAcADAAAAAoADQAgACMAJAAlACYAKAApACoALAAxADIAMwA0ADUANgA3ADgAOQBBAEIAQwBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAYQBiAGMAZABlAGYAZwBoAGkAagBrAGwAbQBuAG8AcABxAHIAcwB0AHUAdgB3AHgAeQB6AKAArQDAAMEAwgDDAMQAxQDHAMgAyQDKAMsAzADNAM4AzwDRANIA0wDUANUA1gDYANkA2gDbANwA3QDgAOEA4gDjAOQA5QDnAOgA6QDqAOsA7ADtAO4A7wDxAPIA8wD0APUA9gD4APkA+gD7APwA/QD/AXjwAPAB//8AAAAAAAoADQAgACMAJAAlACYAKAApACoALAAxADIAMwA0ADUANgA3ADgAOQBBAEIAQwBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAYQBiAGMAZABl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izb8OOU65zwHPXs+pkC7Qp1ECkTWRqNIsEoTTAFNfE8aUgdTxFVpVwxZC1opXLhelF+lYdxj3mVkZ2ZpAGr3bC1uVnA4caxyeHJ7cn2DWJQz+KP/ADIAAP8CvAAAFf8AAAAA//1EAAAF/wGrAAD/AAAAAAX/AAAAAP8CvAAABf/+cQAA///sAAAV/wFzAAD/AAAAAAX//0YAAP/+ywAABf//9AAA///rAAAV//9MAAD//tMAAAX/AAAAAP8CWQAABf8AwQAA//6/AAAV/wC5AAD//swAAAX//o4AAP8AAAAABf8AxQAA/wFJAAAV/wC1AAD/AS4AAAX/AAAAAP/9owAABQ6LDosOiw73rg74s/8B+qP6/wFBpZIV/wAM6YX/ADmGogX//68AzP8AAAAABf8AJGIX/wCfo/EF///FTb7/AAAAAAX//9uasf//YYevBf//cM7k/wAAAAAF/wAkYhf/AJ54UQX//8VNvv8AAAAABf//3MZQ//9is04F//+cOfH/AAAAAAX///MZtP//x6T9Bf8AY8lI///+1GEF///psw7//5/ACAX//5LQEv8AAAAABf//9EIb///HpP0F/wBr/d3///7UYQX//9lDcf//VcnJBf8AOrJC/wAAAAAF/wAmvI//AKo2NwX/AI83jf///tRhBf//2UNx//9W9WkF/wA6skL/AAAAAAX/ACa8j/8Ap9u/Bf8AR5iO/wAAAAAF/wAM6YX/ADmGogX//7hkOf8AAAAABf8AFSSM/wBhbtEF//+wLGr//5+8zxX//3DIc/8AAAAABf8AFkm6/wBhbtEF/wCOC+7///7UYQUO+M7/AUCRxP8B9m4PFf8AAAAA/wD8YQoF/wBppp7///Vw8/8AOYNq//+g6G//AAAAAP//tN4iCP8AEZs8/wAAAAAF/wAAAAD/ALFFngX///MWe/8AAAAABf//+PPR///zFnv///x9Iv//+PPR///49wr/AAAAAAj///MWe/8AAAAA///OsSv/ADYAi///p/fW/wAKjw4I/wAAAAD/AGT06AX//8VKhv8AAAAABf8AAAAA//+bCxgF//96K+D///Vw8///p/Sd//+t0fP/AAAAAP//l4g6CP8AAAAA//+n9J3/AEG+cP//u+pR/wBjxg///8n/dAj/ABUhU///9XDz/wASyhT///Vtuv8AEG+c///2nJII/wAAAAD//wX2NQX//51lkP8ABLG3//+qS9z/ADX9Uv//7mTE/wBfF5EI///uZMT/AAAAAAX/AAOGF///QKh3Bf8ADhUl/wAAAAAF/wAIN87/ABUhU/8ABwwu/wALveX/AA9D/f8AAAAACP8AHCpJ/wAAAAD/ADcsK///49J+/wBYC2L/AAAAAAj/AAAAAP//tN4iBf8AOrJC/wAAAAAF/wAAAAD/AE6n9gX/AHMKDP8ADhUl/wBnT1//ADhbA/8AAAAA/wBwr5QI/wAAAAD/AHe7w///iphE/wBAktH//5sOUf8AOFfKCP//xU2//wAfsGAV///EIh//ACIK1///xnld/wAjNnf/AAAAAP8APQy6CP8AAAAA/wAxS5v/ADvhGv8AHof5/wA5g2r/AAg3zgj/ADqyQf/9gDrzFf8AAAAA/wDTTT0F/wA4V8r//9zJif8AFSFT///ipt//AAAAAP//yNCdCP8AAAAA///I1w7//931Kf//5im+///Ukbr///Vw8wgO+JX/AJMTAv8BqPNIFf8ARBWw///+1GH/ADmGov8APjhZ/wAAAAD/AEnzBQj/AAAAAP8ATXkd///I0J3/ADTU7P//vRkp/wACVz8I//+76lD/AAEu2P//xnyW///HqDb/AAAAAP//tgnCCP8AAAAA//+yhuP/ADcsKv//xU2+/wBC5tj///2liAj/AAJaeP8A2S3NFf8AEsoU///+1GH/AAAAAP//vRXw/wAAAAD///Hq3Aj/AAAAAP//9XDz///8een//7TeIv//75Bk/wAAAAAI///tOSX/AAAAAP8AAAAA/wBLId7/AAAAAP8ACo8OCP8AAAAA/wAOFSX/AAJXP/8ARUFP/wARmzv///7UYAj/AOO5oP8AMnp0Ff/+v4x///1LZggF/wA6rwn/AAAAAAX/AUB2uv8CtJn4Bf//usHq//5zOJAV//+76lD/AAJaeP//xnyW///GeV7/AAAAAP//tgnBCP8AAAAA//+yhuP/ADcsKv//xU2+/wBC5tj///2owQj/AEQVsP///aWI/wA5g2r/AD9j+P8AAAAA/wBJ9j4I/wAAAAD/AE15Hf//yNPW/wA01Oz//70ZKP8AAlc/CP///aWI//8lqc4V///tNez/AAAAAP8AAAAA/wBLId7/AAAAAP8ACo8OCP8AAAAA/wAOGF3/AAJdsf8ARUFP/wARmAP///7UYQj/ABLG2////tRh/wAAAAD//70V8P8AAAAA///x56MI/wAAAAD///Vtuv///H0h//+04Vv//++QZP8AAAAACA75J/8BqXJQ/wGEj6IV//+t1Sz/AD44Wf//v20v/wAYpDH//9lDcf8ASyHeCP//7Tkl/wAkZU//ABZM8v8ASx6l/wAsnR3/AAJaeAj/ADmDav8AAlp4///7Tkn//5LTSv//1b1a//++RMkI/wAF4I////jz0QX/ACWNtv8AGdMK/wAu95X/ABwtgf8AAAAA/wBC5tcI/wAAAAD/ADcsKv//yNPW/wAtyL3//8Qe5v8ABLG2CP//cyLq/wAKkkb//7vqUP//iW/d/wAQb5z//5nfeQj/AB6EwP//SOBF/wEEnBH//8QiH/8ANf1S//+LxxsI/wAfs5n//7vqUP//0Quj///SN0P//7Oyg///8LwDCP8ACWNu///zFnsF/wBinaj/AAu95f8AeOdj/wAqQqb/AA4VJP8AdozqCP8ACpJG/wBVt13//6t3fP8AR5vH//+xW0T/ADqvCQj/AKo2N/8Ap975Ff//mwsY/wAjNnf//8VNvv//cfdK///7Tkr//8jQnQj/AASxt///+05JBf8AJ+gu/wBuWFX/AFD/NP8AHC2C///zFnv///C8Awj//+PVt///3fUp/wALuqz//+BPoP8AFlAr///zE0II/wAdVej//++QZP8ALvRd/wAVIVP/AAg7B/8AM6lMCP8AAlp4/wAPQ/z///tOSf8AJZDv///bmrH/AAzphQj//yR69f/+lBfKFf//zFnt//+9FfD//8srFP8AASug//+ztbv/ADFO1Aj//8VNvv8AJZDv///nWJb/AE15HP8ALvRd/wBC6hAI///1bbr/AAzphQX//2UNxv//iW/d/wAT9bP//0s6vf8AVIVM///W6PoI/wCVGBz//7c4mv8AgkrQ/wC4S1v/AAXdVv8AMCM1CA73sP8BCkdm/wNv61kV//9P7HP//4S67f//x6g2//9fLTf/AAEoZ///XzBwCP8AAS7Y//9lCo3/AGKacP//KluE/wB9nFL//75BkAj/AA9D/P//+iKq///9pYj/ACIK2P//8xZ7/wASxtsI//+3OJr/AHjqm///253p/wB/85H/AAAAAP8AioXWCP8AAAAA/wCg0sn/ACDcAP8AZPTo/wBSLgz/AI83jQj/AAqPDf8AEGxj/wAAAAD/ABwtgv//9W27///7TkkIDvew/wAQ7bT/A2/o0RX///Vtuv8ABLG3/wAAAAD//+PSfv8ACpJG///vk50I/wBSKtT//3DIc/8AIOJx//+bCxj/AAAAAP//Xy03CP8AAAAA//91ein//9uasf//gAxw//+3OJn//4cYnQj///MWe///7TXs///9pYj//931Kf8AD0P8/wAF4I8I/wB9mRn/AEG+cP8AYppw/wDVpHz/AAEu2P8AmvVzCP8AASuf/wCgzFf//8ek/f8AoNLJ//9P7HP/AHtFEwgO+AX/AHeKPf8CYwo9Ff8AAS4U/wABK4UF/wADgo//AAOFH/8AAlwp/wAEszP/AAEuFP8AA4UfCP8AEHCk/wAcLhT/ACDcKf8AQI9c/wAF3rj/ABGZmgj/AAEwpP8AAAAA/wAAAAD/AAAAAP8AAAAA/wAAAAAI/wAF3Cn//++R7P8AIgo9//++RR//ABBwpP//49HsCP8AAS4U///8euH/AAJXCv//+0zN/wADh67///x64Qj/AAEuFP///tR7Bf8ACpHs///0Qo//ABd4Uv//+0zN/wALvXH/AA4Uewj/AAOHrv8AAlwp/wADhR//AAXcKf8AAlcK/wAHDM0I/wAEszP/AAu9cf8AAAAA/wAOFHv///jzM/8ACDhSCP///tR7/wABK4UF///0PXH/AAlj1///vko9/wAzpmb//+T9cf8AD0UfCP8AHVma/wAAAAD/AEnzM/8ADOj2/wAVIUj/AAJXCgj/AAEuFP8AASuF/wABK4X/AAAAAP8AASuF/wAAAAAI/wACWZr/AAAAAP8AAlcK/wABK4X/AAJcKf8AAlmaCP8ABd64/wAEszP/AASzM/8ABwo9/wABK4X/AAlj1wj/AAJZmv8ACDhS/wAAAAD/AAg4Uv///Hrh/wAHDM0I///7TM3/AA9AAP//6bCk/wAJY9f//+5j1///9pwpCP//98o9///8euH//63R7P//yf1x///tOFL//++Uewj/AAg4Uv8AF3rh/wARmZr/AEseuP8AA4eu/wAYqPYI/wABK4X/AAJZmv8AAAAA/wACVwr/AAAAAP8AAlmaCP////hS/wARnrj//++R7P8ADhcK///uZmb/AAAAAAj//+5mZv8AAAAA///vj1z///Ho9v8AAAAA///uYUgI/wAAAAD///2mZv8AAAAA///+1Hv/AAErhf///aj2CP8AAlwp///oh67/ABBrhf//tN64/wAJY9f//+dXCgj//+wMzf8AEZwp//+wK4X/ADOmZv//98o9/wADhR8I///uY9f/AAlj1///6bMz///2nCn///tKPf//8MAACP///H1x///48zP/AAAAAP//98eu/wACVwr///fKPQj/AAErhf//9pwp/wAEtcP///jzM/8ABdwp///7TM0I/wACXCn///2mZv8AAlcK///+1Hv/AAJZmv8AAAAACP8AAS4U/wAAAAD/AAErhf8AAAAA/wABK4X///7Uewj/ABUhSP///aZm/wBJ8zP///MZmv8AHVma/wAAAAAI///lAo////C64f//vkUf///MWZr///Q9cf//9p64CP///tR7///+0ewF///48zP///fKPf8AAAAA///x6Pb/AASzM///9EKPCP8AAlma///48zP/AAOHrv//+iPX/wADgo////2mZgj/AAu9cf//8eZm/wAXeuH/AASzM/8ACo9c/wALvXEIDvdS/wCGmG//AMpiPRX//7YM+v8AK25F//+5j9n//6bI/v8ALvRc///nWJUI/wA2AIv//+mzDv///aWI//+9FfD//860Zf//3MmJCP///tRh///9pYj/AAcMLv//+PcK/wAIN87/AAJXPwj/AGYdT/8AKRcG/wAtyL3/AHoWOv//vRXw/wAmvI8IDvfP/wDsb+b/ADJ7EBX/AAAAAP8ADhhd/wAAAAD/Alfc3v8AAAAA/wAa/qkI/wAAAAD/ABr+qQX/AAAAAP8ABd1W///8een/AAJaeP///Hno///8eekI///fIMj//9lDcf//qSA8//+9FfD//79waP//+05JCP//+iKq///+1GH/AAErn///+05J/wAEsbf///x56Qj/AAXdVv//+05J/wAbAeL///RCG/8AAAAA///mLPcI/wAAAAD//gFaJAX/AAAAAP//7mTE///abxH//+iENf//9pyS/wAAAAAI/wAAAAD///ackgX/AP67gv8AAAAABf8AAAAA/wAJY24F///1dCz/AAADOP//2UA5/wAXeJL/AAAAAP8AEZs8CA740v8CF5mu/wIRbVQV/wAAAAD/AJdvXP//ab99/wBC6hD//44hlP//9W27CP//OZxI///tNez//7mTEv//MDwT/wAwH/z//5eFAQj/AA4VJf//3MmJ/wAu9Fz//9SOgv8AK3F+///9qMEI/wAn6C7/AAAAAP8AIN84/wAjNnf///fIMv8ANNTsCP//rKZU/wBaYqL/ACIOEf8AuqXT/wBk8a//ABLKEwj/AGwBFv8AE/J6///8drD//1zV+P///Hno///mLPYI///6Iqr//1EYEv/+4GVG//9Tb1L//9ELo///P3zXCP8B7Qdo/wAAAAAF/wAAAAD/ALX0HAX///fIMv8ACo8N///2nJL//860Zf//1JG7/wAAAAAI//7SUCH/AAErnwX/AHxwsv8AhKVH/wDuS+b/AEsh3v8ACo8N/wCxPywIDvjz/wFKRML/AaC9wBX/AFW0JP8ACDfO/wBk8a//ADFO1P8AAAAA/wBUhUwI/wAAAAD/AIJOCf//fIZY/wAxS5v//56RL/8AAAAACP//ZQ3G/wAAAAD//7Asa///henG/wApE87//6Ruhgj/AAu95f//4XtA/wApE83//9pvEf8AJryP///9pYgI/wAiCtf/AAAAAP8AHC2C/wAehMD///oiqv8ALvRdCP//tzia/wBOp/b/ACkTzf8AXxRY/wA5hqP/AAXdVgj/AG+D9f8ACo8N///7Tkr//3kDef8AAAAA///1bbsI/wAAAAD//7vqUP//2nJK///J/3X//7OvSv//4qbfCP//+iKq///9pYj///jz0v///tRh///3yDL///7UYAj///x56f///tRh/wAAAAD///ofcP8AA4YX///+1GEI/wAHDC////2liP8AAlc//wAAAAD/AAu95f///tRhCP8Ad778///wvAT/ABikMf//j1Br///49wr//6kgPQj/AAAAAP//9EIb///489H//1b1af//gAxw/wAJZqcI//+4ZDn/AAg3zv//yf91/wB452L/AFy9Gf8AY8lICP8ACWNu/wA6skL//9pvEf8AJY22///TZhz/AAAAAAj//9ELo////aWI///NhYz//9EO3P//75Bk///YFJkI///LKxT//44hlP8AZiCH//9nZQX/AMLdof8AAAAACP8Ae0Ha/wAAAAD/AKWEgP8APjUh/wAAAAD/AKIBoQj/AAAGcv8AcegX//95AEH/AE6kvP//kHjS/wAIN84IDvkY/wJRhRX/AUsM1RX//++QZP//z+AE///2nJL//+mv1f//yysU///1cPMI/wAAAAD/AehVsgX//9zJif8AAAAABf/+UllY//3yGWAF/wEyYZb/AAAAAAX/AAAAAP//Xf5fBf8AAAAA///uZMT//9pvEf//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ABd7y/8AAAAA/wARmzwI/wAAAAD/AJr1cwX/ADTRs///9XDz/wAJY27//+mzDf8AEHLV///P3MsI/wADhhf///jz0f8ADhUl/wABLtj/AAAAAP8ABd1WCP8AAAAA/wDOm4YF/wAAAAD/AAXdVv//8erb/wABK5////x56f//+PcKCP//Et+5//+n9J4V//8JfEz/AAAAAAX/APaDtP8BLbMYBQ74wP8CBiEc/wJK8/YV///wvzz/AK28TgX///fIMv8ACpJG///2nJL//86xK///1I6C/wAAAAAI//6YzLj/AAAAAAX//+BMZ//+sXDpBf8AIzZ3/wAAAAAF/wAXeJL/ABP1s/8AIzmw/wAzphP/AFy9Gf8AAAAACP8AU1ms///6Iqr/ACM2d///o0Ln/wACVz///4Xpxgj/AAAAAP//2BfS/wAAAAD//1unIP//jiGU/wAAAAAI//+jQuf/AAAAAP//7ApN/wBq0j7/ADJ6dP8AEsbbCP8AGKdq/wAdWSH//+PSf/8AOYai///GfJb/AAcI9gj//8/cy/8ABwwv///cyYn//9Ni4v8AAAAA///LKxQI/wAAAAD//8QiH/8AP2P4//+Ys9r/AJia+/8AAAAACP8AehY6/wAAAAD/AI4Itf8AU1ms/wAAAAD/ALFCZQj/AAAAAP8AnCES//9ZT+H/AEebx///wcen/wAAAAAI//+splT/AAAAAP//vRkp///ohDX//86xK///1b1aCP8AD0DE/wCkWOAFDvjc/wE13NX/Ad72GRX//8jT1v8AAAAA///abxH///C8BP//4XtA///tOSUI/wAJZqf/AFk3Av8AHoGH/wB8cLL/AFbfxP8AHVXoCP8AP2P4/wAWTPL/ACydHf//xCIf///j0n///8xZ7Qj//+wKTf//zrRl/wBx3mz///Hno/8AGdMK/wBHm8cI/wAbAeL/AEjHZv//no33/wA6skL//5sOUf///HnpCP//aJCk/wAAAAD//2Pe7v//TGZc/wAAAAD//zvzhwj/AAAAAP//I09W/wBzCgz//3V6Kf8AoNLJ/wAAAAAI/wBbjkH/AAAAAP8Ak+lE/wA/Y/j/AAAAAP8ArJCuCP8AAAAA/wCkWOD//321MP8ATqf2//+S00r/AAAAAAj////////+UAIZFf//tzia/wAAAAD//+BMZ/8ASMdm///x6tv/AEsh3gj//+5kxP8AiCtf/wBEFbD/AGrVd/8ARBWw/wAAAAAI/wBIx2b/AAAAAP8AHCpJ//+Z33n/AAAAAP//pG6GCP8AAAM4//+03iL//+Ys9///henG//+03iL/AAAAAAgO+O7/AB4AAP8CJDdoFf8ACDfO///1bbr/AAljbv8AMU7V/wArcX7/AAAAAAj/AUsJAP8AAAAABf//fIZY//9C/7X//vkMsP//ei8Z/wAlkO///02Owwj/ABnTCv//kaer/wCpCpf///7UYf8AEG+c/wBZNwII//97V4D/AFNZrP8BHm8b/wE88KP/AECS0f8AfsfyCP8AOFfK/wCEpUcF//32yxb/AAAAAAX/AAAAAP//URtLBQ746P8BhdwK/wF+sugV/wBNeR3/ABwtgv8ANNTs/wA9CYH/AAAAAP8ASyHeCP8AAAAA/wBod8b//5nfef8AVIiE//+BOA7/AAAAAAj//4Jm5/8AAAAA//+Z3EH//6t6tf8AAAAA//+XhQEI/wAAAAD//7KG4/8AOFsD///Bx6f/AFD/NP//5P4eCP//nWWQ///j0n7//7q7ef//uZMS/wAAAAD//63R8wj/AAAAAP//k/7q/wB3u8P//6pPFf8Akr2k/wAAAAAI/wCT6UT/AAAAAP8AdWSD/wBW3Iv/AAAAAP8AatV3CP////zI/wBUiIT//7c4mf8AR5iO//+Z33n/ABsB4gj//51lkP8BPh96Ff8AKRcG/wAAAAD/ACM2d///vRXw/wAAAAD//6kjdgj/AAAAAP//qSA9///cyYn//75EyP//1uj6/wAAAAAI///W6Pr/AAAAAP//3fUp/wBBuzj/AAAAAP8AVt/DCP8AAAAA/wBW3Iv/ACIK1/8AQuoQ/wApFwb/AAAAAAj/AAg0lf/9bXQZFf//0Quj/wAAAAD//9bo+v8ARBWw/wAAAAD/AFk3Agj/AAAAAP8AWTcC/wApFwb/AE18Vv8ALvRd/wAAAAAI/wAu9F3/AAAAAP8AKRcG//+yhuP/AAAAAP//psXFCP8AAAM4//+myP7//9bo+v//u+pQ///RCGr/AAAAAAgO+Nb/ARJ6v/8C4AjaFf//pG6G/wAAAAD//2wWvP//wJwI/wAAAAD//1NvUgj/AAAAAP//W6cg/wCCTgn//7FbRP8AbSy2/wAAAAAI/wA3LCr/AAAAAP8AJZDv/wAPQMT/AB6EwP8AEsoTCP//9pyS//+myP7//+F7QP//g49O//+pIDz//+Km3wj//8CcCP//6bMO///nWJX/AF8UWP8AM6YU/wAu9F0I/wAT8nr/ADFO1f//Zjlm/wAXeJH//+Km3///rwDMCP//6bMO//+3OJr/AFy9Gf//rKZU/wBk9Oj///2owQj/AJdvXP8AAAAA/wCT6UT/AL0AS/8AAAAA/wD8YQoI/wAAAAD/AMCJmv//hxie/wBk8a///21CW/8AAAAACP8AAAAA//5KJMIV//+3OJr/AAAAAP//49J+/wBmIIf/AAAAAP8AW5F6CP8AAAAA/wBLId7/ABnTCv8AehMC/wBLId7/AAAAAAj/AEjHZv8AAAAA/wAfsGD//7c4mv8ADhhd//+03iII/wARmzz//3fUof//u+pQ//+VLcP//7vqUP8AAAAACA75Ev8AcLvD/wAJZFkV///vkGT/AAAAAP//49W3/wAVIVP/AAu95f8AJZDvCP8ASMdm/wDcsKoF/wDPxyb/AAAAAAX/AEsh3v//I09WBf8ACo8N///mLPb//8/gBP//3yDI///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vtuv8AAAAA///iqhj/ACIK1///9plZ/wAYp2sI//8lqc3/Ao3aMQX//679k///zFnt///An0H/AAljbv//+0sQ///2nJII///8een///jz0f8AC73l///8fSL/AAOGF///9plZCP//Pk3///25wZYF///2nJL//+T+Hv//5QFX///gT6D///C8BP8AAAAACP8AAAAA///2nJIF/wB3u8P/AAAAAAX/AI83jv8CVYJnFf8AXxeR//7onRQF//9EK1X/AAAAAAUO+QP/ABMAAP8ACWRZFf8AAAAA///2nJIF/wDNb+b/AAAAAAX/AN3cSv//+iKq/wCg0sn/ADX9Uv8AAAAA/wCSvaQI/wAAAAD/AIb/v///nWWQ/wAu9F3//4Jjrv8AD0DECP8AU1ms/wAcLYL/ADqyQv8ANNTs/wAAAAD/AFgIKgj/AAAAAP8AaHr///+VLcL/ADhXyv//b5zT/wAAAAAI//8BQUX/AAAAAAX/AAAAAP//9pySBf8ACWan/wAAAAD/ACWNtv//1uj6/wAAAAD//+5kxAj/AAAAAP/9tjt/Bf8AAAAA///uZMT//9pySv//1uj6///2mVn/AAAAAAj/AM1v5v8CpVX8Ff8Ab4P1///+1GH/ACpCpv//uY/Z/wAAAAD//8xZ7Qj/AAAAAP//v3Bo///cyYn//6WdXv//iW/d///3yDII/wAOFSX//98gxxX/AIEiaf8AAAAA/wBNeRz//7hkOf///aWI//+dZZAI///+1GH//79waP//zrEr//+Z33n//1ghCf8AAAAACP8AAAAA/wFQ5lYFDvjt/wIh7Rz/AE/UgBX/AAzphf//7TklBf8AAAAA/wAAAAD/AAcML////aWI/wAAAAD/AAJaeAj/AAg3zv8AzEEOBf8AAAAA/wAEsbf///C/PP8AD0P8///9pYj///x56Qj//+017P//j1Bs///Bx6f//4OPTf//ktaD/wABK6AI//9gWNb/AAErn///+PPS/wD7OKT/AAAAAP8ATE19CP8AAAAA/wBHm8f/ABGbPP8A5z+3/wCg0sn///2owQj/AEebx////tRh/wApFwb//5w2uP8AD0DE//+WWWII/wACWnj///fIMv8AGdMK/wAQb5z/AAAAAP8ACDfOCP//98tr/wDNbK4F/wAAAAD/AAErn///+PPR/wAAAAD/AAAAAP///tRhCP//8xZ7///sDYYF///RC6P/ACDfOP//6IQ1/wARmzz//8Z8lv8AASufCP//RVot/wADhhf//1b1af//bUJc///9pYj//zYZagj///2liP//K4ck/wCiAaH//14BmP8AuqXS///9pYgI/wBUhUv///7RKP8AMnp0/wAn6C7/ACyZ5f8AKRcGCA75Mv8A4G/m/wLUS0QV//8ykBr/AAAAAAX/AAAAAP//9pySBf8ACWan/wAAAAD/ACWNtv//1uj6/wAAAAD//+5kxAj/AAAAAP/9tjt/Bf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8AzW/m/wAAAAAF/wEN/3//AAAAAP8AlRTk/wCIK1//AAOGF/8A47zZCP8AA4Lf/wDijgH//2GHr/8AgkrQ//70Wvn/AAEu2Aj/AQJBmv/+nE+WFf///tRh//+kbob//++QZP//EbQa//8PWaL/AAAAAAj/AAAAAP8CilQaBf8A6/Fu///8een/ABd7y///H8x3///+1GH//6NC5wgO+MD/AgAKof8A3wjVFf//4XtA//9I4EX//21FlP8ACo8N//+RpHL/AAAAAAj/AAAAAP8BKQFhBf8ASyHe///3yDL/ACDfOP//7Tkl/wASxtz//8ek/Qj/AAOGF///+PPR/wAOFSX/AAEu2P8AAAAA/wAF3VYI/wAAAAD/ANIhngX/AAAAAP8ABd1W///x56P/AAEu2P///H0h///489EI///tOSX//8ek/f//3yDI///tOSX//7TeIv//98gyCP8AAAAA/wEYjowF/wAZ0wr///7UYf8AuEtb/wASxtv/AB1ZIf//auscCP8AA4YX///489H/ABd7y/8AAS7Y/wAAAAD/AAXdVgj//+PSfv8AtfQcBf/+REQz/wAAAAAF/wAAAAD///ackgX/AAlmp/8AAAAA/wAljbb//9bo+v8AAAAA///uZMQI/wAAAAD//bY7fwX/AAAAAP//7mTE///abxH//9bo+v//9pyS/wAAAAAI/wAAAAD///ackgX/Aevbyf8AAAAABf8AHC2C/wDfCyIF/wAAAAD/AAXdVv//6Idu/wABK5////x56f//+PPSCA74gv8Bz+ds/wIb/LAV/wADhhf///jz0f8AF3vL/wABLtj/AAAAAP8ABd1WCP//49J+/wC19BwF//5ERDP/AAAAAAX/AAAAAP//9pySBf8ACpJG/wAAAAD/ACRiF///1uj6/wAAAAD//+5kxAj/AAAAAP/9tjt/Bf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ACkXBv8AAAAA/wARmzwI/wAAAAD/ARdi7AX/AEsh3v//98gy/wAg3zj//+05Jf8AEsbc///HpP0I/wADhhf///jz0f8ADhUl/wABLtj/AAAAAP8ABd1WCP8AAAAA/wDSIZ4F/wAAAAD/AAXdVv//8eej/wABLtj///x9If//+PPRCP//7Tkl///HpP3//98gyP//7Tkl//+03iL///fIMgj/AAAAAP8BGI6MBf8AGc/R///+1GH/ALhOlP8AEsbb/wAdWSH//2rrHAgO+TP/ApTIRf8BHUEuFf8AAAAA/wAJY24F//8AGN7/AAAAAAX/AAAAAP//9pySBf8AD0DE/wAAAAD/AB+zmf//6IQ1/wAAAAD//+5kxAj/AAAAAP//cMhzBf///aWI///abxH//9zJif//7mTF///SN0P/AAAAAAj//2BY1v8AAAAA///489L/AO5PH/8AAAAA/wBYCCoI/wAAAAD/AF8UWf8AD0P8/wDUeNz/AKDSyf///ajBCP8AZPGv///+1GH/ADOpTP//nDa4/wAPQMT//5ZZYgj/AAJaeP//98gy/wAPQMT/ABBvnP8AAAAA/wAIN84I///3yDL/AM1srgX/AAAAAP8AASuf///489H/AAAAAP8AAAAA///+1GEI///zFnv//+wNhgX//9ELo/8AIN84///LKxT/ABGbPP//xnyW/wABK58I//9FWi3/AAOGF///VcnJ//9zIur/AAAAAP//K4ckCP8AAAAA//86yyD/AJia+///Tr2b/wDC3aH/AAAAAAj/AHHebP8AAAAA/wBLId7/ACtuRf8AMUub/wAiCtgI/wAKjw3///Vw8wX/AAAAAP8AAAAA/wAF3Vb///2liP8AAAAA/wACWngI/wAAAAD/ALFCZQX/AAAGcv8AGKQx/wAa/qn/ABBvnP8ACpJG/wAAAAAIDvlJ/wKiCQn/Asm4/hX/AAAAAP8ACWNuBf//AUR+/wAAAAAF/wAAAAD///ackgX/AAljbv8AAAAA/wAlkO///9bo+v8AAAAA///uZMQI/wAAAAD//uwjKwX//w4uA/8AAAAABf8AAAAA/wET3NUF/wAAAAD/ABGbPP8AJryP/wApFwb/AAqPDf8AAAAACP8AAAAA/wAJY24F//8BRH7/AAAAAAX/AAAAAP//9pySBf8ACWan/wAAAAD/ACWNtv//1uj6/wAAAAD//+5kxAj/AAAAAP/9tQ/fBf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ACkXBv8AAAAA/wARmzwI/wAAAAD/ARm6KwX/APHR/f8AAAAABf8AAAAA//7mRdUF/wAAAAD//+5kxP//2m8R///W6Pr///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9W26/wAAAAD//9lDcf8AKRcG/wAAAAD/ABGbPAj/AAAAAP8CSvAhBf8AAAAA/wARnnT/ACa/x/8AKRPO/wAKjw7/AAAAAAgO97j/ARG7gv8Cybj+Ff8AAAAA/wAJY24F//8BRH7/AAAAAAX/AAAAAP//9pySBf8ACWan/wAAAAD/ACWNtv//1uj6/wAAAAD//+5kxAj/AAAAAP/9tQ/fBf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ACkXBv8AAAAA/wARmzwI/wAAAAD/AkrwIQX/AAEoZ/8AEsoU/wAmvI//ACkTzf8ACWam///+1GEIDvei/wAI4Rz/Asm4/hX/AAljbv8AAAAA/wAlkO///9bo+v8AAAAA///uZMQI/wAAAAD//bUP3wX/AAAAAP//wJwI///lAVf//8Z8lv//02Lj///bmrAI///9pYj///2liP///tRh///uZMT/AAOGF/8AAAAACP8AgSJp/wAAAAD/AGT05/8AVbDr/wAAAAD/AFuRegj/AAAAAP8CSvAhBf8AASuf/wASyhT/ACa8j/8AKRPN/wAJY27///7UYQj/AAAAAP8ACWNuBf//AUR+/wAAAAAFDvkF/wGS2rL/AAlkWRX/AAAAAP//9pySBf8A5hQY/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ohDX/ABBvnP//8L88/wAYp2oI//78ksf/AY8erwX/ALl2+/8A3dxKBf8ACWNu/wALveX/ABd7y/8AHVkh/wAEsbf/AAAAAAj/AAAAAP8ACWNuBf//gmbn/wAAAAAF/wAAAAD///ackgX/AA9AxP8AAAAA/wAg3zj//9bo+v//6t6t///he0AI//8fzHf//vIAgQX/AAAAAP8BHBSjBf8AASuf/wASyhT/ACa8j/8AKRPN/wAJZqf///7UYQj/AAAAAP8ACWNuBf//AUFF/wAAAAAF/wAAAAD///ackgX/AAlmp/8AAAAA/wAljbb//9bo+v8AAAAA///uZMQI/wAAAAD//bUP3wX/AAAAAP//7mTE///abxH//9bo+v//9pyS/wAAAAAI/wAAAAD///ackgX/AP6+u/8AAAAABf8AAAAA/wAJY24F///1bbr/AAAAAP//2UNx/wApFwb/AAAAAP8AEZs8CP8AAAAA/wEfmroF/wDIuvf//s7KCgX/ABLG2///49J+///mLPb///MWe///8LwE/wAAAAAIDvi1/wIbDIP/AN8I1RX/AAAAAP8ABd1W///ohDX/AAEu2P///Hnp///489EI///heAf//0jgRf//bUWU/wAKjw3//5Gkcv8AAAAACP8AAAAA/wJbYvYF/wAAAAD/ABGbPP8AJryP/wApFwb/AAqSRv8AAAAACP8AAAAA/wAJY24F//8BRH7/AAAAAAX/AAAAAP//9pySBf8ACWNu/wAAAAD/ACWQ7///1uj6/wAAAAD//+5kxAj/AAAAAP/9tjt/Bf8AAAAA///uZMT//9uasf//1uj6///1cPL/AAAAAAj/AAAAAP//9pySBf8B69vJ/wAAAAAFDvmp/wAQwW//Asm4/hX/ABPyev//+PPR/wASyhT///Vw8/8ACo8N///bmrEI/wAAAAD//Z6/tAX///7UYf//7Tkl///heAf//+mv1f//8MJ1/wAAAAAI/wAAAAD///ackgX/AHe7w/8AAAAABf8AAAAA/wAJY24F///1cPP/AAAAAP//5QFX/wAWTPL/AAAAAP8AEsoUCP8AAAAA/wIJOCIF/wDLFW///gKI/AX/ACfrZ/8AAAAABf8A2lYz/wJAYRQF/wAAAAD//cV8QwX/AAAAAP//7mTE///ackr//9bo+v//9pyS/wAAAAAI/wAAAAD///ackgX/AP67gv8AAAAABf8AAAAA/wAJY24F///1bbr/AAAAAP//2UNx/wApFwb/AAAAAP8AEZs8CP8AAAAA/wJJxIEF/wAAAAD/ABGbPP8AJryP/wApFwb/AAqSRv8AAAAACP8AAAAA/wAJY24F//8wNaL/AAAAAAX//0VaLf/+JJPUBf//WnhH/wHbbCwF//8+Tf//AAAAAAX///2owf8AAAAA/wAAAAD///fIMv8AAlc//wAAAAAIDvkO/wASwW//ArbyIxX/AAcML///+PPR/wAYp2r///ackv8AEZgD///fIMgI/wAAAAD//azU2AX///7UYf//7Tkl///heAf//+mv1f//8MJ1/wAAAAAI/wAAAAD///ackgX/AHe7w/8AAAAABf8AAAAA/wAJY24F///1cPP/AAAAAP//5QFX/wAWTPL/AAAAAP8AEsoUCP8AAAAA/wIkNssF/wG7u83//alR+QX/ACM2d/8AAAAABf8AAAAA/wKfdW0F/wAAAAD/ABLG2/8AGwHi/wAWUCv/AAqPDv8AAAAACP8AAAAA/wAJY24F//+IQQT/AAAAAAX/AAAAAP//9pySBf8AD0P8/wAAAAD/AB6EwP//6bMO/wABK6D//+017Aj/AAAAAP/+YZ1UBf/+weCF/wHQ3R8F//8t3mL/AAAAAAX///2owf8AAAAA/wAAAAD//+UBV/8AAlc//wAAAAAIDvlh/wK2p37/AW5AYhX/AAAAAP8A0009//9tQlz/AJGOzf//R7Fs/wACVz8I//9FWi3/AAJaeP//ZQqN//9pvET/AAAAAP//NOqRCP8AAAAA//8sssP/AJGOzf//Xy03/wC6pdL///2owQj/ALl9bP///ajB/wCa9XP/AKWEgP8AAAAA/wDLFW8I//4E4Dv/AAXgjxX/AAAAAP8AMUub/wAPQ/z/AQJBmv8AoM+R///+1GEI/wCdTLL///7UYf8ACWNu//8AFab/AAAAAP//yy5NCP8AAAAA///YF9L//+5n/f/+4ryF//9hhHb/AAJaeAj//2BY1v8AASuf///49wr/ARm9ZP8AAAAA/wArbkUIDvj+/wJfG8H/AfsdeBX/AAAAAP8Ap973//9gWNb/ADFLnP//Ukbr/wAAAAAI//8BRH7/AAAAAAX/AAAAAP//9pySBf8ACWNu/wAAAAD/ACWQ7///1uj6/wAAAAD//+5kxAj/AAAAAP/9s+Q/Bf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vtuv8AAAAA///ZQ3H/ACkXBv8AAAAA/wARmzwI/wAAAAD/ANWkfAX/ALJuBf8AAAAA/wDMQQ7/ADYAi/8AAAAA/wCrYdYI//6PZhH/ALFCZhX/AKMqCP8AAAAA/wApE87//6bI/v8AAAAA//+qTxUI/wAAAAD//7vqUP//1uj6//+Euu3//069m/8AAAAACP8AAAAA/wFuQq8FDvlh/wJZ5yz//0QvehX/AHCvlP8AA4YX///+1GH/AH2ZGf///tRh/wAeh/kI/wAAAAD/AASxt///98tr/wAAAAD///7RKP//+05JCP///aWI///489H///ol4///+PcK///q23T///RCGwj//6NGH///zFnt//8t3mP/AE/QXP//jiGT/wAT9bMI/wAdWSH/AAOGF/8AJZDv/wAEsbf/ABBvnP///aWICP8ADhUl/wAAAAAF/wC5ejP///2liP8AmvVz/wClhH//AAAAAP8AyxioCP8AAAAA/wDTTT3//21CXP8AkY7N//9HsWz/AAJXPwj//0VaLf8AAlp4//9lCo3//2m8RP8AAAAA//806pEI/wAAAAD//0xmXP8AaanX//9wyHP/AJGLlP//2BSZCP//4E+g///7Tkn//+Km3///+PPS///vkGT///x9IQj//8HK3///8xZ7///3yDL//8CcB/8AHVXo///lAVcI/wAVJIz//+05Jf8AHoGH/wAOFST/AAEu2P8AGdMKCP8AASuf/wARmzz///MTQv8AC73l///49wr/AAJaeAj/AAzphf8ADOmF/wAZ0wr/AAJXP/8AM6lM///mLPYI/wAlkO///+017P8Au9Fy//+UAiP/AGFu0f8AA4YYCP/+YaCO/wIv8XgV/wAAAAD/ADFLm/8AD0P8/wECQZr/AKDPkf///tRhCP8AnUyy///+1GH/AAljbv//ABWm/wAAAAD//8suTQj/AAAAAP//2BfS///uZ/3//uK8hf//YYR2/wACWngI//9gWNb/AAErn///+PcK/wEZvWT/AAAAAP8AK25FCA75G/8CXxvB/wIG210V/wAAAAD/AKfbv///YFjW/wAjObD//1N1w/8AAAAACP//ABWm/wAAAAAF/wAAAAD///ackgX/AAljbv8AAAAA/wAlkO///9bo+v8AAAAA///uZMQI/wAAAAD//bY7fwX/AAAAAP//7mTE///abxH//9bo+v//9pyS/wAAAAAI/wAAAAD///ackgX/AP67gv8AAAAABf8AAAAA/wAJY24F///1bbr/AAAAAP//2UNx/wApFwb/AAAAAP8AEZs8CP8AAAAA/wDk6HkF/wARmzz/AAAAAP8AEsoT/wAAAAD/ABGbPP8AASuf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Bf//9Xdl/////Mj//+Ypvv8AIgrX///zGbT/ABinaggO+Hv/AaocAf8CyI1eFf8ACpJG/wAAAAD/ABinav///aWI///sCk3//9lDcQj//3H0Ev/+53F0Bf//ip61/wEG81AF///zFnv/AB+zmf8AEsoT/wAa/qn/AA9AxP8AAAAACP8AAAAA/wAJY24F//8Z6+j/AAAAAAX/AAAAAP//9pySBf8ACpJG/wAAAAD/ABinav//4qbf/wAPQMT//+Km3wj/AIgrX//+yhhTBf8AAAAA//7sIysF/wAAAAD//+5kxP//2nJK///W6Pr///ackv8AAAAACP8AAAAA///2nJIF/wD+uEn/AAAAAAX/AAAAAP8ACWNuBf//9XDz/wAAAAD//9lDcf8AOrJC/wAAAAD/AAAAAAj/AAAAAP8BKP4oBf8AnnhR/wEyYZYF/wAKkkb/ABinav8AFSFT/wAQb5z/AA9AxP8AAAAACP8AAAAA/wAJY24F//+ekS//AAAAAAX/AAAAAP//9pySBQ74rP8B7P5y/wC/WHUV///ohDX//3yGWP//xnld///2nJL//yNPVv8AAAAACP8BUOmO/wKfdW0F//4xfVj/AAAAAAX//+PVt///QKh3Bf8AAAAA///6Iqr/ABd4kv///tEo/wADhhf/AAcMLwj/ABd7y/8Ag3mo/wAlkO//AAljbv8A2lYz/wAAAAAI//6vFnL//WCKkwX/AeTPmv8AAAAABf8AHCpJ/wC/V4kF/wAAAzj/AAXdVv//6IQ1/wABK5////x9Iv//+PcKCA74e/8B2Xro/wBJLzkV///9pYj/AAAAAP///ajB///+1GH///7UYf///HnoCP//+05J///vkGT//++QZP//+PPS///x6tv/AAEu2Aj//+05Jf8AAlp4///8een/AA9AxP8AAAAA/wAWTPII///+1GH/AMGyAQX/AAAAAP8A9VgU//6S7Cn//+5kxP8AAAAA//9c0sAI/wAAAAD//+F7QP8AEG+c///YFJn/AC70XP//98gyCP8AJ+gu///489H/ADJ6dP8AHof5///3yDL/ADTRswj//9gX0v8AGdMK/wAT8nr/AECPmP8AIzZ3/wAAAAAI/wAcLYL/AAAAAP8AEZs7///sDYb/AAAAAP//25qwCP8AAAAA//+M9fQF//6khCz//+F7QP8AWTcC//6WckD/AQuoQP8AuqKaCP8ADhUl///ipt//ACIK1///5iz3/wAqQqb/AAAAAAj/ADJ6dP8AAAAA/wBGbO7/ABZM8v8ABwwv/wAtyL0I/wAAAAD/AAOJUP///aWI/wABK5////2owf8AAAAACP//IPTe/wCmsB8V/wABK5///2rrHAX//3V9Yv//1JG7/wAEsbb/AKo2N/8AhKVI/wAWTPIIDvij/wE1Jfr/AeLc9RX//9gX0v8AAAAA///bmrD//+5kxP//49W3///ipt8I///9pYj/AP/qWgX/AAAAAP8AGv6pBf8AAAAA/wAF3Vb///x56f8AAS7Y///8eej///2liAj//8/gBP//4Exn//+6u3j//+rh5v//vRXw///9pYgI///6Iqr///7UYf8AASuf///7Tkn/AASxt////HnpCP8ABeCP///7SxD/ABr+qf//9EVT/wAAAAD//+Ys9wj/AAAAAP/9lDCmBf8AAAAA///9pYj/AAErn////tRh/wACWnj/AAOGFwj/ABGbPP8AGwHi/wAJZqb/ABBsY/8AHCpJ/wAAAAAI/wBEFbD/AAAAAP8AGv6p///W6Pr/AG5YVf8AAS7YCP8AASuf/wAAAAAF/wBgQzH/AAErn/8AXxRZ/wBbkXr/AAAAAP8AlRTkCP8AAAM4/wCsjXX//6DrqP8ARBWw//+fvM//AAAAAAj/ACydH///D1miFf//9W26//+OIZT//9gX0v//nDnx///VvVr/AAOGFwj//+PSfv8AA4YX///tOSX/ACpCpv//+PPS/wA9CYEI///+1GH/AHaQIwX/AAAAAP8AAlp4Bf8ACo8N/wBx3mz/ACa8j/8AWAgq/wAu9F3///tOSgj/ACydHf//+iKq/wARnnX//6IXR///9W26//+M8rsIDvhI/wGR/Vz/AJkCzhX//+wNhv//1uj6///UjoL//+mzDv//2UNx/wACVz8I//+9FfD/AAOGF///xU2//wArbkb//+05Jf8AWmXaCP//6t6t/wBnTCb/ACDfOP8AXxeS/wAsmeX/AAXdVgj/AC70Xf8ABd1W/wAqQqb//8suTf//3MmJ///OsSwI///0Qhv//++QZP8AC73l///GfJb/ADcsKv//9plaCP8AMU7V///3yDL/ABd4kf8AJ+tn/wAAAAD/ACDcAAj/AAAAAP8ASyHe//+4ZDn/AExNfv//oOun/wAAAAAI//+T/ur/AAAAAP//oOun//+splT/AAAAAP//YrNOCP8AAAAA//9+4ND/AGFu0f//nWJY/wBsARb/AAAAAAj/AFpiov8AAAAA/wBP05X/AD0Muv8AEG+c/wBaYqII/////Mj/AAS08P//9W26/wABK5////x9If//+iKqCA74rf8B228g/wAy3w4V/wAAAAD/ApvyjgX/AAAAAP8ABd1W///8een/AAEu2P///Hno///9pYgI///P4AT//+BMZ///urt4///q4eb//70V8P///aWICP//+iKq///+1GH/AAErn///+05J/wAEsbf///x56Qj/AAXdVv//+0sQ/wAbAeL///RFU/8AAAAA///mLPcI/wAAAAD//0jgRQX//+Km3/8AHoTA///bmrH/ABLG2///1uwy/wAAAAAI//+fwAj/AAAAAP//qSA9//+t1Sz/AAAAAP//YFjWCP8AAAAA//9j3u7/AFbfw///q3q0/wBgP/j/AAAAAAj/ACkXBv8AAAAA/wAkYhf/ABLKFP8AHVkh/wAegYcI/wAAAAD//860ZQX/AM1srv8AAAAABf8AAAAA/wAJY24F///2n8v/AAADOP//2m8R/wAXeJL/AAAAAP8AEZs8CP//YYev/wBbkXkV///x6tv//8CcCP//5P4e///VvVr//98kAP8AASufCP//0jdD/wACWnj//+BPoP8AWAgq/wAEsbf/AG5YVQj/AASxt/8AbAEW/wAtyL3/AFbci/8AKkKm///9pYgI/wAYpDH///7UYf8AEZ50///nWJX/AAu95f//2UNxCP8AAAAA//8fzHcFDvhR/wGl8w//APbrhxX/AAAAAP8Ag3mo//+rerX/AFpiov//kaer/wAAAAAI//+T/ur/AAAAAP//oOun//+splT/AAAAAP//YrNOCP8AAAAA//9+4ND/AGFu0f//nWJY/wBsARb/AAAAAAj/AFpiov8AAAAA/wBGcCf/AD0Muv8AEG+c/wBaYqII/wABK5//AAcML///8xZ7///+0Sj///2liP//+iKqCP//7A2G///W6Pr//93x7///6bMO///ZQ3H/AAJXPwj//70V8P8AA4YX///FTb//AC70Xf//7Tkl/wBW38MI///9pYj/AAqPDQX/AQzQpv8AAAAABf8AAAAA/wAIOwcF//9VzQH/ABZM8xX//5nfef8AAAAABf//8xZ7/wBNeR3/ABinav8AVbDr/wAydzv/AAAAAAj/ADAjNf8AAAAA/wArbkb//7TeIv8AAAAA///gT6AI/wAAAAD//+Ys9v//8erb///he0D//9pvEf8AAAAACA74Av8ATwFL/wH20qkV/wAAAAD//98kAAX//8CcCP8AAAAABf//98gy/wAAAAD///7RKP//49J+/wAJZqf/AAAAAAj/AD9j+P8AAAAABf///tRh//55FecF/wAAAAD//+5kxP//2m8R///ohDX///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9W26/wAAAAD//9lDcf8AF3vL/wAAAAD/ABGbPAj/AAErn/8BhuoZBf8AeOqb/wAAAAAF/wAJY27/AAAAAP///tRh/wAcLYL///fIMv8AAAAACP//hxVl/wAAAAAF/wAAAAD/ALATjQX/AAAAAP8AJGVP/wAWTPL/ACpCpv8AKRcG/wAAAAAI/wBAj5j/AAAAAP8AEZs7//+Rp6v//82Ixf//3fUpCP8AAAAA///RC6P/ACa8j///6bMO/wArbkX/AAcMLgj/AC70Xf8ACDfO/wAT9bP/ADOmE/8AAAAA/wAu9F0I/wAAAAD/AMU04P/+bVs6/wASxtv/AAAAAP/+rerSCA74Zv8AsMNi/wBzcd8V///MWe3/AAzphf//5P4e/wAHDC//ABP1s/8AGKQxCP8AIN84///uZMT/ACa8j///9pyS/wApFwb/AAAAAAj/AHMKDP8AAAAA/wBcvRr/AEsh3v8AAAAA/wBfFFkI/wAAAAD/AE15Hf//wcrf/wBBvnD//6pL3P8AFSFTCP8AGKdq/wAg3zj/ACpCpv//75Bk/wAIN87//9gX0Qj/AA4YXf//2UNx/wBHm8f/ADAf/P//7ApN/wA3LCsI///tOSX/ADYAi///mwsY///3yDL//9lDcf//rKZUCP//8erb/wACWnj///Hno/8AASuf///x6tz/AAAAAAj//4z19P8AAAAA//+jQub//7Oygv8AAAAA//+g6G8I/wAAAAD//8Z8lv8AIgrX///MVrT/ADYAjP//4XtACP//8xZ7/wAHDC8F///C9n///9gUmf//+05J//+M9fT/AHVhS///3yQACP8ARnAn///sCk3/AJZAg/8AASuf/wAAAAD//6pPFQj/AAAAAP//zFnt///HpP3//+T+Hv//xnyW/wAAAAAI//+03iL/AAAAAP//wvZ//wBAj5j/ADX9Uv8APQmBCP8AAAAA/wAVIVP//+Ys9v8AIN84///cyYn/AAJXPwj//8Z5Xv8AA4YX///tOST//9SRu/8AASug///he0AI/wAAAAD//7vqUP8ARUFP//+yhuP/AI4L7v8AAAAACP8Ae0Ha/wAAAAD/AEsh3v8AVtyL/wAAAAD/AGT06Aj/AAAAAP8Ak+x9//9NjsP///aZWv//o0Ln/wAXe8sI/wA2AIr/AUeC6BX/ACWQ7/8AAAAA/wAfsGD//8LzRv8AAAAA//+xW0QI/wAAAAD//7FbRP//4Exn///EHub//9pySv8AAAAACP//2m8R/wAAAAD//+BPoP8AO93h/wAAAAD/AE6n9gj/AAAAAP8ATqf2/wAfsGD/AD0Jgf8AJZDv/wAAAAAIDvjW/wIEbg//ADLfDhX/AAAAAP8BEYWWBf8AAAAA/wDBsgH//3alyf8AEZs8//9gXA///2Y2LQj/AAAAAP8BSd1gBf8AAAAA/wAF3Vb///x56f8AAS7Y///8eej///2liAj//8/cy///4Exn//+4ZDn//+05Jf//v3Bo///7TkoI///6Iqr///7UYf8AASuf///7SxD/AASxt////HnoCP8ABd1W///7Tkn/ABsB4v//9EIb/wAAAAD//+Ys9wj/AAAAAP/90TooBf8AAAAA///uZMT//9pvEf//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ABd7y/8AAAAA/wARmzwI/wAAAAD/ASRPqgX/ACpCpv8ANgCL/wBgP/j/ADcsK/8AAAAA//+ADG8I/wAAAAD//u56agX/AAAAAP//7mTE///abxH//+iENf//9pyS/wAAAAAI/wAAAAD///ackgX/AP67gv8AAAAABf8AAAAA/wAJY24F///1cPP/AAADOP//2UNx/wAXeJL/AAAAAP8AEZs8CA73sf8AgbLN/wHw9VIV/wAyenT/AAAAAP8AJ+tn/wAn6C7/AAAAAP8AMn2tCP8AAAAA/wAyenT//9gX0v8AKRPN///NglP/AAAAAAj//82FjP8AAAAA///W7DP//9bo+v8AAAAA///NiMUI/wAAAAD//82CVP8AKRcG///YF9H/ADJ3O/8AAAAACP8AXL0Z//5B6bwV/wAAAAD/AA4YXf8AAAAA/wFtE9f/AAAAAP8AGwHiCP8AAAAA/wAbAeIF/wAAAAD/AAXdVv///Hnp/wABLtj///x56P///aWICP//z9zL///gTGf//7hkOf//7Tkl//+/cGj///tOSgj///oiqv///tEo/wABK5////tOSv8ABLG3///8eegI/wAF3Vb///tOSf8AGwHi///0Qhv/AAAAAP//5iz3CP8AAAAA//609wAF/wAAAAD//+5kxP//2m8R///ohDX///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9XQs/wAAAAD//9lAOf8AF3iS/wAAAAD/ABGbOwgO95f/AM9E1f8B6L2EFf//z+AE///gTGf//7hkOf//7Tkl//+/bS////tOSgj///oiqv///tEo/wABK5////tOSv8ABLG3///8eegI/wAF3Vb///tOSf8AGwHi///0Qhv/AAAAAP//5iz3CP8AAAAA//6CfI0F/wAAAAD//8CcCP//5P4e///GfJb//9NmG///25qwCP///aWI///9pYj///7UYf//7mTE/wADhhf/AAAAAAj/AIEiaf8AAAAA/wBk8a//AFW0JP8AAAAA/wBbjkII/wAAAAD/AA4YXf8AAAAA/wGfjkv/AAAAAP8AGwHiCP8AAAAA/wAbAeIF/wAAAAD/AAXaHf///H0h/wABK6D///x56f///ajBCP//qk8V/wAIN84V/wAyenT/AAAAAP8AJ+gu/wAn6C7/AAAAAP8AMn2tCP8AAAAA/wAyenT//9gX0v8AKRPN///NhYz/AAAAAAj//82FjP8AAAAA///W6Pr//9bo+v8AAAAA///NiMUI/wAAAAD//82CVP8AKRcG///YF9H/ADJ6dP8AAAAACA740f8B/V6n/wBEfYIV//84cKj/AQScEQX/AB+zmf8AKRcGBf8ALvRd/wAwH/z/ADvd4f8AKkKm/wAT9bP/AAAAAAj/AAAAAP8ACWanBf//TsDU/wAAAAAF/wAAAAD///aZWQX/AAqPDf8AASuf/wAu9F3//9pvEf//1b1a///KAq4I//+pI3X//49NMwX/AAAAAP8B1rc9Bf8AAAAA/wAF4I////x56f8AASug///8eej///2liAj//8/cy///4E+g//+4ZDn//+017P//v3Bo///7TkoI///6Iqr///7UYf8AASuf///7Tkn/AASxt////HnpCP8ABd1W///7Tkn/ABsB4v//9EIb/wAAAAD//+Ys9wj/AAAAAP/90mXHBf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ACkXBv8AAAAA/wARmzwI/wAAAAD/AI83jQX/AA9AxP8AE/J6Bf8AdDWs//9c1fgF/wAcLYL//+Km3///6a/V///ipt////ackv8AAAAACP8AAAAA///2nJIF/wDhYmH/AAAAAAX/AAAAAP8ACWNuBf//+PcK/wAAAzj//+Ys9v8AF3iS///heAf/ACM5sAgO967/ANtv5v8AMt8OFf8AAAAA/wAOGF3/AAAAAP8CV9ze/wAAAAD/ABr+qQj/AAAAAP8AGv6pBf8AAAAA/wAF3Vb///x56f8AAS7Y///8eej///2liAj//8/cy///4Exn//+4ZDn//+05Jf//v3Bo///7TkoI///6Iqr///7UYf8AASuf///7Tkn/AASxt////HnpCP8ABd1W///7SxD/ABsB4v//9EVT/wAAAAD//+Ys9wj/AAAAAP/9yjEyBf8AAAAA///uZMT//9pvEf//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vw8/8AAAAA///ZQ3H/ABd4kv8AAAAA/wARmzsIDvoB/wMvQJf/ADLfDhX/AAAAAP8BEYWWBf8AAAAA/wDBsgH//3Mi6v8AD0DE//9gWNb//2Y5ZQj//+dYlv8AjN0W//+Dkob///7UYf//cMhz//92qQII/wAAAAD/AA4YXf8AAAAA/wAiB5//AAAAAP8AGwHiCP8AAAAA/wAbAeIF/wAAAAD/AAXdVv///Hnp/wABLtj///x56P///aWICP//z9zL///gTGf//7hkOf//7Tkl//+/cGj///tOSgj///oiqv///tEo/wABK5////tOSv8ABLG3///8eegI/wAF3Vb///tOSf8AGwHi///0Qhv/AAAAAP//5iz3CP8AAAAA//609wAF/wAAAAD//+5kxP//2m8R///ohDX///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9XDz/wAAAAD//9lDcf8AF3vL/wAAAAD/ABGbPAj/AAAAAP8BJEk5Bf8AKkKm/wA2AIv/AGA/+P8ANywr/wAAAAD//4AMbwj/AAAAAP/+7npqBf8AAAAA///uZMT//9pvEf//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/r67/wAAAAAF/wAAAAD/AAljbgX///Vtuv8AAAAA///ZQ3H/ABd7y/8AAAAA/wARmzwI/wAAAAD/ASV4EAX/ACo/bf8ANNTs/wBfF5H/ADX9Uv8AAAAA//+BO0gI/wAAAAD//u56agX/AAAAAP//7mTE///ackr//+iENf//9pyS/wAAAAAI/wAAAAD///ackgX/AP64Sf8AAAAABf8AAAAA/wAJY24F///1cPP/AAADOP//2UNx/wAXeJL/AAAAAP8AEZs8CA742f8CB3Lj/wAy3w4V/wAAAAD/ARGFlgX/AAAAAP8AwbIB//92qQL/ABGbPP//YFWe//9mNi0I/wAAAAD/AA4YXf8AAAAA/wAiB5//AAAAAP8AGwHiCP8AAAAA/wAbAeIF/wAAAAD/AAXdVv///H0h/wABLtj///x2sP///aWICP//z+AE///gTGf//7hkOf//7Tkl//+/bS////tOSgj///oiqv///tEo/wABK5////tOSv8ABLG3///8eegI/wAF4I////tOSf8AGv6p///0Qhv/AAAAAP//5iz3CP8AAAAA//609wAF/wAAAAD//+5kxP//2m8R///ohDX///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9W26/wAAAAD//9lDcf8AF3vL/wAAAAD/ABGbPAj/AAAAAP8BJExxBf8AKkKm/wA2AIv/AGBDMf8ANywr/wAAAAD//4AMbwj/AAAAAP/+7npqBf8AAAAA///uZMT//9pySv//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///V0LP8AAAM4///ZQDn/ABd4kv8AAAAA/wARmzwIDviY/wEAxc//AeU3bRX//4AMb/8AAAAA//+VLcL//5P+6v8AAAAA//96LxkI/wAAAAD//3ovGf8AatI+//+T/ur/AH/zkf8AAAAACP8Agk4J/wAAAAD/AGmmnv8AbAEW/wAAAAD/AIXQ5wj/AAAAAP8AhdDn//+WXJr/AGwBFv//fa6//wAAAAAI/wAAAAD//jrgxhX//9EO3P8AAAAA///YFJn/AF8UWf8AAAAA/wB0OOQI/wAAAAD/AHQ45P8AJ+tn/wBfFFn/AC7xJP8AAAAACP8AMB/8/wAAAAD/ACfrZ///oOun/wAAAAD//4vHHAj/AAADOP//i8cc///YFJr//6Drp///z9zL/wAAAAAIDvio/wFBQ8H/AeZjDRX//9bo+v8AAAAA///bnen//+017P//4qbf///hfnkI/wAAAAD/AAcML/8AAAAA/wAF3Vb/AAAAAP8ABwj2CP8AAAAA/wAbAeIF/wAAAAD/AAXdVv///H0h/wABLtj///x2sP///aWICP//z+AE///gTGf//7hkOf//7Tkl//+/bS////tOSgj///oiqv///tEo/wABK5////tOSv8ABLG3///8eegI/wAF4I////tOSf8AGv6p///0Qhv/AAAAAP//5iz3CP8AAAAA//3KMTIF/wAAAAD//+5kxP//2m8R///ohDX///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9W26/wAAAAD//9lDcf8AF3vL/wAAAAD/ABGbPAj/AAAAAP8A7SBHBf8AHVkh///he0D/ACRlT///7Tkl/wApE87/AAAAAAj/AGBDMf8AAAAA/wBW38T/AFIq1P8AAAAA/wCfpyoI/wAAAzj/AJwd2f//qSA9/wBUhUv//5+8z/8AAAAACP8AJ+to//8RtBkV///489H//5P+6v//1JG7//+pI3X//9W9Wv8AAlc/CP//51iW/wABK5///+5n/f8AGKdr///0PuL/ACa8jwj/AAAAAP8A4Dn7Bf8ADhhd/wA/Y/j/ABr+qf8AKkKm/wAg3zj///7UYQj/AC3FhP///aWI/wAfs5n//6f0nf//+05J//+Rp6sIDvij/wIDgVH//1BRDRX///oiqv8ABLG3///lAVf/AAu95f8AAAAA/wAZ0wkI/wAAAAD/AmvPWgX/AAAAAP8AAlp4///+0Sj/AAErn////ajB///8eekI///uZMT//+T+Hv//9pla///vk53//+PVt/8AAAAACP//u+pQ/wAAAAD//+T+Hv8AKRcG//+RquP///7RKAj///7RKP8AAAAABf//n8AI///+1GH//6Dob///pG6G/wAAAAD//2rrHAj/AAAAAP//U3KL/wBfF5H//7vnF/8AYD/4/wAAAAAI/wAn62f/AAAAAP8AJGIX/wARmzz/ABwtgf8AHVkhCP8AAlp4//8AGN4F/wAAAAD//+UBVwX/AAAAAP//+iKq/wADhhf///7RKP8AA4YY/wACWngI/wAwH/z/AB+wYP8ARUSI/wAVIVP/AELqEP8AAlp4CP8ABdod/wABK5////7RKP8ABLG3///7Tkn/AAOGFwj//z0lmP8Bjx6wFf//9W26//+OIZT//9lDcf//p/fW///RC6T/AASxtgj//9NmG/8ABLG3///uZMT/AF8UWP8ACo8O/wBzCgwI/wAKjw3/AHHebP8AJ+tn/wBjyUj/ACo/bf///HnpCP8AHC2C///9pYj/ABLG2///1JG7/wAHDC7//8QiHwj/AAEu2P//iEQ9BQ74TP8BqrD1/wG2QxAV///k/h7/AEjHZv//iEd2///0Qhv//8Z5Xv//o0LnCP8AAAAA/wAPQMT/AAAAAP8AEsoT/wAAAAD/ABBvnAj/AAAAAP8AGwHiBf8AAAAA/wAF3Vb///x9If8AAS7Y///8drD///2liAj//8/gBP//4Exn//+4ZDn//+05Jf//v20v///7TkoI///6Iqr///7RKP8AASuf///7Tkr/AASxt////HnoCP8ABeCP///7Tkn/ABr+qf//9EIb/wAAAAD//+Ys9wj/AAAAAP/+tPcABf8AAAAA///uZMT//9pvEf//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vtuv8AAAAA///ZQ3H/ABd7y/8AAAAA/wARmzwI/wAAAAD/AT4iswX/ACDfOP8AOYNq/wBIyp////C/PP8ADOZM///GeV4I/wARnnT//82FjP8AXxRZ/wA/Y/j//+UBV/8AR5vHCA74Hv8A5xVv/wEs6NoV///P4AT/ACDfOP//x6T9/wAWTPL///7UYf8AJ+tnCP///tEo/wAfsGD/ACM5sP8AEG+c/wAqP23/AAAAAAj/AEZwJ/8AAAAA/wA6skL//8CcCP8AAAAA///I09UI/wAKkkb/AAAAAAX/AAAAAP8AeOdiBf//+PPR/wAAAAAF///7Tkn///ackv///aWI///7SxD///j3Cv8AAAAACP//9D7i/wAAAAD//9gbC/8ALJ0d//+6u3j/AAAAAAj//5nisf8AAAAA//+6u3n//8Z5Xv8AAAAA//+yhuMI/wAAAAD//7FYCv8ANNGz///YF9L/ADvhGv//3fUpCP8AOFfK///gTGf/AD44Wf//5iz3/wAAAAD//9W9Wgj/AAAAAP//3MmJ///W6Pr//+UBV///02Lj/wAAAAAI///OsSv/AAAAAP//xCIf/wAT8nr///MWe/8ARBjpCP//8xm0/wAAAAAF/wACWnj//4hEPQX/AAqPDf8AAAAABf8ABeCP/wAOFSX/AASxt/8ACDfO/wAKkkb/AAAAAAj/ABGYA/8AAAAA/wAdWSH//+05Jf8AO+Ea/wAAAAAI/wBcueH/AAAAAP8AXxeR/wAZ0wr/AAAAAP8AWmKiCP8AAAAA/wBhcgn//70V8P8AJ+gu//+6u3n/ADAf/AgO99r/ATUtIP8B1fapFf//qSA9/wAAAAAF/wAAAAD/AJwd2QX/AAAAAP8ABd1W///7Tkn/AAJaeP///aWI///8eekI//+5j9n//5Utwv//nWWQ///W6Pr///C8BP//9pySCP//6Idu///zFnv///x56f//8eej/wAa/qn/AAAAAAj/AAqSRv///tRh/wAWTPL/AAJXP/8AAAAA///mLPcI/wABK5///p/VrgX/AAAAAP//2BfS/wA6skL//9I3Q/8AOFsD/wAAAAAI/wBC5tf/AAAAAP8AOYnb/wAYpDH/AAcI9v8AOrV6CP8AAAAA/wADhhf///2liP8AASug///9qMH/AAAAAAj///2owf8AAAAA///9pYj///7UYf///tEo///8eegI///489H//+wKTf//9XDz///zFnv//+mv1f//+05JCP//6t6t///9pYj//++Tnf8ADhhd/wAAAAD/ABwqSQj///7RKP8BdCAGBf8AVt/D/wAAAAAF/wAIN87/AAADOP///tRh/wAcLYL///j3Cv8AAAAACA74yv8CHjVe/wBCIwsV///6H3H/AASxt///5QFX/wALveX/AAAAAP8AGdMJCP8AAAAA/wF3ph0F/wAAAAD/AAXdVv///H0h/wABLtj///x2sP///aWICP//0Quj///gTGf//7c4mv//7Tkl//+/bS////tOSgj///oiqv///tEo/wABK5////tOSv8ABLG3///8eegI/wAF4I////tOSf8AGv6p///0Qhv/AAAAAP//5iz3CP8AAAAA//8VOjEF///VvVr//8n/df//n7zP///I09X/AAAAAP8Af/ORCP8AAAAA/wE+IrMF/wAAAAD/AAXdVv///Hnp/wABLtj///x56P///aWICP//0Quj///gTGf//7c1Yf//7Tkl//+/cGj///tOSgj///ofcf///tEo/wABLtj///tOSv8ABLG3///8eegI/wAF3Vb///tOSf8AGv6p///0Qhv/AAAAAP//5iz3CP8AAAAA//8oAQ0F/wAAAAD//z5N//8AiVb+///uZMT/AJ+qYv8AmcnTCP8AAAAA//+Z3EAF/wAAAAD///oiqv8AA4Lf///+0Sj/AAOJUP8AAlp4CP8AMB/8/wAfs5n/AEebx/8AEsbb/wBAktH/AASxtgj/AAXgj/8AAS7Y///+1GH/AASxtv//+05J/wADhhgIDvh8/wFD0TH/AdOcMRX/AAAAAP//9pySBf8ACpJG/wAAAAD/AD0GSP//5iz2///q4eb//79waAj//6ymVP//Hp2fBf//49W3/wBUhUv//8n/df8Arufu/wAAAAD/AAAAAAj///Vw8/8AGdMK/wAwH/z/ACDfOP8ACWNu/wAAAAAI/wAAAAD/AAlmpwX//wFEfv8AAAAABf8AAAAA///2mVkF/wAKkkb/AAAAAP8AGdMJ///d9Sn/AAzphf//51iVCP8AlRTk//5uhtkF/wAQb5z/AAAAAP8ADOmF/wAAAAD/AAljbv8AAAAACP8AJGVP/wAAAAAF/wACWnj/AAqPDQX/AISogP8BZNwKBf8AGv6p/wBC6hD/AB6EwP8AFkzy/wAT9bP/AAAAAAj/AAAAAP8ACWNuBQ75p/8CbyaY/wHUx9EV/wAAAAD///ackgX/AAqSRv8AAAAA/wA9Bkj//+Ys9v//6uHm//+/cGgI//+sqYz//x/JPwX//+Ypvv8AVIVL///NiMX/AK28Tv8AAAAA/wAAAAAI///1bbr/ABnTCv8AMCM1/wAg3zj/AAljbv8AAAAA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Xf8AR5vH/wA5hqL/AAAAAAj/ACM5sP8AAAAA/wAT8nr//79waP//2BfS///mKb4I///3yDL//8suTf8AMnc7///hez//ACfrZv8ABwwvCP8ALvRd/wAIN87/ABBvnP8AJ+gu/wAAAAD/AB6H+Qj/AAADOP8AoyoI//6RvVH/ABP1s/8AAAAA//8Kp+wI/wAAAAD//6bI/v8ATXkd//9zIur/AMsVb/8AAAAACP8A4DbB/wAAAAD/AJ54Uf8Ajgvu/wAAAAD/AJK6bAj/AAAAAP8AjN0W//+VLcL/AEefAP//eQBB/wAa+3AI//9zIur/AAzphRX/AAAAAP8BHm8bBf8Ab4P1///+1GH/ACpF3///uY/Z/wAAAAD//8xdJQj/AAAAAP//v2n2///cxlD//6Wgl///iW/d///3xPkI/wNzsRP//rh9GBX///2liP8AAAAA///9qMH///7RKP///tEo///8fSEI///7Tkn//++QZP//75Bk///49wr///Hq2/8AASugCP//7Tkl/wACWnj///x56f8AD0DE/wAAAAD/ABZQKwj///7UYf8AwbIBBf8AAAAA/wD1WBT//pLo8P//7mTE/wAAAAD//1zSwAj/AAAAAP//4XtA/wAQb5z//9gUmf8ALvRc///3y2sI/wAn62f///jz0f8AMnp0/wAehMH///fE+f8ANNGzCP//2BfS/wAZ1kL/ABPyev8AQI+Y/wAjObD/AAAAAAj/ABwqSf8AAAAA/wARnnT//+wKTf8AAAAA///bmrEI/wAAAAD//4z19AX//qSHZP//4XgH/wBZNwL//pZyQP8BC6UH/wC6pdMI/wAOFSX//+Km3/8AIgrX///mLPf/ACpF3/8AAAAACP8AMnp0/wAAAAD/AEZs7v8AFkzy/wAHDC//AC3IvQj/AAAAAP8AA4Lf///9pYj/AAEu2P///ajB/wAAAAAI//8g9N7/AKawHRX/AAErn///auscBf//dX1i///Ukbv/AASxtv8AqjY3/wCEpUj/ABZM8gj/AmYLyf//qSN1Ff//7ApN///W6Pr//9SRu///6bMO///ZQ3H/AAJXPwj//70ZKf8AA4YX///FTb7/ACtuRv//7TXt/wBaZdoI///q23T/AGdMJv8AIOJx/wBfF5L/ACyZ5f8ABd1WCP8ALvRd/wAF3Vb/AB6EwP//pZol///Hq2///++TnQj//++NK///+05J///x6tv//63VLP8AQb5x///ipt8I/wBFRIj//+F4B/8ARUFP/wA2AIz/AAAAAP8ATqf1CP8AAAAA/wBSKtT//6t6tf8ARUFP//+g66f/AAAAAAj//5QCI/8AAAAA//+g6G///6ypjP8AAAAA//9is08I/wAAAAD//37dl/8AYW7R//+dZZH/AGv93f8AAAAACP8AWmXb/wAAAAD/AE/QXP8APQmB/wAQb5z/AFpiogj////8yP8ABLTw///1bbr/AAEu2P///H0h///6H3AI/wIRg0P//6t6thX//zhz4v8BBJwRBf8AH7OZ/wApFwYF/wAu8ST/ADAf/P8AO+Ea/wAqQqb/ABPyev8AAAAACP8AAAAA/wAJY24F//9OwNT/AAAAAAX/AAAAAP//9pySBf8ACo8N/wABLtj/AC70Xf//2mvY///VvVr//8oCrgj//6kjdf//j00zBf8AAAAA/wHWtz0F/wAAAAD/AAXgj////H0h/wABK6D///x2sP///ajBCP//z+AE///gTGf//7hhAP//7Tkl//+/cGj///tOSgj///oiqv///tRh/wABK5////tOSf8ABLG3///8eekI/wAF4I////tOSf8AGv6p///0Qhv/AAAAAP//5iz3CP8AAAAA//3SZccF/wAAAAD//+5kxP//2m8R///W6Pr///ackv8AAAAACP8AAAAA///2nJIF/wD+u4L/AAAAAAX/AAAAAP8ACWNuBf//9W26/wAAAAD//9lDcf8AKRcG/wAAAAD/ABGbPAj/AAAAAP8AjzeNBf8AD0P8/wAT9bMF/wB0Naz//1zSvwX/ABwqSf//4qbf///psw7//+Km3///9pyS/wAAAAAI/wAAAAD///ackgX/AOFiYf8AAAAABf8AAAAA/wAJY24F///49wr/AAAAAP//5iz2/wAXeJL//+F4B/8AIzmwCP8BKkBV/wDobo8V///P3Mv/ACDfOP//x6g2/wAWTPL///7RKP8AJ+tnCP///tRh/wAfs5n/ACM2d/8AEGxj/wAqQqb/AAAAAAj/AEZwJ/8AAAAA/wA6rwn//8CcCP8AAAAA///I09UI/wAKkkb/AAAAAAX/AAAAAP8AeOdiBf//+PPR/wAAAAAF///7Tkn///ackv///aWI///7Tkn///j3Cv8AAAAACP//9EIb/wAAAAD//9gX0v8ALJ0d//+6vrH/AAAAAAj//5nfef8AAAAA//+6u3j//8Z5Xv8AAAAA//+yg6oI/wAAAAD//931Kf8ACpJG///k/h7/ABBvnP//6bZGCP8ASMdm/wAn6C7/AGKdqf//yf91///ZQ3H//68AzAj/ACa8j///6tt0/wAg3AD//+m2R/8AAAAA///heAcI/wAAAAD//98kAP//6Idu///W6Pr//8LzR/8AAAAACP//sVgK/wADgt///+rerf8APjuS///9qMH/AA9AxAj///ofcf8AIzmw/wAPQ/z/ACkTzv8AJGVP///YF9EI/wAmvI////x9If8AGKdq/wAsmeX///j3Cv8AH7BgCP//9pyS/wArbkX//8Z5Xf8AC8Ee///cyYn///MTQgj//8HK3///5im+///tMrP//7Asa/8AE/Wz///NiMUI/wAQb5z//82FjP8AMCM1///J/3X/AGKacP8AAAAACP8ABLG3/wAAAAAF/wBcvRn/AAAAAP8AXxRZ/wAlkO//AAAAAP8AWmXaCP8AAAAA/wBhbtH//70V8P8AJ+tm//+6vrH/ADAf/Aj/AYH39P//BfY3Ff8AAAAA/wAOGF3/AAAAAP8CV9mm/wAAAAD/ABr+qQj/AAAAAP8AGv6pBf8AAAAA/wAF3Vb///x9If8AAS7Y///8drD///2liAj//8/gBP//4Exn//+4ZDn//+05Jf//v3Bo///7TkoI///6H3H///7UYf8AAS7Y///7Tkn/AASxt////HnpCP8ABd1W///7SxD/ABr+qf//9EVT/wAAAAD//+Ys9wj/AAAAAP/9yjEyBf8AAAAA///uZMT//9pySv//6IQ1///2mVn/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///V0LP8AAAAA///ZQDn/ABd4kv8AAAAA/wARnnQI/wIgee//ABZM8RX///2liP8AAAAA///9qMH///7RKP///tRh///8fSEI///7Tkn//++QZP//740r///49wr///Hq3P8AASugCP//7Tkl/wACWnj///x56f8AD0DE/wAAAAD/ABZQKwj///7UYf8AwbIBBf8AAAAA/wD1WBT//pLo8P//7mTE/wAAAAD//1zSwAj/AAAAAP//4XtA/wAQctX//9gUmf8ALvEk///3y2sI/wAn62f///jz0f8AMnp0/wAehMH///fE+f8ANNGzCP//2BfS/wAZ1kL/ABP1s/8AQI+Y/wAjNnf/AAAAAAj/ABwqSf8AAAAA/wARnnT//+wKTf8AAAAA///bmrEI/wAAAAD//4z19AX//qSKnf//4XgH/wBZM8n//pZyQP8BC6UH/wC6pdMI/wAOFSX//+Km3/8AIgrX///mLPf/ACpF3/8AAAAACP8AMnp0/wAAAAD/AEZs7v8AFkzy/wAHDC//AC3IvQj/AAAAAP8AA4Lf///9qMH/AAEu2P///aWI/wAAAAAI//8g9N7/AKawHRX/AAEu2P//auscBf//dXop///Ukbv/AASxt/8AqjY3/wCEpUf/ABZM8gj/Ac6ZNf8APQy6Ff//z+AE/wAg3zj//8ek/f8AFkzy///+1GH/ACfrZwj///7RKP8AH7OZ/wAjObD/ABBsY/8AKj9t/wAAAAAI/wBGcCf/AAAAAP8AOrJC///AnAj/AAAAAP//yNPVCP8ACpJG/wAAAAAF/wAAAAD/AHjnYgX///jz0f8AAAAABf//+05J///2nJL///2liP//+05J///49wr/AAAAAAj///Q+4v8AAAAA///YGwv/ACydHf//urt4/wAAAAAI//+Z4rH/AAAAAP//urt5///GeV7/AAAAAP//soOqCP8AAAAA//+xW0T/ADTRs///2BSZ/wA74Rr//931KQj/ADhXyv//4Exn/wA+OFn//+YwL/8AAAAA///VuiEI/wAAAAD//9zJif//1uj6///lAVf//9Ni4/8AAAAACP//zrEr/wAAAAD//8QiH/8AE/Wz///zFnv/AEQVsAj///MZtP8AAAAABf8AAlp4//+IQQQF/wAKjw3/AAAAAAX/AAXgj/8ADhUl/wAEsbf/AAg3zv8ACpJG/wAAAAAI/wARmAP/AAAAAP8AHVkh///tNez/ADvhGv8AAAAACP8AXLnh/wAAAAD/AF8Xkf8AGdZC/wAAAAD/AFpiogj/AAAAAP8AYXIJ//+9FfD/ACfrZ///urt5/wAwH/wI/wMtnln//r+GDxX//9gUmf8ABwwv///NhYz//+F7P/8ACDsH///LLk0I/wAn6C7//+Ypvv//7ApN//+/cGj//9zJif8AAAAACP//49W3/wAAAAD//+5hjP8AE/Wz/wAAAAD/ACRlTwj/AAAAAP8BxkrZBf8AAAAA/wDBsgH//3apAv8AEZgD//9gVZ7//2Y5Zgj/AAAAAP8BSd1gBf8AAAAA/wAF3Vb///x9If8AAS7Y///8drD///2liAj//8/gBP//4Exn//+4ZDn//+05Jf//v20v///7TkoI///6Iqr///7UYf8AASuf///7SxD/AASxt////HnoCP8ABeCP///7Tkn/ABr+qf//9EIb/wAAAAD//+YwLwj/AAAAAP/90TooBf8AAAAA///uZMT//9pvEf//6IQ1///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vtuv8AAAAA///ZQ3H/ABd4kv8AAAAA/wARnnQI/wAAAAD/ASRMcQX/ACpCpv8ANgCL/wBgQzH/ADcsK/8AAAAA//+ADG8I/wAAAAD//pn1HwX/AAAAAP//Cqfs/wFtFxD/ABGbPP8AAAAA/wCjLUAI/wAAAzj/AB6EwP//740r/wAn62f//9EO3P8ACDSVCA4cEab/AdFrof8BgmetFf8AW45B/wAZ1kL/AEQY6f8ANf1S/wAAAAD/AF3r8gj/AAAAAP8AaHfG//+VLcL/ADhXyv//b5zT/wAAAAAI//8BRH7/AAAAAAX/AAAAAP//9pySBf8ACWNu/wAAAAD/ACWQ7///1uj6/wAAAAD//+5kxAj/AAAAAP/+kJTqBf8AM6YT/wARmzz/ADvd4f///ajB/wAu9F3//+5hjAj/AAAAAP8AU1msBf8ADhUl/wAAAAAF/wCpDdD/AAAAAP8AIzM+//+Euu3/AAAAAP//ohdHCP8AAAAA//+pI3X//9I3Q///UkOy//9Tb1L/AAAAAAj//37g0P8ABd1W///MXSX/AIN5qP8AAShn/wA/Y/gI/wAAAAD/AAErnwX/AAAAAP8ATE1+/wAu9F3/AEebx/8AOYai/wAAAAAI/wAjObD/AAAAAP8AE/J6//+/cGj//9gX0v//5im+CP//98gy///LLk3/ADJ3O///4Xs//wAn62b/AAcMLwj/AC70Xf8ACDfO/wAQb5z/ACfoLv8AAAAA/wAeh/kI/wAAAzj/AKMqCP/+kb1R/wAT9bP/AAAAAP//CqfsCP8AAAAA//+myP7/AE15Hf//cyLq/wDLFW//AAAAAAj/AOA2wf8AAAAA/wCeeFH/AI4L7v8AAAAA/wCSumwI/wAAAAD/AIzdFv//lS3C/wBHnwD//3kAQf8AGvtwCP//cyLq/wAM6YUV/wAAAAD/AR5vGwX/AG+D9f///tRh/wAqRd///7mP2f8AAAAA///MXSUI/wAAAAD//79p9v//3MZQ//+loJf//4lv3f//98T5CP8Dc7ET//64fRgV///9pYj/AAAAAP///ajB///+0Sj///7RKP///H0hCP//+05J///vkGT//++QZP//+PcK///x6tv/AAEroAj//+05Jf8AAlp4///8een/AA9AxP8AAAAA/wAWUCsI///+1GH/AMGyAQX/AAAAAP8A9VgU//6S6PD//+5kxP8AAAAA//9c0sAI/wAAAAD//+F7QP8AEG+c///YFJn/AC70XP//98trCP8AJ+tn///489H/ADJ6dP8AHoTB///3xPn/ADTRswj//9gX0v8AGdZC/wAT8nr/AECPmP8AIzmw/wAAAAAI/wAcKkn/AAAAAP8AEZ50///sCk3/AAAAAP//25qxCP8AAAAA//+M9fQF//6kh2T//+F4B/8AWTcC//6WckD/AQulB/8AuqXTCP8ADhUl///ipt//ACIK1///5iz3/wAqRd//AAAAAAj/ADJ6dP8AAAAA/wBGbO7/ABZM8v8ABwwv/wAtyL0I/wAAAAD/AAOC3////aWI/wABLtj///2owf8AAAAACP//IPTe/wCmsB0V/wABK5///2rrHAX//3V9Yv//1JG7/wAEsbb/AKo2N/8AhKVI/wAWTPII/wJmC8n//6kjdRX//+wKTf//1uj6///Ukbv//+mzDv//2UNx/wACVz8I//+9GSn/AAOGF///xU2+/wArbkb//+017f8AWmXaCP//6tt0/wBnTCb/ACDicf8AXxeS/wAsmeX/AAXdVgj/AC70Xf8ABd1W/wAehMD//6WaJf//x6tv///vk50I///vjSv///tOSf//8erb//+t1Sz/AEG+cf//4qbfCP8ARUSI///heAf/AEVBT/8ANgCM/wAAAAD/AE6n9Qj/AAAAAP8AUirU//+rerX/AEVBT///oOun/wAAAAAI//+UAiP/AAAAAP//oOhv//+sqYz/AAAAAP//YrNPCP8AAAAA//9+3Zf/AGFu0f//nWWR/wBr/d3/AAAAAAj/AFpl2/8AAAAA/wBP0Fz/AD0Jgf8AEG+c/wBaYqII/////Mj/AAS08P//9W26/wABLtj///x9If//+h9wCP8CEYND//+rerYV//84c+L/AQScEQX/AB+zmf8AKRcGBf8ALvEk/wAwH/z/ADvhGv8AKkKm/wAT8nr/AAAAAAj/AAAAAP8ACWNuBf//TsDU/wAAAAAF/wAAAAD///ackgX/AAqPDf8AAS7Y/wAu9F3//9pr2P//1b1a///KAq4I//+pI3X//49NMwX/AAAAAP8B1rc9Bf8AAAAA/wAF4I////x9If8AASug///8drD///2owQj//8/gBP//4Exn//+4YQD//+05Jf//v3Bo///7TkoI///6Iqr///7UYf8AASuf///7Tkn/AASxt////HnpCP8ABeCP///7Tkn/ABr+qf//9EIb/wAAAAD//+Ys9wj/AAAAAP/90mXHBf8AAAAA///uZMT//9pvEf//1uj6///2nJL/AAAAAAj/AAAAAP//9pySBf8A/ruC/wAAAAAF/wAAAAD/AAljbgX///Vtuv8AAAAA///ZQ3H/ACkXBv8AAAAA/wARmzwI/wAAAAD/AI83jQX/AA9D/P8AE/WzBf8AdDWs//9c0r8F/wAcKkn//+Km3///6bMO///ipt////ackv8AAAAACP8AAAAA///2nJIF/wDhYmH/AAAAAAX/AAAAAP8ACWNuBf//+PcK/wAAAAD//+Ys9v8AF3iS///heAf/ACM5sAj/ASpAVf8A6G6PFf//z9zL/wAg3zj//8eoNv8AFkzy///+0Sj/ACfrZwj///7UYf8AH7OZ/wAjNnf/ABBsY/8AKkKm/wAAAAAI/wBGcCf/AAAAAP8AOq8J///AnAj/AAAAAP//yNPVCP8ACpJG/wAAAAAF/wAAAAD/AHjnYgX///jz0f8AAAAABf//+05J///2nJL///2liP//+05J///49wr/AAAAAAj///RCG/8AAAAA///YF9L/ACydHf//ur6x/wAAAAAI//+Z33n/AAAAAP//urt4///GeV7/AAAAAP//soOqCP8AAAAA///d9Sn/AAqSRv//5P4e/wAQb5z//+m2Rgj/AEjHZv8AJ+gu/wBinan//8n/df//2UNx//+vAMwI/wAmvI///+rbdP8AINwA///ptkf/AAAAAP//4XgHCP8AAAAA///fJAD//+iHbv//1uj6///C80f/AAAAAAj//7FYCv8AA4Lf///q3q3/AD47kv///ajB/wAPQMQI///6H3H/ACM5sP8AD0P8/wApE87/ACRlT///2BfRCP8AJryP///8fSH/ABinav8ALJnl///49wr/AB+wYAj///ackv8AK25F///GeV3/AAvBHv//3MmJ///zE0II///Byt///+Ypvv//7TKz//+wLGv/ABP1s///zYjFCP8AEG+c///NhYz/ADAjNf//yf91/wBimnD/AAAAAAj/AASxt/8AAAAABf8AXL0Z/wAAAAD/AF8UWf8AJZDv/wAAAAD/AFpl2gj/AAAAAP8AYW7R//+9FfD/ACfrZv//ur6x/wAwH/wI/wGB9/T//wX2NxX/AAAAAP8ADhhd/wAAAAD/AlfZpv8AAAAA/wAa/qkI/wAAAAD/ABr+qQX/AAAAAP8ABd1W///8fSH/AAEu2P///Haw///9pYgI///P4AT//+BMZ///uGQ5///tOSX//79waP//+05KCP//+h9x///+1GH/AAEu2P//+05J/wAEsbf///x56Qj/AAXdVv//+0sQ/wAa/qn///RFU/8AAAAA///mLPcI/wAAAAD//coxMgX/AAAAAP//7mTE///ackr//+iENf//9plZ/wAAAAAI/wAAAAD///ackgX/AP67gv8AAAAABf8AAAAA/wAJY24F///1dCz/AAAAAP//2UA5/wAXeJL/AAAAAP8AEZ50CP8CIHnv/wAWTPEV///9pYj/AAAAAP///ajB///+0Sj///7UYf///H0hCP//+05J///vkGT//++NK///+PcK///x6tz/AAEroAj//+05Jf8AAlp4///8een/AA9AxP8AAAAA/wAWUCsI///+1GH/AMGyAQX/AAAAAP8A9VgU//6S6PD//+5kxP8AAAAA//9c0sAI/wAAAAD//+F7QP8AEHLV///YFJn/AC7xJP//98trCP8AJ+tn///489H/ADJ6dP8AHoTB///3xPn/ADTRswj//9gX0v8AGdZC/wAT9bP/AECPmP8AIzZ3/wAAAAAI/wAcKkn/AAAAAP8AEZ50///sCk3/AAAAAP//25qxCP8AAAAA//+M9fQF//6kip3//+F4B/8AWTPJ//6WckD/AQulB/8AuqXTCP8ADhUl///ipt//ACIK1///5iz3/wAqRd//AAAAAAj/ADJ6dP8AAAAA/wBGbO7/ABZM8v8ABwwv/wAtyL0I/wAAAAD/AAOC3////ajB/wABLtj///2liP8AAAAACP//IPTe/wCmsB0V/wABLtj//2rrHAX//3V6Kf//1JG7/wAEsbf/AKo2N/8AhKVH/wAWTPII/wHOmTX/AD0MuhX//8/gBP8AIN84///HpP3/ABZM8v///tRh/wAn62cI///+0Sj/AB+zmf8AIzmw/wAQbGP/ACo/bf8AAAAACP8ARnAn/wAAAAD/ADqyQv//wJwI/wAAAAD//8jT1Qj/AAqSRv8AAAAABf8AAAAA/wB452IF///489H/AAAAAAX///tOSf//9pyS///9pYj///tOSf//+PcK/wAAAAAI///0PuL/AAAAAP//2BsL/wAsnR3//7q7eP8AAAAACP//meKx/wAAAAD//7q7ef//xnle/wAAAAD//7KDqgj/AAAAAP//sVtE/wA00bP//9gUmf8AO+Ea///d9SkI/wA4V8r//+BMZ/8APjhZ///mMC//AAAAAP//1bohCP8AAAAA///cyYn//9bo+v//5QFX///TYuP/AAAAAAj//86xK/8AAAAA///EIh//ABP1s///8xZ7/wBEFbAI///zGbT/AAAAAAX/AAJaeP//iEEEBf8ACo8N/wAAAAAF/wAF4I//AA4VJf8ABLG3/wAIN87/AAqSRv8AAAAACP8AEZgD/wAAAAD/AB1ZIf//7TXs/wA74Rr/AAAAAAj/AFy54f8AAAAA/wBfF5H/ABnWQv8AAAAA/wBaYqII/wAAAAD/AGFyCf//vRXw/wAn62f//7q7ef8AMB/8CP8DLZ5Z//6/hg8V///YFJn/AAcML///zYWM///hez//AAg7B///yy5NCP8AJ+gu///mKb7//+wKTf//v3Bo///cyYn/AAAAAAj//+PVt/8AAAAA///uYYz/ABP1s/8AAAAA/wAkZU8I/wAAAAD/AcZK2QX/AAAAAP8AwbIB//92qQL/ABGYA///YFWe//9mOWYI/wAAAAD/AUndYAX/AAAAAP8ABd1W///8fSH/AAEu2P///Haw///9pYgI///P4AT//+BMZ///uGQ5///tOSX//79tL///+05KCP//+iKq///+1GH/AAErn///+0sQ/wAEsbf///x56Aj/AAXgj///+05J/wAa/qn///RCG/8AAAAA///mMC8I/wAAAAD//dE6KAX/AAAAAP//7mTE///abxH//+iENf//9pyS/wAAAAAI/wAAAAD///ackgX/AP67gv8AAAAABf8AAAAA/wAJY24F///1bbr/AAAAAP//2UNx/wAXeJL/AAAAAP8AEZ50CP8AAAAA/wEkTHEF/wAqQqb/ADYAi/8AYEMx/wA3LCv/AAAAAP//gAxvCP8AAAAA//6Z9R8F/wAAAAD//wqn7P8BbRcQ/wARmzz/AAAAAP8Aoy1ACP8AAAM4/wAehMD//++NK/8AJ+tn///RDtz/AAg0lQgOAAABAAAACgAwAD4AAkRGTFQADmxhdG4AGgAEAAAAAP//AAEAAAAEAAAAAP//AAEAAAABa2VybgAIAAAAAQAAAAEABAACAAAAAgAKCAQAAQBmAAQAAAAuAMYA5AD+ARwBLgFAAVoBfAGaAbQB3gIMAjICTAKOAsAC6gMcAy4DOANWA4QDrgPYBBIELARiBMAE3gUQBVIFmAXSBfgGAgYwBl4GkAbGBwQHGgdQB3YHkAe+B+AAAQAuAA0ADgAPABAAEQASABMAFAAVABYAFwAYABoAGwAcAB8AIAAhACMAJAAlACcAKAApACoALQAuAC8AMAAxADIANAA1ADYANwA4ADoAPgA/AEAAQQBCAEMARABHAEkABwAP/+EAEP/PABH/3wAS/+QAE//mABT/4AAV/+IABgAN/+8AD//zABD/zwAR//UAEv/rABT/8wAHAA3/4gAO/9wAEP/tABH/+wAS//gAE//lABX/3wAEAA3/6AAO/9wAE//nABX/5AAEAA3/7wAO/+QAEP/iABX/7AAGAA3/5QAO/90AEP/oABH/+AAT/+wAFf/gAAgADf/OAA7/zgAP/80AEP/EABH/zwAS/80AFP/OABX/zwAHAA3/4gAO/90AEP/rABH/+wAS//UAE//pABX/5QAGAA3/5gAP/+QAEP/QABH/9AAT//EAFP/qAAoACf/VACn/qQAq/9YALv/VADP/4AA2//MAPv/oAED/7gBD//EARP/qAAsACf/xAAr/9AAW//EAKf/bAC3/1QAu/8gAL//yADX/7ABD//oAR//cAEn/9gAJAAn/8QAp//oALf/2AC7/+gA1//EAN//7ADj/+gBD//gAR//yAAYACf/pACn/+gAt//YALv/uADX/8gBD//YAEAAK/9cAC//TAAz/0gAW/7AALgAwADD/wQAz/74ANf/xADb/xAA+/8IAQP/CAEL/wgBD/+0ARP/GAEf/7wBJ/8IADAAK//cAFv/4ACn/0wAt/90ALv/QAC//8gA1/+UAN//1ADj/8wA5//oAQ//xAEf/5wAKAAn/+wAK//YALQA8AC4AJAAz//YANf/7ADj/+gBD//kARP/7AEn/+gAMAAn/1AAWABQAKf/HACr/0gAu/+UALwAEADP/3QA2//UAPv/ZAED/4gBD//MARP/oAAQACf/sACn/ngAu/7AAQ//5AAIALgAkADP/+gAHAAr/2wAM//YAFv/IAC3/0QAu/9gAL//sADf/+wALAAr/1QAL/8wADP/IABb/rAAt//gAMP/fADP/2gA2/+cAPv/ZAED/2gBC/+4ACgAJ//oAC//2ABYABAAq//UALv/tADP/0QA2/+cAPv/UAED/3ABE//IACgAJ//EACv/xABb/7QAv//UANf/vADf/+wA4//gAQ//2AEf/7gBJ/+4ADgAK/9UAC//NAAz/zwAW/6kALQAwAC4AMAAw/7MAM/+2ADb/uQA+/7MAQP+1AEL/uwBE/9YASf/WAAYACv/jABb/3AAo/+gALQAqAC4AMAAv//kADQAJ/9gAFgARACn/8gAq//MALQAqAC4AKgAvAB4AM//aADb/8QA+/98AQP/mAEP/7wBE/+YAFwAJ/+8ACv/uAAv/1AAM/9cAFv/PAB8AMAAo//QAKQAqACoAQgAtAGwALgBsADD/wQAz/7sANf/UADb/wQA4//UAPv+/AED/wQBC/8IAQ//GAET/wQBH/9IASf+/AAcACf/mACoAEgAtACoALgA8ADX/9AA2//oAQ//yAAwACf/dACn/rQAq/+cALv+/ADP/8wA1//kANv/5ADn/+wA+//AAQP/1AEP/8ABE//EAEAAJ/+8ACv/eABb/3QAf//YAKf+4ACr/+QAt/74ALv+7AC//2gA1/+EAN//sADj/7QA5//QAQ//tAEf/3gBJ//sAEQAJ//IACv/6ABb/+QAp/7MAKv/7AC3/1gAu/8IAL//0ADH/+QA1/+sAN//1ADj/8wA5//oAQ//xAET/+gBH/+IASf/4AA4ACf/6AAr/7QAW/+0AKf+yAC3/ygAu/8IAL//oADH/+AA1/+oAN//2ADj/9QBD//MAR//cAEn/+wAJAAv/uQAM/8MAFv/zAC8AFgAw/+gANv/7AD7/2gBA/94AQv/1AAIAC//7AC7/zwALAAn/3AAp/8UAKv/gAC7/vwAz/+kANv/zADn/9AA+//cAQP/2AEP/4ABE/+oACwAJ/+0AKf/1ACr/6QAu/90AM//sADb/9AA5//UAPv/3AED/9gBD/+8ARP/xAAwACf/UAAv/+QAWAAwAKf/HACr/wQAu/8sAM//SADb/6gA+/88AQP/YAEP/5wBE/9wADQAJ//gACv/mABb/5wAp/7MALf/HAC7/wgAv/+AANf/qADf/9wA4//YAQ//1AEf/1gBJ//gADwAJ//kACv/qABb/6gAp/7UALf/IAC7/xAAv/+UAMf/7ADX/7AA3//YAOP/1ADn/+wBD//MAR//eAEn/+gAFACn/8AAq//sALf/xAC7/xwAx//EADQAK/9cAC//TAAz/0wAW/78AKf/2AC3/uAAu/8YAL//ZADD/+wAz//kAN//3AD7/9QBA//cACQAJ//YAKf/QACr/+QAt/+IALv/FADH/9gA3//gAOP/5AEP/+wAGAAv/+gAu/88AM//oADb/9AA+/+oAQP/wAAsACf/0AB//+wAp/+QAKv/xAC3/7gAu/8UAMf/5ADf/+AA4//kAOf/7AEP/+gAIAAv/8gAWAAUALv/WADD/+wAz/+AANv/qAD7/2ABA/94ABgAp//QAKv/7AC3/+gAu/8cAMf/4ADb/9AACC8AABAAADCoMzAAsACIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/yQAAAAAAAP9iAAAAAAAAAAD/7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/5gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/2QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/0AAAAAAAAAAD/2wAA//j/yf/7AAAAAAAAAAAAAP/g/9D/2P/tAAAAAAAAAAAAAP/7AAAAAP/7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/0wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHgAAAAAAAAAA/8IAAAAAAAAAAAAAAAAAAP/CAAAAAAAAAAAAAP/zAAAAAAAAAAAAAAAAAAAAAP/1AAAAAAAAAAAAAP/OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/1//kAAAAAAAAAAAAA/94AAAAAAAD/7wAAAAAAAAAAAAAAAP/6AAAAAAAAACQAPAAwAAAAAP/4/+sAAP/1AAAAAP/4AAAAAP/4//cAAP/w//H/9wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/mAAAAAAAAP/jAAAAAAAAAAD/3wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/7YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/6YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/zAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7AAAAAAAAAAAAAP/fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//oAAAAAAAD/7QAAAAAAAAAA/9gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/6//kAAAAAAAAAAAAA//IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACoAAAAAAAAAAP+zAAAAAAAAAAAAAAAAAAD/1gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+QAAAAAAAAAA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Ont9fSwiYXBwbGljYXRpb24iOiJJTExVU1RSQVRPUiIsImJ1aWxkUmFuZG9tIjoiODM3OTciLCJrZXJuaW5nR3JvdXBzIjp7ImxlZnQiOnsiNjUiOnsiZ2x5cGhzIjpbMjJdLCJJRCI6MX0sIjY2Ijp7ImdseXBocyI6WzIzXSwiSUQiOjJ9LCI2NyI6eyJnbHlwaHMiOlsyNF0sIklEIjozfSwiNjgiOnsiZ2x5cGhzIjpbMjUsMzhdLCJJRCI6NH0sIjY5Ijp7ImdseXBocyI6WzI2XSwiSUQiOjV9LCI3MCI6eyJnbHlwaHMiOlsyN10sIklEIjo2fSwiNzEiOnsiZ2x5cGhzIjpbMjhdLCJJRCI6N30sIjcyIjp7ImdseXBocyI6WzI5LDMwLDM0XSwiSUQiOjh9LCI3NCI6eyJnbHlwaHMiOlszMV0sIklEIjo5fSwiNzUiOnsiZ2x5cGhzIjpbMzJdLCJJRCI6MTB9LCI3NiI6eyJnbHlwaHMiOlszM10sIklEIjoxMX0sIjc4Ijp7ImdseXBocyI6WzM1XSwiSUQiOjEyfSwiNzkiOnsiZ2x5cGhzIjpbMzZdLCJJRCI6MTN9LCI4MCI6eyJnbHlwaHMiOlszN10sIklEIjoxNH0sIjgyIjp7ImdseXBocyI6WzM5XSwiSUQiOjE1fSwiODMiOnsiZ2x5cGhzIjpbNDBdLCJJRCI6MTZ9LCI4NCI6eyJnbHlwaHMiOls0MV0sIklEIjoxN30sIjg1Ijp7ImdseXBocyI6WzQyXSwiSUQiOjE4fSwiODYiOnsiZ2x5cGhzIjpbNDMsNDRdLCJJRCI6MTl9LCI4OCI6eyJnbHlwaHMiOls0NV0sIklEIjoyMH0sIjg5Ijp7ImdseXBocyI6WzQ2XSwiSUQiOjIxfSwiOTAiOnsiZ2x5cGhzIjpbNDddLCJJRCI6MjJ9LCI5NyI6eyJnbHlwaHMiOls0OF0sIklEIjoyM30sIjk4Ijp7ImdseXBocyI6WzQ5XSwiSUQiOjI0fSwiOTkiOnsiZ2x5cGhzIjpbNTBdLCJJRCI6MjV9LCIxMDAiOnsiZ2x5cGhzIjpbNTEsNTldLCJJRCI6MjZ9LCIxMDEiOnsiZ2x5cGhzIjpbNTJdLCJJRCI6Mjd9LCIxMDIiOnsiZ2x5cGhzIjpbNTNdLCJJRCI6Mjh9LCIxMDMiOnsiZ2x5cGhzIjpbNTRdLCJJRCI6Mjl9LCIxMDQiOnsiZ2x5cGhzIjpbNTVdLCJJRCI6MzB9LCIxMDUiOnsiZ2x5cGhzIjpbNTZdLCJJRCI6MzF9LCIxMDciOnsiZ2x5cGhzIjpbNThdLCJJRCI6MzJ9LCIxMTAiOnsiZ2x5cGhzIjpbNjEsNjBdLCJJRCI6MzN9LCIxMTEiOnsiZ2x5cGhzIjpbNjJdLCJJRCI6MzR9LCIxMTIiOnsiZ2x5cGhzIjpbNjNdLCJJRCI6MzV9LCIxMTMiOnsiZ2x5cGhzIjpbNjRdLCJJRCI6MzZ9LCIxMTQiOnsiZ2x5cGhzIjpbNjVdLCJJRCI6Mzd9LCIxMTUiOnsiZ2x5cGhzIjpbNjZdLCJJRCI6Mzh9LCIxMTYiOnsiZ2x5cGhzIjpbNjddLCJJRCI6Mzl9LCIxMTciOnsiZ2x5cGhzIjpbNjhdLCJJRCI6NDB9LCIxMTgiOnsiZ2x5cGhzIjpbNjksNzAsNzJdLCJJRCI6NDF9LCIxMjAiOnsiZ2x5cGhzIjpbNzFdLCJJRCI6NDJ9LCIxMjIiOnsiZ2x5cGhzIjpbNzNdLCJJRCI6NDN9fSwicmlnaHQiOnsiNDAiOnsiZ2x5cGhzIjpbOV0sIklEIjoxfSwiNDEiOnsiZ2x5cGhzIjpbMTBdLCJJRCI6Mn0sIjQyIjp7ImdseXBocyI6WzExXSwiSUQiOjN9LCI0NCI6eyJnbHlwaHMiOlsxMl0sIklEIjo0fSwiNjUiOnsiZ2x5cGhzIjpbMjJdLCJJRCI6NX0sIjcyIjp7ImdseXBocyI6WzI5LDIzLDI1LDI2LDI3LDMwLDMyLDMzLDM0LDM1LDM3LDM5XSwiSUQiOjZ9LCI3NCI6eyJnbHlwaHMiOlszMV0sIklEIjo3fSwiNzkiOnsiZ2x5cGhzIjpbMzYsMjQsMjgsMzhdLCJJRCI6OH0sIjgzIjp7ImdseXBocyI6WzQwXSwiSUQiOjl9LCI4NCI6eyJnbHlwaHMiOls0MV0sIklEIjoxMH0sIjg1Ijp7ImdseXBocyI6WzQyXSwiSUQiOjExfSwiODYiOnsiZ2x5cGhzIjpbNDMsNDRdLCJJRCI6MTJ9LCI4OCI6eyJnbHlwaHMiOls0NV0sIklEIjoxM30sIjg5Ijp7ImdseXBocyI6WzQ2XSwiSUQiOjE0fSwiOTAiOnsiZ2x5cGhzIjpbNDddLCJJRCI6MTV9LCI5NyI6eyJnbHlwaHMiOls0OF0sIklEIjoxNn0sIjk5Ijp7ImdseXBocyI6WzUwLDUyXSwiSUQiOjE3fSwiMTAwIjp7ImdseXBocyI6WzUxXSwiSUQiOjE4fSwiMTAyIjp7ImdseXBocyI6WzUzXSwiSUQiOjE5fSwiMTAzIjp7ImdseXBocyI6WzU0XSwiSUQiOjIwfSwiMTA0Ijp7ImdseXBocyI6WzU1XSwiSUQiOjIxfSwiMTA1Ijp7ImdseXBocyI6WzU2XSwiSUQiOjIyfSwiMTA2Ijp7ImdseXBocyI6WzU3XSwiSUQiOjIzfSwiMTA3Ijp7ImdseXBocyI6WzU4LDU5XSwiSUQiOjI0fSwiMTEwIjp7ImdseXBocyI6WzYxLDYwLDYzLDY1XSwiSUQiOjI1fSwiMTExIjp7ImdseXBocyI6WzYyXSwiSUQiOjI2fSwiMTEzIjp7ImdseXBocyI6WzY0XSwiSUQiOjI3fSwiMTE1Ijp7ImdseXBocyI6WzY2XSwiSUQiOjI4fSwiMTE2Ijp7ImdseXBocyI6WzY3XSwiSUQiOjI5fSwiMTE3Ijp7ImdseXBocyI6WzY4XSwiSUQiOjMwfSwiMTE4Ijp7ImdseXBocyI6WzY5LDcwLDcyXSwiSUQiOjMxfSwiMTIwIjp7ImdseXBocyI6WzcxXSwiSUQiOjMyfSwiMTIyIjp7ImdseXBocyI6WzczXSwiSUQiOjMzfX19LCJtaXNzaW5nQ2FzZVN1YnN0aXR1dGlvbiI6MH0AAAA=") format("opentype");
}
/* twine-user-stylesheet #8: "LeahFantasyFont.ttf" */
@font-face {
	font-family: "LeahFantasyFont";
	src: url("data:font/ttf;base64,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") format("truetype");
}
/* twine-user-stylesheet #9: "Seaweed.ttf" */
@font-face {
	font-family: "Seaweed";
	src: url("data:font/ttf;base64,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AAAAAAAeAB8AAAAAAAD/8QABAAAAAQAAV3/zUF8PPPUACwQAAAAAAN+YbUYAAAAA35htRv8U//8CewOHAAAABwACAAEAAAAAAAEAAAMf/ykAZgN//xT/hwJ7AAEAAAAAAAAAAAAAAAAAAAAwAh8AAAAAAAAAAAAAAaEA1wFk/0YAyf+JAj7/rgDz/2YCPgAAAWT/ZgFl/2YBRf9aAjP/XAIt/1wDf//rAcz/XAI+/1wBef9cAj7/XAF5/1wCPv9cAj7/XADp/2UBmP9mAW//ZQDF/4UCAP97ANL/pAHF/4UB0v9HAOj/hQHr/1wBA/8pARb/SAGY/2YBFf9cAUn/YQCz/4UBhP9cALX/hQDt/2YBKv9SAOH/SAFI/2YBVP+FAj7/hQFT/xQBWv+FAAAAAQAAAA4AAQAAAAAAAAAAAAAAAAAAAAAAYAAAAGAAAABgAAAAtAAAAVwAAAHYAAACvAAAAzAAAAMwAAAEIAAABPwAAAYYAAAHUAAACJwAAAnIAAAK2AAADCQAAA0oAAAOLAAADxwAABAMAAAR6AAAEoQAABMYAAAT9AAAFIgAABXcAAAWjAAAF7AAABiMAAAY4AAAGbwAABpEAAAa4AAAG8QAABygAAAdhAAAHhgAAB7oAAAfhAAAICAAACD8AAAhkAAAIiwAACNQAAAkVAAAJTAAACYUAAEAAAAwAFoABwAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAASAN4AAQAAAAAAAAAbAAAAAQAAAAAAAQAHABsAAQAAAAAAAgAHACIAAQAAAAAAAwAHACkAAQAAAAAABAAHADAAAQAAAAAABQALADcAAQAAAAAABgAHAEIAAQAAAAAADQAbAEkAAQAAAAAADgAaAGQAAwABBAkAAAA2AH4AAwABBAkAAQAOALQAAwABBAkAAgAOAMIAAwABBAkAAwAOANAAAwABBAkABAAOAN4AAwABBAkABQAWAOwAAwABBAkABgAOAQIAAwABBAkADQA2ARAAAwABBAkADgA0AUZTSUwgT3BlbiBGb250IExpY2Vuc2UgKE9GTClTZWF3ZWVkUmVndWxhclNlYXdlZWRTZWF3ZWVkVmVyc2lvbiAxLjBTZWF3ZWVkU0lMIE9wZW4gRm9udCBMaWNlbnNlIChPRkwpaHR0cDovL3NjcmlwdHMuc2lsLm9yZy9PRkwAUwBJAEwAIABPAHAAZQBuACAARgBvAG4AdAAgAEwAaQBjAGUAbgBzAGUAIAAoAE8ARgBMACkAUwBlAGEAdwBlAGUAZABSAGUAZwB1AGwAYQByAFMAZQBhAHcAZQBlAGQAUwBlAGEAdwBlAGUAZABWAGUAcgBzAGkAbwBuACAAMQAuADAAUwBlAGEAdwBlAGUAZABTAEkATAAgAE8AcABlAG4AIABGAG8AbgB0ACAATABpAGMAZQBuAHMAZQAgACgATwBGAEwAKQBoAHQAdABwADoALwAvAHMAYwByAGkAcAB0AHMALgBzAGkAbAAuAG8AcgBnAC8ATwBGAEwAAgAAAAAAAP+aACMAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAQACAAMABAAPABAAEQATAB0AHgAiACcAKAAsAC4AMQA0ADYANwA5ADoARABFAEYARwBIAEkASgBLAEwATQBOAE8AUABRAFIAUwBUAFUAVgBXAFgAWQBaAFsAXABdAAA=") format("truetype");
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">/* twine-user-script #1: "__TITLES.js" */
let version = "0.0.1.128 InDev";

// Chapter Title Names
let TITLES = {
    "@start": "Create Your Character",
    "@combatoverlord": "Fight!",
    "@rest": "Rest for a Bit, Weary Fighter",
};

// Add the strings to setup.
// REVIEW: Is this really needed? Do I need to make these a part of
// setup when this file isn't in assets/js/?
(function (S) {
    if (!S.STR) {
        S.STR = {};
    }

    S.STR.TITLES = TITLES;
    S.STR.version = version;
})(setup);
/* twine-user-script #2: "____uuid.min.js" */
!function(S){var getRandomValues,rnds8=new Uint8Array(16);function uuid_rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported.");return getRandomValues(rnds8)}var uuid_REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function uuid_validate(uuid){return"string"==typeof uuid&&uuid_REGEX.test(uuid)}for(var uuid_byteToHex=[],i=0;i<256;i+=1)uuid_byteToHex.push((i+256).toString(16).substr(1));function uuid_stringify(arr){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,uuid=(uuid_byteToHex[arr[offset+0]]+uuid_byteToHex[arr[offset+1]]+uuid_byteToHex[arr[offset+2]]+uuid_byteToHex[arr[offset+3]]+"-"+uuid_byteToHex[arr[offset+4]]+uuid_byteToHex[arr[offset+5]]+"-"+uuid_byteToHex[arr[offset+6]]+uuid_byteToHex[arr[offset+7]]+"-"+uuid_byteToHex[arr[offset+8]]+uuid_byteToHex[arr[offset+9]]+"-"+uuid_byteToHex[arr[offset+10]]+uuid_byteToHex[arr[offset+11]]+uuid_byteToHex[arr[offset+12]]+uuid_byteToHex[arr[offset+13]]+uuid_byteToHex[arr[offset+14]]+uuid_byteToHex[arr[offset+15]]).toLowerCase();if(!uuid_validate(uuid))throw TypeError("Stringified UUID is invalid");return uuid}function uuid_v4(options,buf,offset){var rnds=(options=options||{}).random||(options.uuid_rng||uuid_rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(var i=0;i<16;i+=1)buf[offset+i]=rnds[i];return buf}return uuid_stringify(rnds)}S.uuid_v4=function(){return uuid_v4()}}(setup);
/* twine-user-script #3: "___defaults.min.js" */
const DEFAULT_EQUIPPABLE={modslots:0,mods:[],affixes:[],healthMax:0,initStart:0,initStartVariance:0,initDecrementModifier:0,initRecoveryModifier:0,triggers:[],criticalChanceBase:0,criticalChanceIncreased:0,criticalChanceMore:1,criticalDamageBase:0,criticalDamageIncreased:0,criticalDamageMore:1,directChanceBase:0,directChanceIncreased:0,directChanceMore:1,deflectChanceBase:0,deflectChanceIncreased:0,deflectChanceMore:1,blockRecovery:0,blockChanceBase:0,blockChanceIncreased:0,blockChanceMore:1,damage:{blunt:{min:0,max:0,increased:0,more:1},pierce:{min:0,max:0,increased:0,more:1},acid:{min:0,max:0,increased:0,more:1},fire:{min:0,max:0,increased:0,more:1},frost:{min:0,max:0,increased:0,more:1},lightning:{min:0,max:0,increased:0,more:1},sacred:{min:0,max:0,increased:0,more:1},shadow:{min:0,max:0,increased:0,more:1},aether:{min:0,max:0,increased:0,more:1}},reduct:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},resistance:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},resistanceMax:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},absorbPercent:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},absorbPercentMax:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},absorbFlat:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0}},DEFAULT_BUFF={duration:0,onApply:function(target){},onReapply:function(target){},perInit:function(target){}},DEFAULT_ATTACK={family:null,type:"attack",effect:"damage",hitnumber:1,wdm:1,initRecovery:22,initRecoveryVariance:.12,stun:0,buffs:[],deflectCalculated:0,blockCalculated:0,isBlockable:!0,isDeflectable:!0,isDirectable:!0,isCritable:!0,targets:{style:null,side:null,row:null},criticalChanceBase:0,criticalChanceIncreased:0,criticalChanceMore:1,criticalChanceCalculated:0,criticalDamageBase:0,criticalDamageIncreased:0,criticalDamageMore:1,criticalDamageCalculated:0,directChanceBase:0,directChanceIncreased:0,directChanceMore:1,directChanceCalculated:0,damage:{blunt:{min:0,max:0,increased:0,more:1},pierce:{min:0,max:0,increased:0,more:1},acid:{min:0,max:0,increased:0,more:1},fire:{min:0,max:0,increased:0,more:1},frost:{min:0,max:0,increased:0,more:1},lightning:{min:0,max:0,increased:0,more:1},sacred:{min:0,max:0,increased:0,more:1},shadow:{min:0,max:0,increased:0,more:1},aether:{min:0,max:0,increased:0,more:1}}},DEFAULT_ENEMY={family:null,description:null,buffs:[],healthMax:100,initStart:26,initStartVariance:.12,initDecrementModifier:1,initRecoveryModifier:1,criticalChanceBase:.05,criticalChanceIncreased:1,criticalChanceMore:1,criticalDamageBase:1.5,criticalDamageIncreased:1,criticalDamageMore:1,directChanceBase:.05,directChanceIncreased:1,directChanceMore:1,deflectChanceBase:.05,deflectChanceIncreased:1,deflectChanceMore:1,blockRecovery:5,blockChanceBase:0,blockChanceIncreased:1,blockChanceMore:1,damage:{blunt:{min:0,max:0,increased:0,more:1},pierce:{min:0,max:0,increased:0,more:1},acid:{min:0,max:0,increased:0,more:1},fire:{min:0,max:0,increased:0,more:1},frost:{min:0,max:0,increased:0,more:1},lightning:{min:0,max:0,increased:0,more:1},sacred:{min:0,max:0,increased:0,more:1},shadow:{min:0,max:0,increased:0,more:1},aether:{min:0,max:0,increased:0,more:1}},reduct:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},resistance:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},resistanceMax:{material:75,blunt:75,pierce:75,acid:75,elemental:75,fire:75,frost:75,lightning:75,occult:75,sacred:75,shadow:75,aether:75},absorbPercent:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},absorbPercentMax:{material:45,blunt:45,pierce:45,acid:45,elemental:45,fire:45,frost:45,lightning:45,occult:45,sacred:45,shadow:45,aether:45},absorbFlat:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0}};
/* twine-user-script #4: "___hexii.min.js" */
let hexii=[{name:"PPPPPP-1",src:"assets/imported/img/svg/hex/PPPPPP-1.svg",version:0,edgelines:{default:["plains","plains","plains","plains","plains","plains"],rOnce:["plains","plains","plains","plains","plains","plains"],rTwice:["plains","plains","plains","plains","plains","plains"],rThrice:["plains","plains","plains","plains","plains","plains"],rQuarce:["plains","plains","plains","plains","plains","plains"],rQuince:["plains","plains","plains","plains","plains","plains"],inverted:["plains","plains","plains","plains","plains","plains"],irOnce:["plains","plains","plains","plains","plains","plains"],irTwice:["plains","plains","plains","plains","plains","plains"],irThrice:["plains","plains","plains","plains","plains","plains"],irQuarce:["plains","plains","plains","plains","plains","plains"],irQuince:["plains","plains","plains","plains","plains","plains"]}},{name:"RPPPPP-1",src:"assets/imported/img/svg/hex/RPPPPP-1.svg",version:0,edgelines:{default:["road","plains","plains","plains","plains","plains"],rOnce:["plains","road","plains","plains","plains","plains"],rTwice:["plains","plains","road","plains","plains","plains"],rThrice:["plains","plains","plains","road","plains","plains"],rQuarce:["plains","plains","plains","plains","road","plains"],rQuince:["plains","plains","plains","plains","plains","road"],inverted:["plains","road","plains","plains","plains","plains"],irOnce:["plains","plains","road","plains","plains","plains"],irTwice:["plains","plains","plains","road","plains","plains"],irThrice:["plains","plains","plains","plains","road","plains"],irQuarce:["plains","plains","plains","plains","plains","road"],irQuince:["road","plains","plains","plains","plains","plains"]}},{name:"RPPPPP-2",src:"assets/imported/img/svg/hex/RPPPPP-2.svg",version:0,edgelines:{default:["road","plains","plains","plains","plains","plains"],rOnce:["plains","road","plains","plains","plains","plains"],rTwice:["plains","plains","road","plains","plains","plains"],rThrice:["plains","plains","plains","road","plains","plains"],rQuarce:["plains","plains","plains","plains","road","plains"],rQuince:["plains","plains","plains","plains","plains","road"],inverted:["plains","road","plains","plains","plains","plains"],irOnce:["plains","plains","road","plains","plains","plains"],irTwice:["plains","plains","plains","road","plains","plains"],irThrice:["plains","plains","plains","plains","road","plains"],irQuarce:["plains","plains","plains","plains","plains","road"],irQuince:["road","plains","plains","plains","plains","plains"]}},{name:"RRPPPP-1",src:"assets/imported/img/svg/hex/RRPPPP-1.svg",version:0,edgelines:{default:["road","roads","plains","plains","plains","plains"],rOnce:["plains","road","roads","plains","plains","plains"],rTwice:["plains","plains","road","roads","plains","plains"],rThrice:["plains","plains","plains","road","roads","plains"],rQuarce:["plains","plains","plains","plains","road","roads"],rQuince:["roads","plains","plains","plains","plains","road"],inverted:["roads","road","plains","plains","plains","plains"],irOnce:["plains","roads","road","plains","plains","plains"],irTwice:["plains","plains","roads","road","plains","plains"],irThrice:["plains","plains","plains","roads","road","plains"],irQuarce:["plains","plains","plains","plains","roads","road"],irQuince:["road","plains","plains","plains","plains","roads"]}},{name:"RRPPPP-2",src:"assets/imported/img/svg/hex/RRPPPP-2.svg",version:0,edgelines:{default:["road","roads","plains","plains","plains","plains"],rOnce:["plains","road","roads","plains","plains","plains"],rTwice:["plains","plains","road","roads","plains","plains"],rThrice:["plains","plains","plains","road","roads","plains"],rQuarce:["plains","plains","plains","plains","road","roads"],rQuince:["roads","plains","plains","plains","plains","road"],inverted:["roads","road","plains","plains","plains","plains"],irOnce:["plains","roads","road","plains","plains","plains"],irTwice:["plains","plains","roads","road","plains","plains"],irThrice:["plains","plains","plains","roads","road","plains"],irQuarce:["plains","plains","plains","plains","roads","road"],irQuince:["road","plains","plains","plains","plains","roads"]}},{name:"RPRPPP-1",src:"assets/imported/img/svg/hex/RPRPPP-1.svg",version:0,edgelines:{default:["road","plains","road","plains","plains","plains"],rOnce:["plains","road","plains","road","plains","plains"],rTwice:["plains","plains","road","plains","road","plains"],rThrice:["plains","plains","plains","road","plains","road"],rQuarce:["road","plains","plains","plains","road","plains"],rQuince:["plains","road","plains","plains","plains","road"],inverted:["plains","road","plains","plains","plains","road"],irOnce:["road","plains","road","plains","plains","plains"],irTwice:["plains","road","plains","road","plains","plains"],irThrice:["plains","plains","road","plains","road","plains"],irQuarce:["plains","plains","plains","road","plains","road"],irQuince:["road","plains","plains","plains","road","plains"]}},{name:"RPRPPP-2",src:"assets/imported/img/svg/hex/RPRPPP-2.svg",version:0,edgelines:{default:["road","plains","road","plains","plains","plains"],rOnce:["plains","road","plains","road","plains","plains"],rTwice:["plains","plains","road","plains","road","plains"],rThrice:["plains","plains","plains","road","plains","road"],rQuarce:["road","plains","plains","plains","road","plains"],rQuince:["plains","road","plains","plains","plains","road"],inverted:["plains","road","plains","plains","plains","road"],irOnce:["road","plains","road","plains","plains","plains"],irTwice:["plains","road","plains","road","plains","plains"],irThrice:["plains","plains","road","plains","road","plains"],irQuarce:["plains","plains","plains","road","plains","road"],irQuince:["road","plains","plains","plains","road","plains"]}},{name:"RPPRPP-1",src:"assets/imported/img/svg/hex/RPPRPP-1.svg",version:0,edgelines:{default:["road","plains","plains","road","plains","plains"],rOnce:["plains","road","plains","plains","road","plains"],rTwice:["plains","plains","road","plains","plains","road"],rThrice:["road","plains","plains","road","plains","plains"],rQuarce:["plains","road","plains","plains","road","plains"],rQuince:["plains","plains","road","plains","plains","road"],inverted:["plains","road","plains","plains","road","plains"],irOnce:["plains","plains","road","plains","plains","road"],irTwice:["road","plains","plains","road","plains","plains"],irThrice:["plains","road","plains","plains","road","plains"],irQuarce:["plains","plains","road","plains","plains","road"],irQuince:["road","plains","plains","road","plains","plains"]}},{name:"RPRRPP-1",src:"assets/imported/img/svg/hex/RPRRPP-1.svg",version:0,edgelines:{default:["road","plains","road","road","plains","plains"],rOnce:["plains","road","plains","road","road","plains"],rTwice:["plains","plains","road","plains","road","road"],rThrice:["road","plains","plains","road","plains","road"],rQuarce:["road","road","plains","plains","road","plains"],rQuince:["plains","road","road","plains","plains","road"],inverted:["plains","road","plains","plains","road","road"],irOnce:["road","plains","road","plains","plains","road"],irTwice:["road","road","plains","road","plains","plains"],irThrice:["plains","road","road","plains","road","plains"],irQuarce:["plains","plains","road","road","plains","road"],irQuince:["road","plains","plains","road","road","plains"]}}];!function(S){S.hex||(S.hex={}),S.hex.hexii=hexii}(setup);
/* twine-user-script #5: "__buffs.min.js" */
class Buff{constructor(obj){jQuery.extend(!0,this,DEFAULT_BUFF,obj),void 0===this.description&&(console.error(`Buff: ${this.name} lacks a description.`),this.description="Description missing.")}}const BUFFS={buffAmp:new Buff({type:"buff",duration:100,name:"Amped",description:"Your inits tick twice as fast.",onApply:function(target){target.initDecrementModifier*=2}}),buffCheckQuiver:new Buff({type:"buff",duration:100,name:"Check Quiver",description:"Your inits tick faster by half.",onApply:function(target){target.initDecrementModifier*=1.5}}),buffSpearPosture:new Buff({type:"buff",duration:250,name:"Spear Posture",description:"You have increased deflect chance.",onApply:function(target){target.deflectChanceBase+=.06,target.deflectChanceIncreased+=1,target.deflectChanceMore*=1.2,target.deflectCalculated=target.deflectChanceBase*target.deflectChanceIncreased*target.deflectChanceMore}}),buffShieldPosture:new Buff({type:"buff",duration:250,name:"Shield Posture",description:"You have increased block chance.",onApply:function(target){target.blockChanceBase+=.06,target.blockChanceIncreased+=1,target.blockChanceMore*=1.2,target.blockCalculated=target.blockChanceBase*target.blockChanceIncreased*target.blockChanceMore}}),buffSacrificeToChaos:new Buff({type:"buff",duration:250,name:"Sacrifice To Chaos",description:"Sacrifice 10% of your current life, buffing all Occult damage by +(1-3).",onApply:function(target){target.health*=.9,target.damage.aether.min+=1,target.damage.aether.max+=3,target.damage.sacred.min+=1,target.damage.sacred.max+=3,target.damage.shadow.min+=1,target.damage.shadow.max+=3}}),buffLumberjackStance:new Buff({type:"buff",duration:250,name:"Lumberjack Stance",description:"You deal +(4-10) Pierce damage.",onApply:function(target){target.damage.pierce.min+=4,target.damage.pierce.max+=10}}),buffSharpTipArrows:new Buff({type:"buff",duration:250,name:"Lumberjack Stance",description:"You deal twice as much pierce damage.",onApply:function(target){target.damage.pierce.more*=2}}),buffHealUndead:new Buff({type:"buff",duration:0,name:"Heal Undead",description:"Heal all undead for 20% of their max life.",onApply:function(target){["Skeleton","Ghoul"].includes(target.family)&&(target.health+=.2*target.healthMax)}}),buffCackle:new Buff({type:"buff",duration:250,name:"Cackling",description:"Your madness causes you to cackle wildly, increasing your blunt damage.",onApply:function(target){target.damage.blunt.min+=4,target.damage.blunt.max+=8}}),buffHogRoar:new Buff({type:"buff",duration:200,name:"Hog's Roar",description:"You have +20% material resistance.",onApply:function(target){target.resistance.material+=.2}}),buffHerdMentor:new Buff({type:"buff",duration:200,name:"Herd Mentor",description:"You have 15% less attack recovery.",onApply:function(target){target.resistance.initRecoveryModifier*=.85}}),buffGhoulScreech:new Buff({type:"buff",duration:80,name:"Ghoulish Screech",description:"You attack 50% faster.",onApply:function(target){target.initDecrementModifier*=1.5}}),buffRegenerate:new Buff({type:"buff",duration:200,name:"Regenerate",description:"You regenerate 1hp every 3 init.",onApply:function(target){target.regenTick=3},perInit:function(target){target.regenTick-=State.variables.initDecrementAmount*target.initDecrementModifier,target.regenTick<0&&(target.health+=1,target.health>target.healthMax&&(target.health=target.healthMax),target.regenTick=3)}}),debuffBleed:new Buff({type:"debuff",duration:80,name:"Bleeding!",description:"You take 1 damage every 10 init.",onApply:function(target){target.bleedTick=10},perInit:function(target){target.bleedTick-=State.variables.initDecrementAmount*target.initDecrementModifier,target.bleedTick<0&&(target.health-=1,target.bleedTick=10)}}),debuffPoisoned:new Buff({type:"debuff",duration:90,name:"Poisoned!",description:"You take 1 damage every 7 init.",onApply:function(target){target.poisonTick=7},perInit:function(target){target.poisonTick-=State.variables.initDecrementAmount*target.initDecrementModifier,target.poisonTick<0&&(target.health-=1,target.poisonTick=7)}}),debuffFirewall:new Buff({type:"debuff",duration:60,name:"Standing in Firewall!",description:"10% chance to take 1 damage every init.",perInit:function(target){Math.random()<.1&&(target.health-=1)}}),debuffWebShot:new Buff({type:"debuff",duration:80,name:"Webbed!",description:"You have 20% less init decrement modifier.",onApply:function(target){target.initDecrementModifier*=.8}}),debuffIcePrison:new Buff({type:"debuff",duration:80,name:"Ice Prison",description:"You have 50% less init decrement modifier.",onApply:function(target){target.initDecrementModifier*=.5}}),debuffRattle:new Buff({type:"debuff",duration:80,name:"Rattled!",description:"A spoopy skeleton has given you 10% less init decrement modifier and 10% less blunt resistance.",onApply:function(target){target.resistance.bluntl-=.2,target.initDecrementModifier*=.9}})};
/* twine-user-script #6: "__hex.min.js" */
let DEFAULT_HEX={configuration:"default"};class Hex{constructor(hexSrc){if(jQuery.extend(!0,this,DEFAULT_HEX,hexSrc),void 0===this.edgelines.rOnce||void 0===this.edgelines.inverted){function rotate(arr){let solarr=[...arr];return solarr.unshift(solarr.pop()),solarr}this.edgelines.rOnce=rotate(this.edgelines.default),this.edgelines.rTwice=rotate(this.edgelines.rOnce),this.edgelines.rThrice=rotate(this.edgelines.rTwice),this.edgelines.rQuarce=rotate(this.edgelines.rThrice),this.edgelines.rQuince=rotate(this.edgelines.rQuarce),this.edgelines.inverted=[...this.edgelines.rQuarce].reverse(),this.edgelines.irOnce=rotate(this.edgelines.inverted),this.edgelines.irTwice=rotate(this.edgelines.irOnce),this.edgelines.irThrice=rotate(this.edgelines.irTwice),this.edgelines.irQuarce=rotate(this.edgelines.irThrice),this.edgelines.irQuince=rotate(this.edgelines.irQuarce),console.error(`This hex does not have the values in all possible configurations. Please copy and paste this code into the <Hex>.edgelines field object for ${this.src}:`),console.log(`rOnce: [${Hex.reportEdgelines(this.edgelines.rOnce)}],`,`\nrTwice: [${Hex.reportEdgelines(this.edgelines.rTwice)}],`,`\nrThrice: [${Hex.reportEdgelines(this.edgelines.rThrice)}],`,`\nrQuarce: [${Hex.reportEdgelines(this.edgelines.rQuarce)}],`,`\nrQuince: [${Hex.reportEdgelines(this.edgelines.rQuince)}],`,`\ninverted: [${Hex.reportEdgelines(this.edgelines.inverted)}],`,`\nirOnce: [${Hex.reportEdgelines(this.edgelines.irOnce)}],`,`\nirTwice: [${Hex.reportEdgelines(this.edgelines.irTwice)}],`,`\nirThrice: [${Hex.reportEdgelines(this.edgelines.irThrice)}],`,`\nirQuarce: [${Hex.reportEdgelines(this.edgelines.irQuarce)}],`,`\nirQuince: [${Hex.reportEdgelines(this.edgelines.irQuince)}],`)}return this}getFaces(){return this.edgelines[this.configuration]}rotate(){switch(this.configuration){case"default":this.configuration="rOnce";break;case"rOnce":this.configuration="rTwice";break;case"rTwice":this.configuration="rThrice";break;case"rThrice":this.configuration="rQuarce";break;case"rQuarce":this.configuration="rQuince";break;case"rQuince":this.configuration="default";break;case"inverted":this.configuration="irOnce";break;case"irOnce":this.configuration="irTwice";break;case"irTwice":this.configuration="irThrice";break;case"irThrice":this.configuration="irQuarce";break;case"irQuarce":this.configuration="irQuince";break;case"irQuince":this.configuration="inverted"}}invert(){switch(this.configuration){case"default":this.configuration="inverted";break;case"rOnce":this.configuration="irOnce";break;case"rTwice":this.configuration="irTwice";break;case"rThrice":this.configuration="irThrice";break;case"rQuarce":this.configuration="irQuarce";break;case"rQuince":this.configuration="irQuince";break;case"inverted":this.configuration="default";break;case"irOnce":this.configuration="rOnce";break;case"irTwice":this.configuration="rTwice";break;case"irThrice":this.configuration="rThrice";break;case"irQuarce":this.configuration="rQuarce";break;case"irQuince":this.configuration="rQuince"}}static reportEdgelines(configuration){let solStr="";return solStr+=`"${configuration[0]}", `,solStr+=`"${configuration[1]}", `,solStr+=`"${configuration[2]}", `,solStr+=`"${configuration[3]}", `,solStr+=`"${configuration[4]}", `,solStr+=`"${configuration[5]}"`,solStr}}!function(S){S.hex||(S.hex={}),S.hex.Hex=Hex}(setup);
/* twine-user-script #7: "__line.min.js" */
let DEFAULTLINE={portrait:null,speaker:null,line:"Default Line Text. If you see this, you have encountered an error.",wasSeen:!1};class Line{constructor(obj){jQuery.extend(!0,this,DEFAULTLINE,obj)}clone(){return new this.constructor(this)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.tb||(S.tb={}),S.tb.Line=Line}(setup);
/* twine-user-script #8: "__mods.min.js" */
class Affix{constructor(obj){jQuery.extend(!0,this,obj)}static new(Affix){return cloneDeep(Affix)}clone(){return new this.constructor(this)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}const affixes={unequippedMod:new Affix({name:"Unequipped Mod",type:"UnequippedMod",tier:1,tags:["all","unequipped"]}),WEAPON_INCREASED_DIRECT_CHANCE:new Affix({name:"Increased Direct Chance",affixes:[["directChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.2*this.tier]},get description(){return`${100*this.value[0]}% increased Direct Hit Chance`},slot:"weapon",tags:["mace"]}),WEAPON_INCREASED_CRIT_CHANCE:new Affix({name:"Increased Crit Chance",affixes:[["criticalChanceIncreased","+"],["criticalChanceBase","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.9*this.tier,.04*this.tier]},get description(){return`${100*this.value[0]}% increased Crit Chance\n+${100*this.value[0]}% base Crit Chance`},slot:"weapon",tags:["spear","axe","sword","dagger","bow"]}),WEAPON_INCREASED_CRIT_DAMAGE:new Affix({name:"Increased Crit Damage",affixes:[["criticalDamageIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.65*this.tier]},get description(){return`${100*this.value[0]}% increased Crit Damage`},slot:"weapon",tags:["spear","axe","sword","dagger","bow"]}),WEAPON_INCREASED_DEFLECT_CHANCE:new Affix({name:"Increased Deflect Chance",affixes:[["deflectChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.9*this.tier]},get description(){return`${100*this.value[0]}% increased Deflect Chance`},slot:"weapon",tags:["spear","shield"]}),WEAPON_INCREASED_BLOCK_CHANCE:new Affix({name:"Increased Block Chance",affixes:[["blockChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.2*this.tier]},get description(){return`${100*this.value[0]}% increased Block Chance`},slot:"weapon",tags:["shield"]}),WEAPON_INCREASED_BLOCK_RECOVERY:new Affix({name:"Minus Block Recovery",affixes:[["blockRecovery","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-1*this.tier]},get description(){return`-${this.value[0]} Block Recovery`},slot:"weapon",tags:["shield"]}),WEAPON_INCREASED_PIERCE_DAMAGE:new Affix({name:"Increased Pierce Damage",affixes:[["damage.pierce.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.8*this.tier]},get description(){return`${this.value[0]}% Increased Pierce Damage`},slot:"weapon",tags:["pierce"]}),WEAPON_INCREASED_BLUNT_DAMAGE:new Affix({name:"Increased Blunt Damage",affixes:[["damage.blunt.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.8*this.tier]},get description(){return`${this.value[0]}% Increased Blunt Damage`},slot:"weapon",tags:["blunt"]}),WEAPON_INCREASED_ACID_DAMAGE:new Affix({name:"Increased Acid Damage",affixes:[["damage.acid.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.8*this.tier]},get description(){return`${this.value[0]}% Increased Acid Damage`},slot:"weapon",tags:["acid"]}),WEAPON_INCREASED_FIRE_DAMAGE:new Affix({name:"Increased Fire Damage",affixes:[["damage.fire.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1*this.tier]},get description(){return`${this.value[0]}% Increased Fire Damage`},slot:"weapon",tags:["fire"]}),WEAPON_INCREASED_FROST_DAMAGE:new Affix({name:"Increased Frost Damage",affixes:[["damage.frost.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1*this.tier]},get description(){return`${this.value[0]}% Increased Frost Damage`},slot:"weapon",tags:["frost"]}),WEAPON_INCREASED_LIGHTNING_DAMAGE:new Affix({name:"Increased Lightning Damage",affixes:[["damage.lightning.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1*this.tier]},get description(){return`${this.value[0]}% Increased Lightning Damage`},slot:"weapon",tags:["lightning"]}),WEAPON_INCREASED_AETHER_DAMAGE:new Affix({name:"Increased Aether Damage",affixes:[["damage.aether.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1*this.tier]},get description(){return`${this.value[0]}% Increased Aether Damage`},slot:"weapon",tags:["aether"]}),WEAPON_INCREASED_SACRED_DAMAGE:new Affix({name:"Increased Sacred Damage",affixes:[["damage.sacred.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1*this.tier]},get description(){return`${this.value[0]}% Increased Sacred Damage`},slot:"weapon",tags:["sacred"]}),WEAPON_INCREASED_SHADOW_DAMAGE:new Affix({name:"Increased Shadow Damage",affixes:[["damage.shadow.increased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1*this.tier]},get description(){return`${this.value[0]}% Increased Shadow Damage`},slot:"weapon",tags:["shadow"]}),WEAPON_MINUS_INIT_START:new Affix({name:"Minus Init Start",affixes:[["initStart","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-4*this.tier]},get description(){return`-${this.value[0]} Init Start`},slot:"weapon",tags:["sword"]}),WEAPON_DECREASED_INIT_RECOVERY:new Affix({name:"Decreased Init Recovery",affixes:[["initRecoveryModifier","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-.08*this.tier]},get description(){return`${this.value[0]}% Decreased Attack Recovery`},slot:"weapon",tags:["sword","one-handed"]}),ARMOR_ADDED_HEALTH_MAX:new Affix({name:"Additional Health",affixes:[["healthMax","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[22*this.tier]},get description(){return`+${100*this.value[1]} Maximum Health`},slot:"armor",tags:["plate"]}),ARMOR_INCREASED_MATERIAL_RESISTANCE_PLATE:new Affix({name:"Plate Increased Material Resistance",affixes:[["resistance.material","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.5*this.tier]},get description(){return`${100*this.value[1]}% increased Material Resistance`},slot:"armor",tags:["plate"]}),ARMOR_MINUS_MATERIAL_DAMAGE:new Affix({name:"Minus Material Damage Taken",affixes:[["reduct.material","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[4*this.tier]},get description(){return`-${this.value[1]}% iMaterial Damage Taken`},slot:"armor",tags:["plate"]}),ARMOR_INCREASED_ELEMENTAL_RESISTANCE_LEATHER:new Affix({name:"Leather Increased Elemental Resistance",affixes:[["resistance.elemental","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.4*this.tier]},get description(){return`${100*this.value[1]}% increased Elemental Resistance`},slot:"armor",tags:["leather"]}),ARMOR_INCREASED_MATERIAL_RESISTANCE_LEATHER:new Affix({name:"Increased Material Resistance",affixes:[["resistance.material","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.3*this.tier]},get description(){return`${100*this.value[1]}% increased Material Resistance`},slot:"armor",tags:["leather"]}),ARMOR_INCREASED_ELEMENTAL_RESISTANCE:new Affix({name:"Increased Elemental Resistance",affixes:[["resistance.elemental","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.2*this.tier]},get description(){return`${100*this.value[1]}% increased Elemental Resistance`},slot:"armor",tags:["plate","cloth"]}),ARMOR_INCREASED_BLOCK_RECOVERY:new Affix({name:"Minus Block Recovery",affixes:[["blockRecovery","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-1*this.tier]},get description(){return`-${this.value[0]} Block Recovery`},slot:"armor",tags:["leather","plater"]}),ARMOR_INCREASED_OCCULT_RESISTANCE:new Affix({name:"Increased Occult Resistance",affixes:[["resistance.occult","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.5*this.tier]},get description(){return`${100*this.value[1]}% increased Occult Resistance`},slot:"armor",tags:["cloth"]}),ARMOR_INCREASED_OCCULT_ABSORB_PERCENT:new Affix({name:"Increased Occult Absorb",affixes:[["absorbPercent.occult","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.2*this.tier]},get description(){return`+${100*this.value[1]}% Occult Absorb`},slot:"armor",tags:["cloth"]}),ARMOR_INCREASED_DEFLECT_CHANCE:new Affix({name:"Increased Deflect Chance",affixes:[["deflectChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.2*this.tier]},get description(){return`${100*this.value[1]}% Increased Deflect Chance`},slot:"armor",tags:["plate"]}),ARMOR_INCREASED_ACTION_SPEED:new Affix({name:"Increased Action Speed",affixes:[["initDecrementModifier","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.12*this.tier]},get description(){return`+${100*this.value[1]}% Action Speed`},slot:"armor",tags:["leather"]}),ARMOR_DECREASED_INIT_RECOVERY:new Affix({name:"Decreased Init Recovery",affixes:[["initRecoveryModifier","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-.08*this.tier]},get description(){return`${this.value[0]}% Decreased Attack Recovery`},slot:"armor",tags:["leather"]}),ARMOR_MINUS_INIT_START:new Affix({name:"Minus Init Start",affixes:[["initStart","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-4*this.tier]},get description(){return`-${this.value[0]} Init Start`},slot:"armor",tags:["leather"]}),ACCESSORY_MINUS_INIT_START:new Affix({name:"Minus Init Start",affixes:[["initStart","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-4*this.tier]},get description(){return`-${this.value[0]} Init Start`},slot:"accessory",tags:["all"]}),ACCESSORY_DECREASED_INIT_RECOVERY:new Affix({name:"Decreased Init Recovery",affixes:[["initRecoveryModifier","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-.08*this.tier]},get description(){return`${this.value[0]}% Decreased Attack Recovery`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_DEFLECT_CHANCE:new Affix({name:"Increased Deflect Chance",affixes:[["deflectChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.2*this.tier]},get description(){return`${100*this.value[1]}% Increased Deflect Chance`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_ACTION_SPEED:new Affix({name:"Increased Action Speed",affixes:[["initDecrementModifier","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.12*this.tier]},get description(){return`+${100*this.value[1]}% Action Speed`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_DIRECT_CHANCE:new Affix({name:"Increased Direct Chance",affixes:[["directChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.2*this.tier]},get description(){return`${100*this.value[0]}% increased Direct Hit Chance`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_CRIT_CHANCE:new Affix({name:"Increased Crit Chance",affixes:[["criticalChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.7*this.tier]},get description(){return`${100*this.value[0]}% increased Crit Chance`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_CRIT_DAMAGE:new Affix({name:"Increased Crit Damage",affixes:[["criticalDamageIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.15*this.tier]},get description(){return`${100*this.value[0]}% increased Crit Damage`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_BLOCK_CHANCE:new Affix({name:"Increased Block Chance",affixes:[["blockChanceIncreased","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[1.2*this.tier]},get description(){return`${100*this.value[0]}% increased Block Chance`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_BLOCK_RECOVERY:new Affix({name:"Minus Block Recovery",affixes:[["blockRecovery","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[-1*this.tier]},get description(){return`-${this.value[0]} Block Recovery`},slot:"accessory",tags:["all"]}),ACCESSORY_ADDED_HEALTH_MAX:new Affix({name:"Additional Health",affixes:[["healthMax","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[18*this.tier]},get description(){return`+${100*this.value[1]} Maximum Health`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_ELEMENTAL_RESISTANCE:new Affix({name:"Increased Elemental Resistance",affixes:[["resistance.elemental","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.4*this.tier]},get description(){return`${100*this.value[1]}% increased Elemental Resistance`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_MATERIAL_RESISTANCE:new Affix({name:"Increased Material Resistance",affixes:[["resistance.material","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.3*this.tier]},get description(){return`${100*this.value[1]}% increased Material Resistance`},slot:"accessory",tags:["all"]}),ACCESSORY_INCREASED_OCCULT_RESISTANCE:new Affix({name:"Increased Occult Resistance",affixes:[["resistance.occult","+"]],tier:1,profiency:0,profiencyNext:100,get value(){return[.5*this.tier]},get description(){return`${100*this.value[1]}% increased Occult Resistance`},slot:"accessory",tags:["all"]})};!function(S){S.COM||(S.COM={}),S.COM.Affix=Affix,S.COM.affixes=affixes}(setup);
/* twine-user-script #9: "__quest.min.js" */
const DEFAULT_QUEST={debug:!0,playerLoc:null,sequences:null,interactables:[],sequence:0,guild:{},subquest:0,sequenceLoaded:!1};class Quest{constructor(obj){return jQuery.extend(!0,this,DEFAULT_QUEST,obj),null===this.playerLoc&&console.error("This quest does not have a player starting location."),null===this.sequences&&console.error("This quest has no sequences."),this}static increaseSequence(){let sv=State.variables;sv.quest.sequence+=1,sv.quest.sequenceLoaded=!1}clone(){return new this.constructor(this,{},!0)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.quest||(S.quest={}),S.quest.Quest=Quest}(setup);
/* twine-user-script #10: "__sequence.min.js" */
const DEFAULT_SEQUENCE={interactables:[],conditional:function(){},objective:"",mapBackground:""};class Sequence{constructor(obj){return jQuery.extend(!0,this,DEFAULT_SEQUENCE,obj),""===this.objective&&console.error("Sequence has an empty objective."),this}clone(){return new this.constructor(this,{},!0)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.quest||(S.quest={}),S.quest.Sequence=Sequence}(setup);
/* twine-user-script #11: "_attacks.min.js" */
class Attack{constructor(obj){jQuery.extend(!0,this,DEFAULT_ATTACK,obj),null===this.family&&console.error(`${this.name}'s family is null.`),null===this.targets.style&&console.error(`Attack: ${this.name} has no targets.style.`),void 0===this.description&&(console.error(`Attack: ${this.name} lacks a description.`),this.description="Description missing.")}getInfo(attacker){let dmg=this.damage,solstr='<span id="AttackInformationPlate">';solstr+=`<span id='infoName'>${this.name} <span id='infoVariant'>#${this.type.toUpperCase()}</span></span>`,solstr+=`<span id='infoAttackDescription'>${this.description}</span>`,solstr+="<span class='divider'></span>",solstr+="<span id='infoMetrics'><span class='infoSectionHeader'>METRICS</span>",solstr+="<grid id='infoMetricsAttacksGrid'>",solstr+=`<span id='infoWDM'>WDM<br>${Math.floor(100*this.wdm)}%</span>`,solstr+=`<span id='init'>Recovery<br>+${Math.ceil(this.initRecovery*attacker.initRecoveryModifier)}<span class='infoMax'> init</span></span>`;let iCritChance=Math.ceil((this.criticalChanceBase+attacker.criticalChanceBase)*(this.criticalChanceIncreased+attacker.criticalChanceIncreased)*(this.criticalChanceMore*attacker.criticalChanceMore)*100),iCritDamage=`<span class='infoMax'>${+((this.criticalDamageBase+attacker.criticalDamageBase)*(this.criticalDamageIncreased+attacker.criticalDamageIncreased)*(this.criticalDamageMore*attacker.criticalDamageMore)).toFixed(2)}x</span>`;solstr+=iCritChance<=5?`<span id='infoCrit' class='infoDarkGrey'>Critical<br>${iCritChance}%<br>${iCritDamage}</span>`:`<span id='infoCrit'>Critical<br>${iCritChance}%<br>${iCritDamage}</span>`;let iDirectChance=Math.ceil((this.directChanceBase+attacker.directChanceBase)*(this.directChanceIncreased+attacker.directChanceIncreased)*(this.directChanceMore*attacker.directChanceMore)*100),targetStr;solstr+=iDirectChance<=5?`<span id='infoDirect' class='infoDarkGrey'>Direct<br>${iDirectChance}%</span>`:`<span id='infoDirect'>Direct<br>${iDirectChance}%</span>`;let targetSide=this.targets.side?this.targets.side.charAt(0).toUpperCase()+this.targets.side.slice(1):null,targetRow=this.targets.row?this.targets.row.charAt(0).toUpperCase()+this.targets.row.slice(1):null;switch(this.targets.style){case"all":targetStr="Targets Everyone";break;case"side":targetStr=`Targets ${targetSide} Side`;break;case"row":targetStr=`Targets ${targetSide} Side's ${targetRow} Row`;break;case"single":targetStr=`Targets an ${targetSide} on the ${targetRow}row`;break;case"self":targetStr="Targets Self"}solstr+=`<span id='infoTargets'>${targetStr}</span>`,solstr+="</grid></span>",this.buffs.length>0&&(solstr+="<span id='infoSpecial'><span class='infoSectionHeader'>SPECIAL INFORMATION</span>",solstr+="<grid id='infoSpecialGrid'>",solstr+=`<span id='infoBuffs'>Applies ${this.buffs[0].name} to targets.</span>`,solstr+="</grid></span>");let totalMin=0,totalMax=0;function getDmgString(sub,attack){let min=dmg[sub].min+attacker.damage[sub].min,max=dmg[sub].max+attacker.damage[sub].max,increased=dmg[sub].increased+attacker.damage[sub].increased,more=dmg[sub].more*attacker.damage[sub].more,minCalculated=Math.floor(min*(1+increased)*more*attack.wdm),maxCalculated=Math.ceil(max*(1+increased)*more*attack.wdm);totalMin+=minCalculated,totalMax+=maxCalculated;let minstr=+minCalculated.toFixed(2),maxstr=+maxCalculated.toFixed(2),isZeroedClass="";return 0===minCalculated&&0===maxCalculated&&(isZeroedClass=" infoDarkGrey"),`class='info${sub.replace(/^\w/,c=>c.toUpperCase())} ${isZeroedClass}'>${sub.replace(/^\w/,c=>c.toUpperCase())}<br>${minstr} - ${maxstr}`}totalMin=+totalMin.toFixed(2),totalMax=+totalMax.toFixed(2);let iBluntDmg=getDmgString("blunt",this),iPierceDmg=getDmgString("pierce",this),iAcidDmg=getDmgString("acid",this),iFireDmg=getDmgString("fire",this),iFrostDmg=getDmgString("frost",this),iLightningDmg=getDmgString("lightning",this),iShadowDmg=getDmgString("shadow",this),iSacredDmg=getDmgString("sacred",this),iAetherDmg=getDmgString("aether",this);return solstr+="<span id='infoDamage'><span class='infoSectionHeader'>Damage</span>",solstr+="<grid id='infoDamageGrid'>",0!==totalMin||0!==totalMax?(solstr+=`<span id='infoDamageTotal'>Total: ${totalMin} - ${totalMax}</span>`,1===this.hitnumber?solstr+=`<span id='infoDamageHitNumber' class='infoDarkGrey'>Hits ${this.hitnumber} Time</span>`:solstr+=`<span id='infoDamageHitNumber'>Hits ${this.hitnumber} Times</span>`,solstr+="<span class='infoMaterial infoUpper'>Material</span>",solstr+=`<span ${iBluntDmg}</span>`,solstr+=`<span ${iPierceDmg}</span>`,solstr+=`<span ${iAcidDmg}</span>`,solstr+="<span class='infoElemental infoUpper'>Elemental</span>",solstr+=`<span ${iFireDmg}</span>`,solstr+=`<span ${iFrostDmg}</span>`,solstr+=`<span ${iLightningDmg}</span>`,solstr+="<span class='infoOccult infoUpper'>Occult</span>",solstr+=`<span ${iShadowDmg}</span>`,solstr+=`<span ${iSacredDmg}</span>`,solstr+=`<span ${iAetherDmg}</span>`):solstr+="<span id='infoDamageTotal' class='infoDarkGrey'>Deals no damage.</span>",solstr+="</grid></span>",solstr}}const ATTACKS={all:new Attack({name:"Hits All",family:["debugAttacks"],targets:{style:"all",side:null,row:null},damage:{pierce:{min:1,max:1}},type:"buff",wdm:0,buffs:[BUFFS.buffAmp],description:"DEBUG: You hit everyone applying a strong buff."}),enemyside:new Attack({name:"Hit Enemy Side",family:["debugAttacks"],targets:{style:"side",side:"enemy",row:null},damage:{pierce:{min:1,max:1}},description:"DEBUG: You hit every enemy."}),allyside:new Attack({name:"Hit Ally Side",family:["debugAttacks"],targets:{style:"side",side:"ally",row:null},damage:{pierce:{min:1,max:1}},description:"DEBUG: You hit every ally."}),enemyrow:new Attack({name:"Hit Enemy Row",family:["debugAttacks"],targets:{style:"row",side:"enemy",row:"both"},damage:{pierce:{min:1,max:1}},description:"DEBUG: You hit every enemy in the specified row."}),allyrow:new Attack({name:"Hit Ally Row",family:["debugAttacks"],targets:{style:"row",side:"ally",row:"both"},damage:{pierce:{min:1,max:1}},description:"DEBUG: You hit every ally in the specified row."}),anyattack:new Attack({name:"Hit Any Single",family:["debugAttacks"],targets:{style:"single",side:"both",row:"both"},damage:{pierce:{min:1,max:1}},description:"DEBUG: You hit every ally in the specified row."}),selfattack:new Attack({name:"Hit Self",family:["debugAttacks"],targets:{style:"self",side:null,row:null},damage:{pierce:{min:1,max:1}},description:"DEBUG: You hit every ally in the specified row."}),flick:new Attack({name:"Flick",family:["unarmedAttacks"],initRecovery:14,wdm:.5,targets:{style:"single",side:"enemy",row:"front"},damage:{pierce:{min:1,max:2}},stun:5,description:"You flick your opponent, causing them to blink in surpise."}),gutpunch:new Attack({name:"Gut Punch",family:["unarmedAttacks"],initRecovery:28,wdm:1.75,targets:{style:"single",side:"enemy",row:"front"},damage:{blunt:{min:4,max:4}},stun:18,description:"Slam your fist into the enemy's gut, causing them to crunch over."}),doublestrike:new Attack({name:"Double Strike",wdm:.75,family:["unarmedAttacks"],initRecovery:25,targets:{style:"single",side:"enemy",row:"front"},description:"You hit your enemy for damage twice.",hitnumber:2,damage:{blunt:{min:3,max:3}}}),amp:new Attack({name:"Amped Up",wdm:0,family:["unarmedAttacks"],initRecovery:20,type:"buff",targets:{style:"self",side:null,row:null},description:"You hit your enemy for damage twice.",buffs:[BUFFS.buffAmp]}),doublelegsweep:new Attack({name:"Double Leg Sweep",wdm:.25,family:["unarmedAttacks"],initRecovery:22,targets:{style:"row",side:"enemy",row:"front"},description:"You sweep the legs of your foes twice.",hitnumber:2,damage:{blunt:{min:4,max:4}},stun:4}),stab:new Attack({name:"Stab",family:["spearWeaponAttacks"],initRecovery:24,wdm:1.25,targets:{style:"single",side:"enemy",row:"front"},damage:{pierce:{min:4,max:7,increased:.5}},description:"Stab at your foe, doing extra pierce damage."}),rapidjab:new Attack({name:"Rapid Jab",family:["spearWeaponAttacks"],initRecovery:46,wdm:.75,targets:{style:"single",side:"enemy",row:"front"},hitnumber:3,damage:{pierce:{min:1,max:1}},description:"Rapidly jab at your foe three times."}),sweep:new Attack({name:"Sweep",family:["spearWeaponAttacks"],initRecovery:28,wdm:1.25,targets:{style:"row",side:"enemy",row:"front"},damage:{pierce:{min:1,max:3}},description:"Sweep at the foes in front of you."}),spearposture:new Attack({wdm:0,name:"Posture",family:["spearWeaponAttacks"],initRecovery:20,type:"buff",targets:{style:"self",side:null,row:null},description:"You posture yourself, making it harder to hit you.",buffs:[BUFFS.buffSpearPosture]}),chaoschuck:new Attack({name:"Chaos Chuck",family:["chaoticspearWeaponAttacks"],initRecovery:30,wdm:2,targets:{style:"single",side:"enemy",row:"both"},description:"Chuck your chaos spear at an enemy, dealing increased Occult damage.",damage:{aether:{increased:.5},shadow:{increased:.5},sacred:{increased:.5}}}),chaoticsacrifice:new Attack({name:"Chaotic Sacrifice",family:["chaoticspearWeaponAttacks"],initRecovery:24,wdm:0,type:"buff",targets:{style:"self",side:null,row:null},description:"Sacrifice 10% of your current life to buff your occult damage.",buffs:[BUFFS.buffSacrificeToChaos]}),unerringbolt:new Attack({name:"Unerring Bolt",family:["chaoticspearWeaponAttacks"],wdm:1.25,initRecovery:24,targets:{style:"single",side:"enemy",row:"both"},damage:{aether:{increased:1},sacred:{increased:.5},shadow:{increased:.5},lightning:{increased:1}},description:"Turns your spear into a chaotic bolt, which your opponent cannot deflect.",isDeflectable:!1}),backlinebolts:new Attack({name:"Backline Bolts",family:["chaoticspearWeaponAttacks"],wdm:.5,initRecovery:24,targets:{style:"row",side:"enemy",row:"back"},description:"Hits the enemy backline with a dose of lightning and aether.",damage:{aether:{min:2,max:4,increased:1},lightning:{min:2,max:4,increased:1}}}),shieldposture:new Attack({name:"Posture",family:["swordandshieldWeaponAttacks","maceandshieldWeaponAttacks","shieldWeaponAttacks"],initRecovery:20,wdm:0,type:"buff",targets:{style:"self",side:null,row:null},description:"You posture yourself, increasing your block.",buffs:[BUFFS.buffShieldPosture]}),shieldbash:new Attack({name:"Shield Bash",family:["swordandshieldWeaponAttacks","maceandshieldWeaponAttacks","shieldWeaponAttacks"],initRecovery:22,wdm:1,targets:{style:"single",side:"enemy",row:"front"},description:"Bash your shield at the enemy with an increased chance to direct hit.",damage:{blunt:{min:3,max:6,increased:.75}},directChanceBase:.06,directChanceMore:1.3}),swipe:new Attack({name:"Swipe",family:["swordandshieldWeaponAttacks"],initRecovery:22,wdm:1,targets:{style:"single",side:"enemy",row:"front"},description:"Slash your sword at a target.",damage:{pierce:{min:1,max:3}}}),thrust:new Attack({name:"Thrust",family:["swordandshieldWeaponAttacks"],initRecovery:22,wdm:1,targets:{style:"single",side:"enemy",row:"front"},description:"Thrust your sword at the enemy with an increased chance to critically hit, but also easier to deflect.",damage:{pierce:{min:1,max:3}},criticalChanceBase:.06,criticalChanceMore:1.3,deflectCalculated:-.25,blockCalculated:0}),bash:new Attack({name:"Bash",family:["maceandshieldWeaponAttacks"],initRecovery:22,wdm:1,targets:{style:"single",side:"enemy",row:"front"},description:"Bash your mace at a target, with an increased chance of direct hit.",damage:{blunt:{min:2,max:3}},stun:5,directChanceBase:.06,directChanceMore:1.3}),doublesmash:new Attack({name:"Double Smash",family:["maceandshieldWeaponAttacks"],initRecovery:28,wdm:.75,targets:{style:"single",side:"enemy",row:"front"},description:"Smash your target twice.",damage:{blunt:{min:1,max:2}},hitnumber:2}),whirlwind:new Attack({name:"Whirlwind",family:["twohandedaxeWeaponAttacks"],initRecovery:35,wdm:.25,targets:{style:"row",side:"enemy",row:"front"},description:"Spin yourself around thrice and hit foes multiple times.",hitnumber:3,buffs:[BUFFS.debuffBleed]}),wideslash:new Attack({name:"Wide Slash",family:["twohandedaxeWeaponAttacks"],initRecovery:22,wdm:.75,targets:{style:"row",side:"enemy",row:"front"},description:"Slash at all the enemies in front of you.",damage:{pierce:{min:1,max:2,increased:.25}},buffs:[BUFFS.debuffBleed]}),overheadchop:new Attack({name:"Overhead Chop",family:["twohandedaxeWeaponAttacks"],initRecovery:32,wdm:2,targets:{style:"single",side:"enemy",row:"front"},description:"Deliver a critical overhead chop to the enemy.",damage:{pierce:{min:2,max:4}},buffs:[BUFFS.debuffBleed],criticalChanceBase:.06,criticalChanceMore:1.3,criticalDamageMore:1.3,deflectCalculated:-.25}),lumberjackstance:new Attack({name:"Lumberjack Stance",family:["twohandedaxeWeaponAttacks"],initRecovery:20,wdm:0,type:"buff",targets:{style:"self",side:null,row:null},description:"Buff yourself to deal more pierce damage.",buffs:[BUFFS.buffLumberjackStance]}),snipe:new Attack({name:"Snipe",family:["bowWeaponAttacks"],initRecovery:32,wdm:2.25,targets:{style:"single",side:"enemy",row:"both"},description:"Snipe your enemy.",damage:{pierce:{min:1,max:3,increased:.25}},criticalChanceBase:.06,criticalChanceMore:1.3}),rainofarrows:new Attack({name:"Rain of Arrows",family:["bowWeaponAttacks"],initRecovery:22,wdm:.5,targets:{style:"side",side:"enemy",row:null},description:"Rain arrows onto your enemy.",damage:{pierce:{min:1,max:3}}}),checkquiver:new Attack({name:"Check Quiver",family:["bowWeaponAttacks"],initRecovery:20,wdm:0,targets:{style:"self",side:null,row:null},type:"buff",description:"Ensure everything is correct with your ammo, increasing your action speed.",buffs:[BUFFS.buffCheckQuiver]}),sharptiparrows:new Attack({name:"Sharp-Tip Arrows",family:["bowWeaponAttacks"],initRecovery:24,wdm:0,targets:{style:"self",side:null,row:null},type:"buff",description:"Switch to Sharp-Tip Arrows, increasing your chance to critically hit.",buffs:[BUFFS.buffSharpTipArrows]}),VILE_BITE:new Attack({wdm:2,name:"Vile Bite",initRecovery:22,family:["mommySpider","Ghoul"],targets:{style:"single",side:"enemy",row:"front"},damage:{pierce:{min:1,max:2,increased:1.75},acid:{min:1,max:2,increased:1.75}},buffs:[BUFFS.debuffPoisoned],description:"A vile bite, inflicting pierce and acid damage."}),WEB_SHOT:new Attack({wdm:0,name:"Web Shot",type:"spell",family:["mommySpider"],initRecovery:16,targets:{style:"side",side:"enemy",row:null},damage:{frost:{min:6,max:9},acid:{min:6,max:9}},description:"A gooey web that slows down the opponent.",buffs:[BUFFS.debuffWebShot]}),EIGHT_LEGGED_RUSH:new Attack({wdm:2,name:"Eight Legged Rush",family:["mommySpider"],initRecovery:34,targets:{style:"side",side:"enemy",row:null},damage:{blunt:{increased:1.25}},description:"The spider rushes through your party."}),CREEPY_CRAWLIES:new Attack({name:"Creepy Crawlies",family:["babySpider"],initRecovery:35,stun:1,hitnumber:2,targets:{style:"single",side:"enemy",row:"front"},damage:{blunt:{min:1,max:3}},description:"Ew! The little baby spider is crawling on you!"}),HOG_RUSH:new Attack({name:"Hog Rush",family:["Hog"],initRecovery:22,targets:{style:"side",side:"enemy",row:null},damage:{blunt:{increased:1.25}},description:"A hog's tackle."}),HOG_GORE:new Attack({name:"Hog Gore",wdm:1.25,family:["Hog"],initRecovery:24,targets:{style:"single",side:"enemy",row:"front"},damage:{pierce:{increased:1.25}},description:"The hog impales it's enemy with it's tusks, causing bleeding",buffs:[BUFFS.debuffBleed]}),HOG_ROAR:new Attack({name:"Hog Gore",wdm:0,family:["Hog"],type:"buff",initRecovery:20,targets:{style:"self",side:null,row:null},description:"The hog roars, increasing it's material resistance.",buffs:[BUFFS.buffHogRoar]}),cuddlebutt:new Attack({name:"Cuddle Butt",family:["Carbuncle"],initRecovery:22,targets:{style:"single",side:"enemy",row:"front"},damage:{blunt:{min:1,max:2,increased:.5}},description:"An adorable little attack that inspires awe in its enemies."}),crystalshot:new Attack({wdm:0,name:"Crystal Shot",type:"spell",family:["Carbuncle"],initRecovery:14,targets:{style:"single",side:"enemy",row:"both"},damage:{pierce:{min:9,max:14}},description:"A piercing candle stick's worth of crystal is summoned and shot through the air."}),acidicshot:new Attack({wdm:0,name:"Acid Crystal Shot",type:"spell",family:[],initRecovery:14,targets:{style:"single",side:"enemy",row:"both"},damage:{acid:{min:9,max:14}},description:"An acidic bolt."}),rockfall:new Attack({wdm:0,name:"Rock Fall",type:"spell",family:[],initRecovery:41,hitnumber:3,targets:{style:"row",side:"enemy",row:"both"},damage:{blunt:{min:4,max:7}},deflectCalculated:-.5,description:"An avalanche of rocks falls on the enemy. Easily deflected."}),firewall:new Attack({wdm:0,name:"Fire Wall",type:"spell",family:[],initRecovery:18,targets:{style:"row",side:"enemy",row:"both"},damage:{fire:{min:5,max:9}},description:"Blazes a wall of fire on your enemies.",buffs:[BUFFS.debuffFirewall]}),iceprison:new Attack({wdm:0,name:"Ice Prison",type:"spell",family:[],initRecovery:28,targets:{style:"single",side:"enemy",row:"both"},damage:{frost:{min:5,max:9}},description:"Freezes one of your units, lowering their action speed.",buffs:[BUFFS.debuffIcePrison]}),flash:new Attack({wdm:0,name:"Flash",type:"spell",family:[],initRecovery:28,targets:{style:"side",side:"enemy",row:null},damage:{lightning:{min:1,max:1}},description:"A bright light momentarily blinds the enemy..",stun:7}),rattle:new Attack({wdm:0,name:"Rattle",type:"debuff",family:["Skeleton"],initRecovery:28,targets:{style:"side",side:"enemy",row:null},description:"Strikes fear into the hearts of your enemies, lowering their blunt resistance.",buffs:[BUFFS.debuffRattle]}),cackle:new Attack({wdm:0,name:"Cackle",type:"spell",family:["Skeleton"],initRecovery:20,type:"debuff",targets:{style:"self",side:null,row:null},description:"Cackle in your madness, buffing your blunt damage.",buffs:[BUFFS.buffCackle]}),healUndead:new Attack({wdm:0,name:"Heal Undead",type:"spell",family:["Skeleton"],initRecovery:28,targets:{style:"all",side:null,row:null},description:"Heals all undead units in combat by 20%.",buffs:[BUFFS.buffHealUndead]}),herdmentor:new Attack({wdm:0,name:"Herd Mentor",type:"buff",family:[],initRecovery:28,targets:{style:"side",side:"ally",row:null},description:"Encourage your teammates, reducing their attack recovery.",buffs:[BUFFS.buffHerdMentor]}),stampede:new Attack({wdm:1,name:"Stampede",type:"attack",family:["Centaur"],initRecovery:26,targets:{style:"side",side:"enemy",row:null},damage:{blunt:{increased:1.25}},description:"Stampede your way through your enemies.",stun:3}),stomp:new Attack({wdm:1,name:"Stomp",type:"attack",family:["Centaur"],initRecovery:22,targets:{style:"single",side:"enemy",row:"front"},description:"Stomp on an enemy with increased blunt damage.",stun:3,damage:{blunt:{min:1,max:2,increased:1.25}}}),regenerate:new Attack({wdm:0,name:"Regenerate",initRecovery:20,family:["Ghoul"],targets:{style:"self",side:null,row:null},buffs:[BUFFS.buffRegenerate],description:"Regenerate life over time."}),ghoulscreech:new Attack({name:"Ghoul Screech",family:["Ghoul"],initRecovery:28,wdm:0,targets:{style:"side",side:"ally",row:null},type:"buff",description:"Inspire your allies to attack more often.",buffs:[BUFFS.buffGhoulScreech]}),poisonedClaw:new Attack({wdm:1.25,name:"Poisoned Claw",initRecovery:24,family:["Ghoul"],targets:{style:"single",side:"enemy",row:"front"},buffs:[BUFFS.debuffPoisoned],description:"Slash your target with a particularly nasty claw.",damage:{pierce:{increased:.75},acid:{increased:.75}}})},FAMILY_ATTACKS={};for(let key in ATTACKS)if(ATTACKS[key].family)for(let idx in ATTACKS[key].family)FAMILY_ATTACKS[ATTACKS[key].family[idx]]||(FAMILY_ATTACKS[ATTACKS[key].family[idx]]=[]),FAMILY_ATTACKS[ATTACKS[key].family[idx]].push(ATTACKS[key]);!function(S){S.COM||(S.COM={}),S.COM.ATTACKS=ATTACKS,S.COM.FAMILY_ATTACKS=FAMILY_ATTACKS}(setup);
/* twine-user-script #12: "_city_guildhall2.min.js" */
class GuildHall{constructor(cityMenu){this.cityMenu=cityMenu,this.potentialPartners=[];let solHTML="";solHTML+="<span id='guildHallImage' class='guildHall'>Image</span>",solHTML+="<span id='guildHallQuests' class='cityButton guildHall'>Quests NYI</span>",solHTML+="<span id='guildHallSwapMembers' class='cityButton guildHall'>swap members</span>",solHTML+="<span id='exitCity' class='cityButton guildHall'>Leave Guild Hall</span>",this.menuHTML=solHTML}display(){let menu=this;$("#city-menu").html(""),$("#city-menu").html(menu.menuHTML),$("#guildHallSwapMembers").click((function(){menu.displaySwap()})),$("#exitCity.guildHall").click((function(){menu.back()}))}displaySwap(){let menu=this;$("#city-menu").html(""),$("#city-menu").wiki("<<include Party_Preset_Select>>"),$("#city-menu").append("<span id='exitCity' class='cityButton swapMembers'>Back</span>"),$("#exitCity").click((function(){menu.display()}))}back(){$("#city-menu").html(""),this.cityMenu.display()}}!function(S){S.map||(S.map={})}(setup);
/* twine-user-script #13: "_city_inn2.min.js" */
const DEFAULT_INN={name:"Unknown Name"};class Inn{constructor(cityMenu,obj){let sv=State.variables;jQuery.extend(!0,this,DEFAULT_INN,obj),this.cityMenu=cityMenu,this.potentialPartners=[],this.generateMenu(),sv.innInstance=this}generateMenu(){let sv=State.variables,solHTML="";function writeEquipmentButtons(char,varName){if(void 0===char)return[`<span id='equipmentViewingButtons' class=${varName}>Char Not Found</span>`,[function(){}]];let solstr="",eventListeners=[];return solstr+=`<span id='equipmentViewingButtons' class=${varName}>`,solstr+=`<span id='equipmentViewingName' class=${varName}>${char.name}</span>`,solstr+=`<span class='itemPlate weapon ${varName}'>${char.equippables.weapon.name}`,solstr+=`<span id='weaponInfoScreenButtons' class='itemPlateButtonHolder weapon ${varName}'>`,solstr+=`<button class="macro-but ${varName} equip" type="button" role="button" tabindex="0">Equip</button>`,eventListeners.push((function(){$(`#equipmentViewingButtons.${varName} .itemPlate.weapon button.equip`).click((function(){Dialog.setup("Equip Your Weapons","dialogEquipmentSwap"),Dialog.wiki(`<<SlotMenuInfo weapon $${varName}>>`),Dialog.open()}))})),"unequipped"!==char.equippables.weapon.type?(solstr+=`<button class="macro-but ${varName} mod" type="button" role="button" tabindex="0">Mods</button>`,eventListeners.push((function(){$(`#equipmentViewingButtons.${varName} .itemPlate.weapon button.mod`).click((function(){Dialog.setup("Mod Your Weapons","dialogEquipmentSwap"),Dialog.wiki(`<<SlotModMenuInfo weapon $${varName}>>`),Dialog.open()}))}))):solstr+=`<button class="macro-but ${varName} disabled" type="button" role="button" tabindex="0">Mods</button>`,solstr+="</span>",solstr+="</span>",solstr+=`<span class='itemPlate armor ${varName}'>${char.equippables.armor.name}`,solstr+=`<span id='armorInfoScreenButtons' class='itemPlateButtonHolder armor ${varName}'>`,solstr+=`<button class="macro-but ${varName} equip" type="button" role="button" tabindex="0">Equip</button>`,eventListeners.push((function(){$(`#equipmentViewingButtons.${varName} .itemPlate.armor button.equip`).click((function(){Dialog.setup("Equip Your Armor","dialogEquipmentSwap"),Dialog.wiki(`<<SlotMenuInfo armor $${varName}>>`),Dialog.open()}))})),"unequipped"!==char.equippables.armor.type?(solstr+=`<button class="macro-but ${varName} mod" type="button" role="button" tabindex="0">Mods</button>`,eventListeners.push((function(){$(`#equipmentViewingButtons.${varName} .itemPlate.armor button.mod`).click((function(){Dialog.setup("Mod Your Armor","dialogEquipmentSwap"),Dialog.wiki(`<<SlotModMenuInfo armor $${varName}>>`),Dialog.open()}))}))):solstr+=`<button class="macro-but ${varName} disabled" type="button" role="button" tabindex="0">Mods</button>`,solstr+="</span>",solstr+="</span>",solstr+=`<span class='itemPlate accessory ${varName}'>${char.equippables.accessory.name}`,solstr+=`<span id='accessoryInfoScreenButtons' class='itemPlateButtonHolder accessory ${varName}'>`,solstr+=`<button class="macro-but ${varName} equip" type="button" role="button" tabindex="0">Equip</button>`,eventListeners.push((function(){$(`#equipmentViewingButtons.${varName} .itemPlate.accessory button.equip`).click((function(){Dialog.setup("Equip Your Accessories","dialogEquipmentSwap"),Dialog.wiki(`<<SlotMenuInfo accessory $${varName}>>`),Dialog.open()}))})),"unequipped"!==char.equippables.accessory.type?(solstr+=`<button class="macro-but ${varName} mod" type="button" role="button" tabindex="0">Mods</button>`,eventListeners.push((function(){$(`#equipmentViewingButtons.${varName} .itemPlate.accessory button.mod`).click((function(){Dialog.setup("Mod Your Accessories","dialogEquipmentSwap"),Dialog.wiki(`<<SlotModMenuInfo accessory $${varName}>>`),Dialog.open()}))}))):solstr+=`<button class="macro-but ${varName} disabled" type="button" role="button" tabindex="0">Mods</button>`,solstr+="</span>",solstr+="</span>",solstr+="</span>",[solstr,eventListeners]}let charEventListeners=[],pcHTML=writeEquipmentButtons(sv.pc,"pc");solHTML+=pcHTML[0],pcHTML[1].forEach(func=>{charEventListeners.push(func)});let ppHTML=writeEquipmentButtons(sv.pp,"pp");solHTML+=ppHTML[0],ppHTML[1].forEach(func=>{charEventListeners.push(func)});let tp1HTML=writeEquipmentButtons(sv.tp1,"tp1");solHTML+=tp1HTML[0],tp1HTML[1].forEach(func=>{charEventListeners.push(func)});let tp2HTML=writeEquipmentButtons(sv.tp2,"tp2");solHTML+=tp2HTML[0],tp2HTML[1].forEach(func=>{charEventListeners.push(func)}),solHTML+="<span id='exitCity' class='cityButton cityInn'>Leave Inn</span>",this.menuHTML=solHTML,this.menuEL=charEventListeners}display(){let menu=this;$("#city-menu").html(""),$("#city-menu").html(menu.menuHTML);for(let charEL of this.menuEL)charEL();$("#exitCity.cityInn").click((function(){menu.back()}))}back(){State.variables.innInstance=void 0,$("#city-menu").html(""),this.cityMenu.display()}}!function(S){S.map||(S.map={})}(setup);
/* twine-user-script #14: "_city_menu2.min.js" */
let DEFAULTCITYMENU={name:"Unknown City",generateCity:!0,hasGuildHall:!1,hasInn:!0,innHandler:function(menu){new setup.tb.TextBox(setup.tbs.inn_tbs.random()),$(document).one(":textboxclosed",(function(){let inn;new Inn(menu).display()}))},hasShop:!1,hasBazaar:!1,hasGatherInfo:!0,gatherInfoHandler:function(menu,uuid){new setup.tb.TextBox(setup.tbs.gatherinfo_tbs[0])},hasTavern:!0,tavernHandler:function(menu,uuid){new setup.tb.TextBox(setup.tbs.tavern_tbs[0])},hasCrafting:!1,craftingType:"none"};class CityMenu{constructor(obj){State.variables.quest.citiesMade?State.variables.quest.citiesMade+=1:State.variables.quest.citiesMade=0,obj.generateCity,jQuery.extend(!0,this,DEFAULTCITYMENU,obj),this.shortenedName=this.name.replace(/^(.{1,10}[^\s]*).*/,"$1").replace(/\s+/g,"").toLowerCase(),"unknowncity"===this.shortenedName&&console.error("City lacks a name.");let solHTML="";switch(solHTML+="<span id='cityImage'></span>",solHTML+=`<span id='cityName'>${this.name}</span>`,this.hasGuildHall?solHTML+="<span id='cityGuildHall' class='cityButton'>Guild Hall</span>":solHTML+="<span id='cityGuildHall' class='noBuilding'></span>",this.hasInn?solHTML+="<span id='cityInn' class='cityButton'>Inn</span>":solHTML+="<span id='cityInn' class='noBuilding'></span>",this.hasShop=!1,this.hasShop?solHTML+="<span id='cityShop' class='cityButton'>Shop</span>":solHTML+="<span id='cityShop' class='noBuilding'></span>",this.hasBazaar=!1,this.hasBazaar?solHTML+="<span id='cityBazaar' class='cityButton'>Bazaar</span>":solHTML+="<span id='cityBazaar' class='noBuilding'></span>",this.hasGatherInfo?(this.timesVisitedGatheredInfo=0,solHTML+="<span id='cityGatherInfo' class='cityButton'>Gather Info</span>"):solHTML+="<span id='cityGatherInfo' class='noBuilding'></span>",this.hasTavern?(this.timesVisitedTavern=0,solHTML+="<span id='cityTavern' class='cityButton'>Visit Tavern</span>"):solHTML+="<span id='cityTavern' class='noBuilding'></span>",this.craftingType="false",this.craftingType.toLowerCase()){case"jewelcrafter":solHTML+="<span id='cityCrafting' class='cityButton cityJewelcrafter'>Visit Jeweler</span>";break;case"blacksmith":solHTML+="<span id='cityCrafting' class='cityButton cityBlacksmith'>Visit Blacksmith</span>";break;case"leatherworker":solHTML+="<span id='cityCrafting' class='cityButton cityLeatherwork'>Visit Leatherworker</span>";break;case"tailor":solHTML+="<span id='cityCrafting' class='cityButton cityTailor'>Visit Tailor</span>";break;case"shrine":solHTML+="<span id='cityCrafting' class='cityButton cityShrine'>Visit Shrine</span>";break;case"alchemist":solHTML+="<span id='cityCrafting' class='cityButton cityAlchemist'>Visit Alchemist</span>";break;default:solHTML+="<span id='cityCrafting' class='noBuilding'></span>"}solHTML+=`<span id='exitCity' class='cityButton ${this.shortenedName}'>Exit</span>`,this.menuHTML=solHTML}display(){let sv=State.variables,menu=this;sv.PrevGameState=sv.GameState,sv.GameState="citymenu",$("#city-menu").html(this.menuHTML),this.hasGuildHall&&$("#cityGuildHall").click((function(){if("citymenu"===sv.GameState){let guildhall;new GuildHall(menu).display()}})),this.hasInn&&$("#cityInn").click((function(){"citymenu"===sv.GameState&&menu.innHandler(menu)})),this.hasShop,this.hasBazaar,this.hasGatherInfo&&$("#cityGatherInfo").click((function(){"citymenu"===sv.GameState&&(menu.timesVisitedGatheredInfo+=1,menu.gatherInfoHandler(menu,sv.uuid))})),this.hasTavern&&$("#cityTavern").click((function(){"citymenu"===sv.GameState&&(menu.timesVisitedTavern+=1,menu.tavernHandler(menu,sv.uuid))})),this.craftingType.toLowerCase(),$(`#exitCity.${this.shortenedName}`).click((function(){menu.hide()})),$("#city-menu-container").removeClass("hidden")}hide(){let sv=State.variables;sv.GameState="map",sv.PrevGameState="citymenu",$("#city-menu").html(""),$("#city-menu-container").addClass("hidden")}clone(){return new this.constructor(this)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.map||(S.map={}),S.map.CityMenu=CityMenu}(setup);
/* twine-user-script #15: "_combat.min.js" */
class CombatInstance{constructor(obj){jQuery.extend(!0,this,obj),this.log=[],this.epfrontlineTargetable=!1,this.epbacklineTargetable=!1,this.ppfrontlineTargetable=!1,this.ppbacklineTargetable=!1,this.pp=[],State.variables.pc&&this.pp.push(State.variables.pc),State.variables.pp&&this.pp.push(State.variables.pp),State.variables.tp1&&this.pp.push(State.variables.tp1),State.variables.tp2&&this.pp.push(State.variables.tp2);for(let uninitPlayer in this.pp)this.pp[uninitPlayer]=new setup.COM.Combatant(this.pp[uninitPlayer]);for(let uninitEnemy in this.ep)this.ep[uninitEnemy]=new setup.COM.Combatant(monsters[this.ep[uninitEnemy]]);let alphabet=["A","B","C","D","E","F"],int=0;for(let char of this.ep)char.ally=!1,char.enemy=!0,char.location=`enemy${alphabet[int]}`,char.name+=` [${alphabet[int]}]`,int+=1;int=0;for(let char of this.pp)char.ally=!0,char.enemy=!1,char.location=`player${alphabet[int]}`,int+=1}}function determineTargetViability(attack,attacker,target){let at=attack.targets;if(void 0===target)return!1;if(target.health<=0)return!1;if("all"===at.style)return!0;if("self"===at.style)return attacker===target;let ci=State.variables.ci,attackerStatus=attacker.location.includes("player")?"player":"enemy";if(("ally"===at.side||"both"===at.side)&&"enemy"===attackerStatus||("enemy"===at.side||"both"===at.side)&&"player"===attackerStatus){if("side"===at.style&&[ci.ep[0],ci.ep[1],ci.ep[2],ci.ep[3],ci.ep[4]].includes(target))return!0;if("row"===at.style||"single"===at.style){if(("front"===at.row||"both"===at.row||ci.epfrontlineTargetable)&&[ci.ep[0],ci.ep[1],ci.ep[2]].includes(target))return!0;if(("back"===at.row||"both"===at.row||ci.epbacklineTargetable)&&[ci.ep[3],ci.ep[4]].includes(target))return!0}}if(("ally"===at.side||"both"===at.side)&&"player"===attackerStatus||("enemy"===at.side||"both"===at.side)&&"enemy"===attackerStatus){if("side"===at.style&&[ci.pp[0],ci.pp[1],ci.pp[2],ci.pp[3]].includes(target))return!0;if("row"===at.style||"single"===at.style){if(("front"===at.row||"both"===at.row||ci.ppfrontlineTargetable)&&[ci.pp[0],ci.pp[1]].includes(target))return!0;if(("back"===at.row||"both"===at.row||ci.ppbacklineTargetable)&&[ci.pp[2],ci.pp[3]].includes(target))return!0}}return!1}function assignViableTargets(attack,attacker){let ci=State.variables.ci,solTargets=[];for(let char of ci.ep)determineTargetViability(attack,attacker,char)&&solTargets.push(char);for(let char of ci.pp)determineTargetViability(attack,attacker,char)&&solTargets.push(char);return solTargets}function combatAIRandom(ci){let attacksClone=cloneDeep(ci.activeCharacter.attacks),chosenAttack,targets,determiningAttack=!0;for(;determiningAttack;)0===attacksClone.length&&(chosenAttack=null,determiningAttack=!1),chosenAttack=ranItems(1,attacksClone)[0],targets=assignViableTargets(chosenAttack,ci.activeCharacter),0===targets.length?attacksClone=attacksClone.filter(attack=>attack!==chosenAttack):determiningAttack=!1;"single"===chosenAttack.targetType&&(chosenAttack.targets=ranItems(1,targets)),attackCalculations(chosenAttack,ci.activeCharacter,targets)}function combatAISimple(ci){let attacksClone=cloneDeep(ci.activeCharacter.attacks),chosenAttack,targets,curBuffs=[];for(let buff of ci.activeCharacter.buffs)curBuffs.push(buff.name);for(let attack of attacksClone)"buff"===attack.type&&("self"!==attack.targets.style||"row"!==attack.targets.style&&"ally"!==attack.targets.side||curBuffs.includes(attack.buffs.name)&&(attacksClone=attacksClone.filter(attack=>attack!==chosenAttack)));let determiningAttack=!0;for(;determiningAttack;)0===attacksClone.length&&(chosenAttack=null,determiningAttack=!1),chosenAttack=ranItems(1,attacksClone)[0],targets=assignViableTargets(chosenAttack,ci.activeCharacter),0===targets.length?attacksClone=attacksClone.filter(attack=>attack!==chosenAttack):determiningAttack=!1;"single"===chosenAttack.targetType&&(chosenAttack.targets=ranItems(1,targets)),attackCalculations(chosenAttack,ci.activeCharacter,targets)}function combatAINormal(ci){let attacksClone=cloneDeep(ci.activeCharacter.attacks),chosenAttack;for(let attack of attacksClone)if(attack.targeting=assignViableTargets(attack,ci.activeCharacter),"self"===attack.targets.style){for(let target of attack.targeting)if(ci.ep.includes(target)&&"buff"===attack.type){let curBuffs=[];for(let buff of target.buffs)curBuffs.push(buff.name);curBuffs.includes(attack.buffs.name)&&(attack.targeting=attack.targeting.filter(char=>char!==target))}0===attack.targeting.length&&(attacksClone=attacksClone.filter(attack=>attack!==chosenAttack))}else{for(let target of attack.targeting){if(ci.pp.includes(target)){attack.targeting=attack.targeting.filter(char=>char!==target);continue}let curBuffs=[];for(let buff of target.buffs)curBuffs.push(buff.name);curBuffs.includes(attack.buffs.name)&&(attack.targeting=attack.targeting.filter(char=>char!==target))}0===attack.targeting.length?attacksClone=attacksClone.filter(attack=>attack!==chosenAttack):attack.targeting=assignViableTargets(attack,ci.activeCharacter)}chosenAttack=ranItems(1,attacksClone)[0],"single"===chosenAttack.targetType&&(chosenAttack.targeting=ranItems(1,chosenAttack.targeting)),attackCalculations(chosenAttack,ci.activeCharacter,chosenAttack.targeting)}function attackCalculations(attack,attacker,targets){function calculateDamage(statusobj,attack,target,subDamageType){let mainDamageType="";switch(subDamageType){case"blunt":case"pierce":case"acid":mainDamageType="material";break;case"fire":case"frost":case"lightning":mainDamageType="elemental";break;case"sacred":case"shadow":case"aether":mainDamageType="occult"}let absorbPercent=Math.max(target.absorbPercent[mainDamageType],target.absorbPercent[subDamageType]);absorbPercent=Math.min(absorbPercent,target.absorbPercentMax[subDamageType]);let absorb=0,absorbFlat=0,damageResult,blockedDamageModifier=0;if(statusobj.direct&&!statusobj.deflected?(damageResult=attack.damage[subDamageType].max,blockedDamageModifier=.2):damageResult=Math.max(Math.random()*(attack.damage[subDamageType].min-attack.damage[subDamageType].max)+attack.damage[subDamageType].max,0),"attack"!==attack.type&&0===damageResult||(damageResult*=attack.wdm),statusobj.blocked)switch(mainDamageType){case"material":damageResult*=0+blockedDamageModifier;break;case"elemental":damageResult*=.2+blockedDamageModifier;break;case"occult":damageResult*=.35+blockedDamageModifier}if(0===damageResult)return 0;if(statusobj.critical&&!statusobj.deflected&&(damageResult*=attack.criticalDamageCalculated),statusobj.deflected&&!statusobj.critical&&!statusobj.direct)switch(mainDamageType){case"material":damageResult*=.5;break;case"elemental":damageResult*=.65;break;case"occult":damageResult*=.85}return damageResult*=1-Math.max(Math.min(target.resistance[mainDamageType],target.resistanceMax[mainDamageType]),Math.min(target.resistance[subDamageType],target.resistanceMax[subDamageType])),absorb=damageResult*absorbPercent,damageResult-=absorb,damageResult>0&&(damageResult=Math.max(damageResult-target.reduct[mainDamageType]-target.reduct[subDamageType],0)),damageResult>0&&(absorbFlat=Math.max(target.absorbFlat[subDamageType]+target.absorbFlat[mainDamageType],-1*damageResult),damageResult-=absorbFlat),Math.floor(1e4*damageResult)/1e4}function applyStats(attack,char){let solAttack=cloneDeep(attack);function updateProperties(attack,attacker,propobjname){Object.keys(attack[propobjname]).forEach((function(prop){"more"===prop?attack[propobjname][prop]*=attacker[propobjname][prop]:attack[propobjname][prop]+=attacker[propobjname][prop]}))}function calcRealDamage(sub){let increased=solAttack.damage[sub].increased,more=solAttack.damage[sub].more;solAttack.damage[sub].min=Math.floor(solAttack.damage[sub].min*(1+increased)*more),solAttack.damage[sub].max=Math.floor(solAttack.damage[sub].max*(1+increased)*more)}return solAttack.criticalChanceBase+=char.criticalChanceBase,solAttack.criticalChanceIncreased+=char.criticalChanceIncreased,solAttack.criticalChanceMore*=char.criticalChanceMore,solAttack.criticalChanceCalculated=solAttack.criticalChanceBase*solAttack.criticalChanceIncreased*solAttack.criticalChanceMore,solAttack.criticalDamageBase+=char.criticalDamageBase,solAttack.criticalDamageIncreased+=char.criticalDamageIncreased,solAttack.criticalDamageMore*=char.criticalDamageMore,solAttack.criticalDamageCalculated=solAttack.criticalDamageBase*solAttack.criticalDamageIncreased*solAttack.criticalDamageMore,solAttack.directChanceBase+=char.directChanceBase,solAttack.directChanceIncreased+=char.directChanceIncreased,solAttack.directChanceMore*=char.directChanceMore,solAttack.directChanceCalculated=solAttack.directChanceBase*solAttack.directChanceIncreased*solAttack.directChanceMore,updateProperties(solAttack.damage,char.damage,"blunt"),updateProperties(solAttack.damage,char.damage,"pierce"),updateProperties(solAttack.damage,char.damage,"acid"),updateProperties(solAttack.damage,char.damage,"fire"),updateProperties(solAttack.damage,char.damage,"frost"),updateProperties(solAttack.damage,char.damage,"lightning"),updateProperties(solAttack.damage,char.damage,"sacred"),updateProperties(solAttack.damage,char.damage,"shadow"),updateProperties(solAttack.damage,char.damage,"aether"),calcRealDamage("blunt"),calcRealDamage("pierce"),calcRealDamage("acid"),calcRealDamage("fire"),calcRealDamage("frost"),calcRealDamage("lightning"),calcRealDamage("sacred"),calcRealDamage("shadow"),calcRealDamage("aether"),solAttack}if(null===attack)return combatMessage(null,attacker),void(attacker.init+=attacker.initStart);let solobj={};targets.forEach((target,idx)=>{for(let i=0;i<attack.hitnumber;i++){solobj[i]||(solobj[i]={}),solobj[i][idx]={},solobj[i][idx].name=target.name;let thisAttack=applyStats(attack,attacker);if("buff"===thisAttack.effect||"debuff"===thisAttack.effect)return;thisAttack.isBlockable&&"self"!==thisAttack.targets.style?solobj[i][idx].blocked=Math.random()<target.blockCalculated-attack.blockCalculated:solobj[i][idx].blocked=!1,thisAttack.isDeflectable&&"self"!==thisAttack.targets.style?solobj[i][idx].deflected=Math.random()<target.deflectCalculated-attack.deflectCalculated:solobj[i][idx].deflected=!1,thisAttack.isDirectable&&"self"!==thisAttack.targets.style?solobj[i][idx].direct=Math.random()<thisAttack.directChanceCalculated&&!solobj[i][idx].deflected:solobj[i][idx].direct=!1,thisAttack.isCritable&&"self"!==thisAttack.targets.style?solobj[i][idx].critical=Math.random()<thisAttack.criticalChanceCalculated&&(!solobj[i][idx].blocked||!solobj[i][idx].deflected):solobj[i][idx].critical=!1;let damageobj={blunt:calculateDamage(solobj[i][idx],thisAttack,target,"blunt"),pierce:calculateDamage(solobj[i][idx],thisAttack,target,"pierce"),acid:calculateDamage(solobj[i][idx],thisAttack,target,"acid"),fire:calculateDamage(solobj[i][idx],thisAttack,target,"fire"),frost:calculateDamage(solobj[i][idx],thisAttack,target,"frost"),lightning:calculateDamage(solobj[i][idx],thisAttack,target,"lightning"),sacred:calculateDamage(solobj[i][idx],thisAttack,target,"sacred"),shadow:calculateDamage(solobj[i][idx],thisAttack,target,"shadow"),aether:calculateDamage(solobj[i][idx],thisAttack,target,"aether"),total:0};for(let amount in damageobj)damageobj[amount]!==damageobj.total&&(damageobj.total+=damageobj[amount]);solobj[i][idx].damage=damageobj.total}});for(let i in solobj)for(let idx in solobj[i]){if(solobj[i][idx].damage>=1&&(targets[idx].health-=solobj[i][idx].damage,targets[idx].health<0&&(targets[idx].health=0)),solobj[i][idx].blocked&&(targets[idx].init+=targets[idx].blockRecovery),solobj[i][idx].deflected||(targets[idx].init+=attack.stun),attack.buffs.length>0){solobj[i][idx].buffsapplied=[],solobj[i][idx].buffsreapplied=[];for(let buff of attack.buffs){let buffNames=assignFieldOfObjectsToArray(targets[idx].buffs,"name");if(buffNames.includes(buff.name)){if(buffNames.includes(buff.name)){let buffidx=buffNames.indexOf(buff.name);targets[idx].buffs[buffidx].duration=buff.duration,buff.onReapply(targets[idx]),solobj[i][idx].buffsreapplied.push(buff)}}else targets[idx].buffs.push(cloneDeep(buff)),buff.onApply(targets[idx]),solobj[i][idx].buffsapplied.push(buff)}}let blockMsg=solobj[i][idx].blocked?"✓":"",critMsg=solobj[i][idx].critical?"✓":"",directMsg=solobj[i][idx].direct?"✓":"",deflectMsg=solobj[i][idx].deflected?"✓":"";combatMessage(attack,targets[idx],solobj[i][idx])}attacker.init+=attack.initRecovery*attacker.initRecoveryModifier;let cilog=State.variables.ci.log;cilog.push(`${attacker.name} used ${attack.name}!`);for(let i=0;i<Object.keys(solobj).length;i++)for(let j=0;j<Object.keys(solobj[i]).length;j++){if(solobj[i][j].blocked?cilog.push(`${solobj[i][j].name} blocked it, taking ${solobj[i][j].damage} damage.`):solobj[i][j].deflected?cilog.push(`${solobj[i][j].name} deflected it, taking ${solobj[i][j].damage} damage.`):solobj[i][j].damage>0&&cilog.push(`Dealt ${solobj[i][j].damage} damage to ${solobj[i][j].name}.`),solobj[i][j].buffsapplied)for(let buff of solobj[i][j].buffsapplied)"buff"===buff.type?cilog.push(`${solobj[i][j].name} was buffed with ${buff.name}.`):"buff"===buff.type&&cilog.push(`${solobj[i][j].name} was inflicted with ${buff.name}.`);if(solobj[i][j].buffsreapplied)for(let buff of solobj[i][j].buffsreapplied)"buff"===buff.type?cilog.push(`${solobj[i][j].name} was re-buffed with ${buff.name}.`):"buff"===buff.type&&cilog.push(`${solobj[i][j].name} was re-inflicted with ${buff.name}.`)}cilog.push("<br>")}function determineRowViabilities(){let ci=State.variables.ci;(!ci.ep[0]||ci.ep[0].health<=0)&&(!ci.ep[1]||ci.ep[1].health<=0)&&(!ci.ep[2]||ci.ep[2].health<=0)&&(ci.epbacklineTargetable=!0),(!ci.pp[0]||ci.pp[0].health<=0)&&(!ci.pp[1]||ci.pp[1].health<=0)&&(ci.ppbacklineTargetable=!0),(!ci.ep[3]||ci.ep[3].health<=0)&&(!ci.ep[4]||ci.ep[4].health<=0)&&(ci.epfrontlineTargetable=!0),(!ci.pp[2]||ci.pp[2].health<=0)&&(!ci.pp[3]||ci.pp[3].health<=0)&&(ci.ppfrontlineTargetable=!0)}!function(S){S.COM||(S.COM={}),S.COM.assignViableTargets=function(attacker,attack){return assignViableTargets(attacker,attack)},S.COM.combatAIRandom=function(ci){return combatAIRandom(ci)},S.COM.combatAISimple=function(ci){return combatAISimple(ci)},S.COM.combatAINormal=function(ci){return combatAINormal(ci)},S.COM.attackCalculations=function(attack,attacker,targets){return attackCalculations(attack,attacker,targets)},S.COM.determineRowViabilities=function(){return determineRowViabilities()},S.COM.CombatInstance=CombatInstance}(setup);
/* twine-user-script #16: "_combatant.min.js" */
class Combatant{constructor(obj){jQuery.extend(!0,this,obj),this.original=cloneDeep(obj);let max=this.initStart*(1+this.initStartVariance),min=this.initStart*(1-this.initStartVariance);if(this.init=Math.floor(Math.random()*(max-min+1))+Math.floor(min),this.attacks||(this.attacks=[]),this.triggers=[],this.equippables)for(let equippable in this.equippables){let item=this.equippables[equippable].applyMods();function updateProperties(combatant,equip,propobjname){Object.keys(combatant[propobjname]).forEach((function(prop){"more"===prop?combatant[propobjname][prop]*=equip[propobjname][prop]:combatant[propobjname][prop]+=equip[propobjname][prop]}))}this.equippables[equippable].attacks&&(this.attacks=mergeArray(this.attacks,item.attacks)),updateProperties(this,item,"absorbPercent"),updateProperties(this,item,"absorbPercentMax"),updateProperties(this,item,"absorbFlat"),updateProperties(this,item,"resistance"),updateProperties(this,item,"resistanceMax"),updateProperties(this,item,"reduct"),updateProperties(this.damage,item.damage,"blunt"),updateProperties(this.damage,item.damage,"pierce"),updateProperties(this.damage,item.damage,"acid"),updateProperties(this.damage,item.damage,"fire"),updateProperties(this.damage,item.damage,"frost"),updateProperties(this.damage,item.damage,"lightning"),updateProperties(this.damage,item.damage,"sacred"),updateProperties(this.damage,item.damage,"shadow"),updateProperties(this.damage,item.damage,"aether"),this.healthMax+=item.healthMax,this.initStart+=item.initStart,this.initStartVariance+=item.initStartVariance,this.initDecrementModifier+=item.initDecrementModifier,this.initRecoveryModifier+=item.initRecoveryModifier,this.criticalChanceBase+=item.criticalChanceBase,this.criticalChanceIncreased+=item.criticalChanceIncreased,this.criticalChanceMore*=item.criticalChanceMore,this.criticalDamageBase+=item.criticalDamageBase,this.criticalDamageIncreased+=item.criticalDamageIncreased,this.criticalDamageMore*=item.criticalDamageMore,this.directChanceBase+=item.directChanceBase,this.directChanceIncreased+=item.directChanceIncreased,this.directChanceMore*=item.directChanceMore,this.blockRecovery+=item.blockRecovery,this.blockChanceBase+=item.blockChanceBase,this.blockChanceIncreased+=item.blockChanceIncreased,this.blockChanceMore*=item.blockChanceMore,this.deflectChanceBase+=item.deflectChanceBase,this.deflectChanceIncreased+=item.deflectChanceIncreased,this.deflectChanceMore*=item.deflectChanceMore}this.health=this.healthMax,this.deflectCalculated=this.deflectChanceBase*this.deflectChanceIncreased*this.deflectChanceMore,this.blockCalculated=this.blockChanceBase*this.blockChanceIncreased*this.blockChanceMore,"player"===this.family?this.rarity="Player":this.rarity="Normal"}reform(){let newBaseObj=cloneDeep(this.original),oldCombatant=cloneDeep(this);Object.assign(this,newBaseObj),this.health>this.healthMax&&(this.health=this.healthMax),this.buffs=oldCombatant.buffs,this.deflectCalculated=this.deflectChanceBase*this.deflectChanceIncreased*this.deflectChanceMore,this.blockCalculated=this.blockChanceBase*this.blockChanceIncreased*this.blockChanceMore,"player"===this.family?this.rarity="Player":this.rarity="Normal"}getInfo(){let iNYI='<span class="infoNYI">NYI</span>',res=this.resistance,resMax=this.resistanceMax,red=this.reduct,abp=this.absorbPercent,abpMax=this.absorbPercentMax,abf=this.absorbFlat,dmg=this.damage,solstr='<span id="CombatantInformationPlate">';solstr+=`<span id='infoName'>${this.name} <span id='infoVariant'>#${this.rarity.toUpperCase()}</span></span>`,solstr+="<span class='divider'></span>",solstr+="<span id='infoMetrics'><span class='infoSectionHeader'>METRICS</span>",solstr+="<grid id='infoMetricsGrid'>";let iHPMax=Math.ceil(this.healthMax),iHP;iHP=tags().includes(".combat")?Math.ceil(this.health):iHPMax,solstr+=`<span id='infoHealth'>Health: ${iHP}<span class='infoMax'> /${iHPMax}</span><br>Mana: ${iNYI}</span>`;let iInitStart=`<span class='infoMax'>/${Math.ceil(this.initStart)}</span>`,iInitStartVariance=`<span class='infoMax'> ±${Math.ceil(this.initStartVariance*this.initStart)}</span>`,iInitRecoveryModifier=`<span class="infoMax">Recovery: </span>x${+this.initRecoveryModifier.toFixed(2)}`,iInit,iInitDecrement;iInit=tags().includes(".combat")?`${Math.ceil(this.init)}${iInitStart}`:`${Math.ceil(this.initStart)}${iInitStartVariance}`,solstr+=`<span id='infoInit'>Init<br>${iInit} -${`<span id='infoInitDecrement'>${+this.initDecrementModifier.toFixed(2)}<span class="infoMax">/tick</span><br>${iInitRecoveryModifier}</span>`}</span>`;let iDeflect=Math.floor(100*this.deflectCalculated);solstr+=iDeflect<=5?`<span id='infoDeflect' class='infoDarkGrey'>Deflect<br>${iDeflect}%</span>`:`<span id='infoDeflect'>Deflect<br>${iDeflect}%</span>`;let iBlock=Math.floor(100*this.blockCalculated),iBlockRecovery=`<span class='infoMax'>+${Math.ceil(this.blockRecovery)}init</span>`;solstr+=iBlock<=0?`<span id='infoBlock' class='infoDarkGrey'>Block<br>${iBlock}%<br>${iBlockRecovery}</span>`:`<span id='infoBlock'>Block<br>${iBlock}%<br>${iBlockRecovery}</span>`;let iCritChance=Math.ceil(this.criticalChanceBase*this.criticalChanceIncreased*this.criticalChanceMore*100),iCritDamage=`<span class='infoMax'>${+(this.criticalDamageBase*this.criticalDamageIncreased*this.criticalDamageMore).toFixed(2)}x</span>`;solstr+=iCritChance<=5?`<span id='infoCrit' class='infoDarkGrey'>Critical<br>${iCritChance}%<br>${iCritDamage}</span>`:`<span id='infoCrit'>Critical<br>${iCritChance}%<br>${iCritDamage}</span>`;let iDirectChance=Math.ceil(this.directChanceBase*this.directChanceIncreased*this.directChanceMore*100);solstr+=iDirectChance<=5?`<span id='infoDirect' class='infoDarkGrey'>Direct<br>${iDirectChance}%</span>`:`<span id='infoDirect'>Direct<br>${iDirectChance}%</span>`,solstr+="</grid></span>",this.buffs.length>0&&(solstr+="<span id='infoBuffs'><span class='infoSectionHeader'>BUFFS & DEBUFFS</span>",solstr+="<span class='infoNYI'>Buff and debuff information are NYI, but you currently have at least one.</span>",solstr+="</span>"),solstr+="<span id='infoResistances'><span class='infoSectionHeader'>RESISTANCES & REDUCTIONS</span>",solstr+="<grid id='infoResistanceGrid'>";let sub1realRes="",sub1maxRes="",sub1flatRes="";function determineResEquivalances(main,sub1,sub2,sub3){sub1realRes=Math.floor(100*Math.min(res[main]+res[sub1],resMax[sub1])),sub1maxRes=Math.floor(Math.max(resMax[sub1])),sub1flatRes=Math.floor(Math.min(red[main]+red[sub1]));let sub2real=Math.floor(100*Math.min(res[main]+res[sub2],resMax[sub2])),sub2max=Math.floor(Math.max(resMax[sub2])),sub2flat=Math.floor(Math.min(red[main]+red[sub2])),sub3real=Math.floor(100*Math.min(res[main]+res[sub3],resMax[sub3])),sub3max=Math.floor(Math.max(resMax[sub3])),sub3flat=Math.floor(Math.min(red[main]+red[sub3])),realeq=sub1realRes===sub2real&&sub1realRes===sub3real,maxeq,flateq,actuallyeq;return realeq===(sub1maxRes===sub2max&&sub1maxRes===sub3max)&&realeq===(sub1flatRes===sub2flat&&sub1flatRes===sub3flat)}function getMainResString(subsEq,main){if(subsEq){let isZeroedClass="";return 0===sub1realRes&&0===sub1flatRes&&(isZeroedClass=" infoDarkGrey"),`class='info${main.replace(/^\w/,c=>c.toUpperCase())} plateInformationGridsSpan3Rows${isZeroedClass}'> All ${main.replace(/^\w/,c=>c.toUpperCase())} Resistances: ${Math.floor(Math.min(sub1realRes,sub1maxRes))}%<span class='infoMax'> :${Math.floor(sub1maxRes)}%</span> - ${Math.floor(sub1flatRes)}`}return`class='info${main.replace(/^\w/,c=>c.toUpperCase())} infoUpper'> ${main.replace(/^\w/,c=>c.toUpperCase())}`}function getSubResString(main,sub){let subrealRes=Math.floor(100*Math.min(res[main]+res[sub],resMax[sub])),submaxRes=Math.floor(Math.max(resMax[sub])),subflatRes=Math.floor(Math.min(red[main]+red[sub])),isZeroedClass="";return 0===subrealRes&&0===subflatRes&&(isZeroedClass=" infoDarkGrey"),`class='info${sub.replace(/^\w/,c=>c.toUpperCase())}${isZeroedClass}'>${sub.replace(/^\w/,c=>c.toUpperCase())}<br>${subrealRes}%<span class='infoMax'> :${submaxRes}%</span> + ${subflatRes}`}let iMaterialEqRes=determineResEquivalances("material","blunt","pierce","acid"),iMaterialRes;if(solstr+=`<span ${getMainResString(!!iMaterialEqRes,"material")}</span>`,!iMaterialEqRes){let iBluntRes,iPierceRes,iAcidRes;solstr+=`<span ${getSubResString("material","blunt")}</span>`,solstr+=`<span ${getSubResString("material","pierce")}</span>`,solstr+=`<span ${getSubResString("material","acid")}</span>`}let iElementalEqRes=determineResEquivalances("elemental","fire","frost","lightning"),iElementalRes;if(solstr+=`<span ${getMainResString(!!iElementalEqRes,"elemental")}</span>`,!iElementalEqRes){let iFireRes,iFrostRes,iLightningRes;solstr+=`<span ${getSubResString("elemental","fire")}</span>`,solstr+=`<span ${getSubResString("elemental","frost")}</span>`,solstr+=`<span ${getSubResString("elemental","lightning")}</span>`}let iOccultEqRes=determineResEquivalances("occult","shadow","aether","sacred"),iOccultRes;if(solstr+=`<span ${getMainResString(!!iOccultEqRes,"occult")}</span>`,!iOccultEqRes){let iShadowRes,iSacredRes,iAetherRes;solstr+=`<span ${getSubResString("occult","shadow")}</span>`,solstr+=`<span ${getSubResString("occult","sacred")}</span>`,solstr+=`<span ${getSubResString("occult","aether")}</span>`}solstr+="</grid></span>",solstr+="<span id='infoAbsorbtions'><span class='infoSectionHeader'>Absorbtion</span>",solstr+="<grid id='infoAbsorbtionGrid'>";let sub1realAb="",sub1maxAb="",sub1flatAb="";function determineAbEquivalances(main,sub1,sub2,sub3){sub1realAb=Math.floor(100*Math.min(abp[main]+abp[sub1],abpMax[sub1])),sub1maxAb=Math.floor(Math.max(abpMax[sub1])),sub1flatAb=Math.floor(Math.min(abf[main]+abf[sub1]));let sub2real=Math.floor(100*Math.min(abp[main]+abp[sub2],abpMax[sub2])),sub2max=Math.floor(Math.max(abpMax[sub2])),sub2flat=Math.floor(Math.min(abf[main]+abf[sub2])),sub3real=Math.floor(100*Math.min(abp[main]+abp[sub3],abpMax[sub3])),sub3max=Math.floor(Math.max(abpMax[sub3])),sub3flat=Math.floor(Math.min(abf[main]+abf[sub3])),realeq=sub1realAb===sub2real&&sub1realAb===sub3real,maxeq,flateq,actuallyeq;return realeq===(sub1maxAb===sub2max&&sub1maxAb===sub3max)&&realeq===(sub1flatAb===sub2flat&&sub1flatAb===sub3flat)}function getMainAbsString(subsEq,main){if(subsEq){let isZeroedClass="";return 0===sub1realAb&&0===sub1flatAb&&(isZeroedClass=" infoDarkGrey"),`class='info${main.replace(/^\w/,c=>c.toUpperCase())} plateInformationGridsSpan3Rows${isZeroedClass}'> All ${main.replace(/^\w/,c=>c.toUpperCase())} Absorptions: ${Math.floor(Math.min(sub1realAb,sub1maxAb))}%<span class='infoMax'> :${Math.floor(sub1maxAb)}%</span> - ${Math.floor(sub1flatAb)}`}return`class='info${main.replace(/^\w/,c=>c.toUpperCase())}'> ${main.replace(/^\w/,c=>c.toUpperCase())}: ${Math.floor(100*Math.min(abp[main],abpMax[main]))}%<span class='infoMax'> :${Math.floor(abpMax[main])}%</span> - ${Math.floor(abf[main])}`}function getSubAbsString(main,sub){let subrealAb=Math.floor(100*Math.min(abp[main]+abp[sub],abpMax[sub])),submaxAb=Math.floor(Math.max(abpMax[sub])),subflatAb=Math.floor(Math.min(abf[main]+abf[sub])),isZeroedClass="";return 0===sub1realAb&&0===sub1flatAb&&(isZeroedClass=" infoDarkGrey"),`class='info${sub.replace(/^\w/,c=>c.toUpperCase())}${isZeroedClass}'>${sub.replace(/^\w/,c=>c.toUpperCase())}<br>${subrealAb}%<span class='infoMax'> :${submaxAb}%</span> + ${subflatAb}`}let iMaterialEqAb=determineAbEquivalances("material","blunt","pierce","acid"),iMaterialAb;if(solstr+=`<span ${getMainAbsString(!!iMaterialEqAb,"material")}</span>`,!iMaterialEqAb){let iBluntAbs,iPierceAbs,iAcidAbs;solstr+=`<span ${getSubAbsString("material","blunt")}</span>`,solstr+=`<span ${getSubAbsString("material","pierce")}</span>`,solstr+=`<span ${getSubAbsString("material","acid")}</span>`}let iElementalEqAb=determineAbEquivalances("elemental","fire","frost","lightning"),iElementalAb;if(solstr+=`<span ${getMainAbsString(!!iElementalEqAb,"elemental")}</span>`,!iElementalEqAb){let iFireAbs,iFrostAbs,iLightningAbs;solstr+=`<span ${getSubAbsString("elemental","fire")}</span>`,solstr+=`<span ${getSubAbsString("elemental","frost")}</span>`,solstr+=`<span ${getSubAbsString("elemental","lightning")}</span>`}let iOccultEqAb=determineAbEquivalances("occult","shadow","aether","sacred"),iOccultAb,iBluntDmg,iPierceDmg,iAcidDmg,iFireDmg,iFrostDmg,iLightningDmg,iShadowDmg,iSacredDmg,iAetherDmg;if(solstr+=`<span ${getMainAbsString(!!iOccultEqAb,"occult")}</span>`,!iOccultEqAb){let iShadowAbs,iSacredAbs,iAetherAbs;solstr+=`<span ${getSubAbsString("occult","shadow")}</span>`,solstr+=`<span ${getSubAbsString("occult","sacred")}</span>`,solstr+=`<span ${getSubAbsString("occult","aether")}</span>`}function getDmgString(sub){let dmgmin=Math.floor(dmg[sub].min),dmgmax=Math.ceil(dmg[sub].max),dmgmore=dmg[sub].more*(1+dmg[sub].increased),isZeroedClass="";0===dmgmin&&0===dmgmax&&(isZeroedClass=" infoDarkGrey");let isHiddenClass="";return 1===dmgmore&&(isHiddenClass=" infoHidden"),`class='info${sub.replace(/^\w/,c=>c.toUpperCase())} ${isZeroedClass}'>${sub.replace(/^\w/,c=>c.toUpperCase())}<br>${dmgmin} - ${dmgmax}<br><span class="infoMax${isHiddenClass}">x${+dmgmore.toFixed(2)}</span>`}return solstr+="</grid></span>",solstr+="<span id='infoDamage'><span class='infoSectionHeader'>Damage</span>",solstr+="<grid id='infoDamageGrid'>",solstr+="<span class='infoMaterial infoUpper'>Material</span>",solstr+=`<span ${getDmgString("blunt")}</span>`,solstr+=`<span ${getDmgString("pierce")}</span>`,solstr+=`<span ${getDmgString("acid")}</span>`,solstr+="<span class='infoElemental infoUpper'>Elemental</span>",solstr+=`<span ${getDmgString("fire")}</span>`,solstr+=`<span ${getDmgString("frost")}</span>`,solstr+=`<span ${getDmgString("lightning")}</span>`,solstr+="<span class='infoOccult infoUpper'>Occult</span>",solstr+=`<span ${getDmgString("shadow")}</span>`,solstr+=`<span ${getDmgString("sacred")}</span>`,solstr+=`<span ${getDmgString("aether")}</span>`,solstr+="</grid></span>","player"!==this.family&&(solstr+="<span class='infoSectionHeader'>FLAVOR</span>",solstr+=`<grid><span class='infoNYI'>${this.description}</span></grid>`),solstr+="</span>",solstr}}!function(S){S.COM||(S.COM={}),S.COM.Combatant=Combatant}(setup);
/* twine-user-script #17: "_combatui.min.js" */
function determineIfCanvas(char){char&&($(`#gittem${char.location.slice(-1)} progress.healthBar`).attr({value:char.health,max:char.healthMax}),updateCanvas(char,$(`canvas.initBar#${char.location}`)))}function drawCombat(){$("#playerAttacks").empty().wiki(Story.get("Player_Attacks").processText());for(let char of State.variables.ci.ep)determineIfCanvas(char);for(let char of State.variables.ci.pp)determineIfCanvas(char)}function combatMessage(attack,char,attackPackage){let type="default",eleName;char.location.includes("enemy")?eleName=`#enemyZone #gitem${char.location.charAt(char.location.length-1)}`:char.location.includes("player")&&(eleName=`#playerZone #gitem${char.location.charAt(char.location.length-1)}`);let charPos_left=$(eleName)[0].getBoundingClientRect().left,charPos_right=$(eleName)[0].getBoundingClientRect().right,charPos_top=$(eleName)[0].getBoundingClientRect().top,charPos_bottom=$(eleName)[0].getBoundingClientRect().bottom;0===$("#flash-"+char.location).length&&$("<div>",{class:"flash-container",id:"flash-"+char.location}).prependTo("#flash-notifs-here");let gitemWidth=(charPos_right-charPos_left)/2,gitemHeight=(charPos_bottom-charPos_top)/2,randomHorizontalPos=Math.floor(Math.random()*(gitemWidth-0+1)+0)+gitemWidth/2,randomVerticalPos=Math.floor(Math.random()*(gitemHeight-0+1)+0)+gitemHeight/4;if(attackPackage.damage>0){let theme="damage";attackPackage.critical?theme="critical":attackPackage.direct&&(theme="direct");let message=window.FlashMessage.create(Math.round(attackPackage.damage),type,{progress:!1,interactive:!1,timeout:2e3,appear_delay:50,container:"#flash-"+char.location,theme:theme,layout:char.location,classes:{container:"flash-container",flash:"flash-message",visible:"flash-is-visible",progress:"flash-progress",progress_hidden:"flash-is-hidden"}}),messageId=$(message.$_element).attr("id");$(`#${messageId}`).css({left:charPos_left+randomHorizontalPos,top:charPos_bottom+randomVerticalPos}).animate({top:charPos_bottom+randomVerticalPos/2},2e3)}if(attackPackage.blocked){let message=window.FlashMessage.create("Blocked",type,{progress:!1,interactive:!1,timeout:2e3,appear_delay:50,container:"#flash-"+char.location,theme:"block",layout:char.location,classes:{container:"flash-container",flash:"flash-message",visible:"flash-is-visible",progress:"flash-progress",progress_hidden:"flash-is-hidden"}}),messageId=$(message.$_element).attr("id");$(`#${messageId}`).css({left:charPos_right-gitemWidth/3,top:charPos_bottom+gitemHeight})}if(attackPackage.deflect){let message=window.FlashMessage.create("Deflected",type,{progress:!1,interactive:!1,timeout:2e3,appear_delay:50,container:"#flash-"+char.location,theme:"deflect",layout:char.location,classes:{container:"flash-container",flash:"flash-message",visible:"flash-is-visible",progress:"flash-progress",progress_hidden:"flash-is-hidden"}}),messageId=$(message.$_element).attr("id");$(`#${messageId}`).css({left:charPos_right-gitemWidth/3,top:charPos_bottom+gitemHeight})}}function updatePlayerAttacks(className){$("#targetsZone #playerAttacks").empty().removeClass(),className&&$("#targetsZone #playerAttacks").addClass(className)}function updateCanvas(char,canvasElement){canvasElement.clearCanvas();let horiBarXPos=432,hpBarXPos=652;canvasElement.drawText({fillStyle:"#FFFFFF",fontSize:80,strokeWidth:5,strokeStyle:"#FFFFFF",text:"HP:",x:492,y:78}),canvasElement.drawLine({strokeStyle:"#000000",strokeWidth:80,rounded:!0,x1:632,y1:78,x2:2e3,y2:78}),canvasElement.drawLine({strokeStyle:"#8C99A6",strokeWidth:60,rounded:!0,x1:652,y1:78,x2:1980,y2:78}),char.health>0&&canvasElement.drawLine({strokeStyle:"#AA0000",strokeWidth:60,rounded:!0,x1:652,y1:78,x2:Math.max(char.health/char.healthMax*1328+652,652),y2:78});let rhombusimg="",linecolor="";if(char.location.includes("player")&&char.init<=0?(rhombusimg="assets/imported/img/png/turn_icon_pl.png",linecolor="#2EFF23"):char.location.includes("enemy")&&char.init<=0?(rhombusimg="assets/imported/img/png/turn_icon_en.png",linecolor="#FF0000"):(rhombusimg="assets/imported/img/png/turn_icon.png",linecolor="#FFFF00"),canvasElement.drawImage({source:rhombusimg,x:192,y:192,width:384,height:384}),canvasElement.drawLine({strokeStyle:linecolor,strokeWidth:10,rounded:!0,x1:432,y1:256,x2:1700,y2:256}),canvasElement.drawText({fillStyle:"#FFFFFF",fontSize:120,strokeWidth:5,strokeStyle:"#FFFFFF",text:Math.ceil(char.init),x:1850,y:256}),char.health>0){let xpos=Math.min(16*char.init+432,1700),iconimg="";char.location.includes("player")?iconimg="assets/imported/img/png/init_icon_pl.png":char.location.includes("enemy")&&(iconimg="assets/imported/img/png/init_icon_en.png"),canvasElement.drawImage({source:iconimg,x:xpos,y:320,width:72,height:88})}if(char.buffs.length>0)for(let buff of char.buffs){let xpos=Math.min(6*buff.duration+432,1700),iconimg="";"buff"===buff.type?iconimg="assets/imported/img/png/turn_icon_pl.png":"debuff"===buff.type&&(iconimg="assets/imported/img/png/turn_icon_en.png"),canvasElement.drawImage({source:iconimg,x:xpos,y:220,width:80,height:80})}}function displayToInfoScreenOnMouseover(selector,obj,obj2){waitForElm(selector).then(elm=>{$(elm).mouseenter((function(){Story.get(passage()).tags.includes(".combat")?$("#MainCombatGrid #combatNotifications").html(obj.getInfo(obj2)):$("#attackInfoDescription").html(obj.getInfo(obj2))}))})}!function(S){S.fns||(S.fns={}),S.fns.displayToInfoScreenOnMouseover=function(selector,obj,attackPackage){displayToInfoScreenOnMouseover(selector,obj,attackPackage)},S.COM||(S.COM={}),S.COM.determineIfCanvas=function(char){determineIfCanvas(char)},S.COM.drawCombat=function(){drawCombat()},S.COM.updatePlayerAttacks=function(className){updatePlayerAttacks(className)}}(setup);
/* twine-user-script #18: "_config.min.js" */
Config.passages.nobr=!0,Config.saves.autosave=!1,Config.history.maxStates=1,Config.history.controls=!1,Config.saves.slots=0,Config.passages.start="DebugStart";
/* twine-user-script #19: "_enemies.min.js" */
class Enemy{constructor(obj){jQuery.extend(!0,this,DEFAULT_ENEMY,obj),null===this.family&&console.error(`${this.name}'s family is null.`),null===this.description&&console.error(`${this.name}'s flavor text is null.`)}}const monsters={EN_MOMMY_SPIDER:new Enemy({imgSrc:"assets/imported/img/png/turn_icon_en.png",ai:setup.COM.combatAISimple,name:"Momma Spider",family:"mommySpider",healthMax:120,initStart:62,attacks:setup.COM.FAMILY_ATTACKS.mommySpider,description:"A filthy abomination in a larger than acceptable size. Complementary baby spiders come with it.",damage:{blunt:{min:6,max:12},acid:{min:4,max:8},pierce:{min:4,max:8}},directChanceBase:.08,directChanceIncreased:.25,criticalChanceBase:.09,criticalChanceIncreased:1}),EN_DADDY_SPIDER:new Enemy({imgSrc:"assets/imported/img/svg/icons/spider-alt.svg",ai:setup.COM.combatAISimple,name:"Daddy Spider",family:"mommySpider",healthMax:94,initStart:56,attacks:setup.COM.FAMILY_ATTACKS.mommySpider,description:"It's hard to believe that this one spider caused the birth of so many others.",damage:{blunt:{min:3,max:9},acid:{min:2,max:5},pierce:{min:2,max:5}},directChanceBase:.08,directChanceIncreased:.25,criticalChanceBase:.09,criticalChanceIncreased:1}),EN_BABY_SPIDER:new Enemy({imgSrc:"assets/imported/img/svg/icons/hanging-spider.svg",ai:setup.COM.combatAISimple,name:"Baby Spider",family:"babySpider",healthMax:28,initStart:26,initStartVariance:.3,attacks:setup.COM.FAMILY_ATTACKS.babySpider,description:"A small little spider. It's almost kinda cute...",damage:{blunt:{min:1,max:3},acid:{min:2,max:2},pierce:{min:1,max:1}}}),EN_SPIDER:new Enemy({imgSrc:"assets/imported/img/svg/icons/masked-spider.svg",ai:setup.COM.combatAISimple,name:"Spider",family:"babySpider",healthMax:38,initStart:28,initStartVariance:.24,attacks:setup.COM.FAMILY_ATTACKS.babySpider,description:"A large spider. Not very cute.",damage:{blunt:{min:2,max:4},acid:{min:3,max:3},pierce:{min:2,max:3}}}),EN_HOG:new Enemy({ai:setup.COM.combatAISimple,name:"Hog",family:"Hog",healthMax:240,initStart:28,attacks:setup.COM.FAMILY_ATTACKS.Hog,description:"A boar, a hog, a whore, they're all the same, and they're all vicious.",resistance:{blunt:.2,pierce:-.2},damage:{blunt:{min:9,max:14},pierce:{min:8,max:13}}}),EN_CARBUNCLE:new Enemy({ai:setup.COM.combatAISimple,name:"Carbuncle",family:"Carbuncle",healthMax:60,initStart:22,initStartVariance:.24,attacks:setup.COM.FAMILY_ATTACKS.Carbuncle,description:"An adorable little rabbit with crystals growing on it.",damage:{acid:{min:2,max:4},blunt:{min:2,max:4},fire:{min:2,max:4},frost:{min:2,max:4},lightning:{min:4,max:2}},resistance:{acid:.1,blunt:.1,elemental:.3,occult:.2}}),EN_EMERALD_CARBUNCLE:new Enemy({ai:setup.COM.combatAISimple,name:"Emerald Carbuncle",family:"Carbuncle",healthMax:49,initStart:22,initStartVariance:.24,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Carbuncle,setup.COM.ATTACKS.acidicshot),description:"A magical rabbit focusing on acidic magic.",damage:{acid:{min:8,max:12}},resistance:{acid:.4,elemental:.2,occult:.2}}),EN_OYNX_CARBUNCLE:new Enemy({ai:setup.COM.combatAISimple,name:"Onyx Carbuncle",family:"Carbuncle",healthMax:72,initStart:25,initStartVariance:.24,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Carbuncle,setup.COM.ATTACKS.rockfall),description:"A magical rabbit focusing on blunt magic.",damage:{blunt:{min:8,max:12}},resistance:{blunt:.4,elemental:.2,occult:.2}}),EN_RUBY_CARBUNCLE:new Enemy({ai:setup.COM.combatAISimple,name:"Ruby Carbuncle",family:"Carbuncle",healthMax:49,initStart:22,initStartVariance:.24,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Carbuncle,setup.COM.ATTACKS.firewall),description:"A magical rabbit focusing on fire magic.",damage:{fire:{min:7,max:14}},resistance:{fire:.1,elemental:.2,occult:.2}}),EN_SAPPHIRE_CARBUNCLE:new Enemy({ai:setup.COM.combatAISimple,name:"Sapphire Carbuncle",family:"Carbuncle",healthMax:49,initStart:22,initStartVariance:.24,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Carbuncle,setup.COM.ATTACKS.iceprison),description:"A magical rabbit focusing on frost magic.",damage:{frost:{min:7,max:11}},resistance:{frost:.1,elemental:.2,occult:.2}}),EN_TOPAZ_CARBUNCLE:new Enemy({ai:setup.COM.combatAISimple,name:"Topaz Carbuncle",family:"Carbuncle",healthMax:49,initStart:22,initStartVariance:.24,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Carbuncle,setup.COM.ATTACKS.flash),description:"A magical rabbit focusing on lightning magic.",damage:{lightning:{min:1,max:19}},resistance:{lightning:.1,elemental:.2,occult:.2}}),EN_UNARMED_SKELETON:new Enemy({ai:setup.COM.combatAIRandom,name:"Unarmed Skeleton",family:"Skeleton",healthMax:43,initStart:30,initStartVariance:.24,initRecoveryModifier:2.3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Skeleton,setup.COM.FAMILY_ATTACKS.unarmedAttacks),description:"A spoopy skeleton animated out of arcane magicks.",damage:{blunt:{min:9,max:15}},resistance:{blunt:-.4,pierce:.3,acid:.2,sacred:-.4,frost:.2,fire:.2}}),EN_SPEAR_SKELETON:new Enemy({ai:setup.COM.combatAIRandom,name:"Skeleton Spearman",family:"Skeleton",healthMax:43,initStart:32,initStartVariance:.24,initRecoveryModifier:1.8,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Skeleton,setup.COM.FAMILY_ATTACKS.spearWeaponAttacks),description:"A spoopy skeleton spearman animated out of arcane magicks.",damage:{pierce:{min:9,max:14}},resistance:{blunt:-.4,pierce:.3,acid:.2,sacred:-.4,frost:.2,fire:.2}}),EN_SWORDSHIELD_SKELETON:new Enemy({ai:setup.COM.combatAIRandom,name:"Skeleton Swordsman",family:"Skeleton",healthMax:43,initStart:28,initStartVariance:.24,initRecoveryModifier:1.8,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Skeleton,setup.COM.FAMILY_ATTACKS.swordandshieldWeaponAttacks),description:"A spoopy skeleton spearman animated out of arcane magicks.",damage:{pierce:{min:6,max:10}},resistance:{blunt:-.4,pierce:.3,acid:.2,sacred:-.4,frost:.2,fire:.2}}),EN_BOW_SKELETON:new Enemy({ai:setup.COM.combatAIRandom,name:"Skeleton Archer",family:"Skeleton",positionPreferance:"backline",healthMax:43,initStart:28,initStartVariance:.24,initRecoveryModifier:1.8,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Skeleton,setup.COM.FAMILY_ATTACKS.bowWeaponAttacks),description:"A spoopy skeleton spearman animated out of arcane magicks.",damage:{pierce:{min:7,max:12}},resistance:{blunt:-.4,pierce:.3,acid:.2,sacred:-.4,frost:.2,fire:.2}}),EN_CENTAUR_BOWMAN:new Enemy({ai:setup.COM.combatAINormal,name:"Centaur Bowman",family:"Centaur",positionPreferance:"backline",healthMax:104,initStart:19,initStartVariance:.16,initRecoveryModifier:1.3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Centaur,setup.COM.FAMILY_ATTACKS.bowWeaponAttacks),description:"A proud centaur bowmen.",directChanceBase:5,directChanceIncreased:.5,damage:{pierce:{min:6,max:11},blunt:{min:3,max:4}},resistance:{shadow:-.2,fire:-.2}}),EN_CENTAUR_HERD_MENTOR:new Enemy({ai:setup.COM.combatAINormal,name:"Centaur Herd Mentor",family:"Centaur",healthMax:98,initStart:26,initStartVariance:.24,initRecoveryModifier:1.5,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Centaur,[setup.COM.ATTACKS.herdmentor],setup.COM.FAMILY_ATTACKS.shieldWeaponAttacks),description:"A shielded veteran centaur.",directChanceBase:5,directChanceIncreased:.5,directChanceMore:1.2,blockRecovery:5,blockChanceBase:5,blockChanceIncreased:.5,blockChanceMore:1.2,damage:{sacred:{min:5,max:8}},resistance:{shadow:-.2,fire:-.2}}),EN_CENTAUR_WARRIOR:new Enemy({ai:setup.COM.combatAINormal,name:"Centaur Warrior",family:"Centaur",healthMax:143,initStart:19,initStartVariance:.16,initRecoveryModifier:1.3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Centaur,setup.COM.FAMILY_ATTACKS.maceandshieldWeaponAttacks),description:"A shield and mace wielding warrior.",directChanceBase:5,directChanceIncreased:.5,directChanceMore:1.2,blockRecovery:5,blockChanceBase:5,blockChanceIncreased:.5,blockChanceMore:1.2,damage:{blunt:{min:8,max:13}},resistance:{shadow:-.2,fire:-.2}}),EN_CHAOS_CENTAUR:new Enemy({ai:setup.COM.combatAINormal,name:"Chaos Centaur",family:"Centaur",healthMax:143,initStart:19,initStartVariance:.16,initRecoveryModifier:1.3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Centaur,setup.COM.FAMILY_ATTACKS.shieldWeaponAttacks,setup.COM.FAMILY_ATTACKS.chaoticspearWeaponAttacks),description:"An unholy spear wielding centaur, complete with a shield.",directChanceBase:5,directChanceIncreased:.5,directChanceMore:1.2,blockRecovery:5,blockChanceBase:5,blockChanceIncreased:.5,blockChanceMore:1.2,damage:{blunt:{min:3,max:4},aether:{min:2,max:5},shadow:{min:2,max:5},sacred:{min:2,max:5}},resistance:{occult:.2,fire:-.2}}),EN_GHOUL:new Enemy({ai:setup.COM.combatAIRandom,name:"Ghoul",family:"Ghoul",healthMax:84,initStart:15,initStartVariance:.12,initRecoveryModifier:1,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.Ghoul),description:"A nasty ghoul, highly resistant to material damage.",criticalChanceBase:9,criticalChanceIncreased:.5,criticalChanceMore:1.2,criticalDamageBase:1,damage:{pierce:{min:3,max:5},acid:{min:5,max:9}},resistance:{material:.6,occult:-.3},absorbPercent:{material:.05}}),EN_SAUSON_GHOUL_MASTER:new Enemy({ai:setup.COM.combatAINormal,name:"Sauson Ghoul Master",family:"Sauson",positionPreferance:"backline",healthMax:64,initStart:19,initStartVariance:.12,attacks:mergeArray(setup.COM.ATTACKS.healUndead,setup.COM.ATTACKS.flash),description:"The oldest of enemies that wish to see everything burn: A Sauson.",damage:{shadow:{min:5,max:11}},resistance:{material:-.2,occult:.3}})};!function(S){S.COM||(S.COM={}),S.COM.monsters=monsters}(setup);
/* twine-user-script #20: "_equippables.min.js" */
class Equippable{constructor(obj){jQuery.extend(!0,this,DEFAULT_EQUIPPABLE,obj),this.slot||console.error(`${this.name} equippable has no slot.`),this.mods=[];for(let i=0;i<this.modslots;i++)this.mods.push(affixes.unequippedMod);this.original=cloneDeep(this)}applyMods(){let mods=this.mods,newBaseObj=cloneDeep(this.original);Object.assign(this,newBaseObj),this.mods=mods;for(let mod of this.mods)if("UnequippedMod"!==mod.type)for(let i=0;i<mod.affixes.length;i++)jQuery.extend(!0,this,updateProperty(this,mod.affixes[i][0],mod.value[i],mod.affixes[i][1]));return this}getInfo(){let solstr='<span id="EquippableInformationPlate">';return solstr+=`<span id='infoName'>${this.name}</span>`,solstr+="<span class='divider'></span>",solstr+="<span id='infoMetrics'><span class='infoSectionHeader'>METRICS</span>",solstr+="<grid id='infoMetricsAttacksGrid'>",solstr+=`<span>WDM:${this.wdm}</span>`,solstr+=`<span>initRecovery:${this.initRecovery}</span>`,solstr+="</grid></span>",solstr+="<span id='infoDamage'><span class='infoSectionHeader'>ADDED DAMAGE</span>",solstr+="<grid id='infoDamageGrid'>",solstr+='<span style="font-weight:bold">Material</span>',solstr+=`<span>Blunt:<br>${this.damage.blunt.min} - ${this.damage.blunt.max}</span>`,solstr+=`<span>Pierce:<br>${this.damage.pierce.min} - ${this.damage.pierce.max}</span>`,solstr+=`<span>Acid:<br>${this.damage.acid.min} - ${this.damage.acid.max}</span>`,solstr+='<span style="font-weight:bold">Elemental</span>',solstr+=`<span>Fire:<br>${this.damage.fire.min} - ${this.damage.fire.max}</span>`,solstr+=`<span>Frost:<br>${this.damage.frost.min} - ${this.damage.frost.max}</span>`,solstr+=`<span>Lightning:<br>${this.damage.lightning.min} - ${this.damage.lightning.max}</span>`,solstr+='<span style="font-weight:bold">Occult</span>',solstr+=`<span>Sacred:<br>${this.damage.sacred.min} - ${this.damage.sacred.max}</span>`,solstr+=`<span>Shadow:<br>${this.damage.shadow.min} - ${this.damage.shadow.max}</span>`,solstr+=`<span>Aether:<br>${this.damage.aether.min} - ${this.damage.aether.max}</span>`,solstr+="</grid></span>",solstr+="</span>",solstr}itemplate(selector){let solHTML=`<span class="itemPlate ${this.slot}">`;if(solHTML+=this.name,solHTML+="</span>",!selector)return solHTML;waitForElm(selector).then(()=>{$(selector).replaceWith(solHTML)})}}const EQUIPPABLES={debugweapon:new Equippable({name:"Debug Weapon",slot:"weapon",type:"unequipped",attacks:mergeArray(setup.COM.FAMILY_ATTACKS.debugAttacks),deflectChanceBase:1,blockChanceBase:1,tag:["all","unequipped"],damage:{blunt:{min:2e3,max:3e3}}}),unequippedweapon:new Equippable({name:"No Weapon Equipped",slot:"weapon",type:"unequipped",attacks:mergeArray(setup.COM.FAMILY_ATTACKS.unarmedAttacks),damage:{blunt:{min:2,max:3}},tag:["all","unequipped"]}),unequippedarmor:new Equippable({name:"No Armor Equipped",slot:"armor",type:"unequipped",tag:["all","unequipped"]}),unequippedaccessory:new Equippable({name:"No Accessory Equipped",slot:"accessory",type:"unequipped",tag:["all","unequipped"]}),arcanebow:new Equippable({name:"Arcane Bow",slot:"weapon",modslots:4,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.bowWeaponAttacks),damage:{fire:{min:1,max:3},frost:{min:1,max:3},lightning:{min:1,max:3}},criticalChanceBase:.03,criticalChanceIncreased:.75,initRecoveryModifier:.2,initDecrementModifier:-.1,tags:["all","bow","two-handed","elemental","fire","frost","lightning"]}),recurvebow:new Equippable({name:"Recurve Bow",slot:"weapon",modslots:4,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.bowWeaponAttacks),damage:{pierce:{min:4,max:7}},criticalChanceBase:.04,criticalChanceIncreased:.75,criticalDamageBase:.25,criticalDamageIncreased:.75,initDecrementModifier:-.3,tags:["all","bow","two-handed","material","pierce"]}),nimblespear:new Equippable({name:"Nimble Spear",slot:"weapon",modslots:3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.spearWeaponAttacks),damage:{pierce:{min:4,max:8}},deflectChanceBase:.04,deflectChanceIncreased:.75,initDecrementModifier:.1,tags:["all","spear","two-handed","pierce","material"]}),heavyspear:new Equippable({name:"Heavy Spear",slot:"weapon",modslots:3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.spearWeaponAttacks),damage:{pierce:{min:5,max:11}},deflectChanceBase:.02,deflectChanceIncreased:.5,initDecrementModifier:-.1,initRecoveryModifier:.2,tags:["all","spear","two-handed","pierce","material"]}),chaoticspear:new Equippable({name:"Occultic Spear",slot:"weapon",modslots:2,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.chaoticspearWeaponAttacks),damage:{aether:{min:1,max:3},sacred:{min:1,max:3},shadow:{min:1,max:3}},initDecrementModifier:-.2,tags:["all","spear","two-handed","occult","aether","sacred","shadow"]}),abyssalspear:new Equippable({name:"Abyssal Spear",slot:"weapon",modslots:2,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.chaoticspearWeaponAttacks),damage:{aether:{min:2,max:5},lightning:{min:2,max:5}},initDecrementModifier:-.2,tags:["all","spear","two-handed","elemental","lightning","occult","aether"]}),swordandshield:new Equippable({name:"Short Sword and Shield",slot:"weapon",modslots:3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.swordandshieldWeaponAttacks),damage:{pierce:{min:5,max:10}},criticalChanceBase:.03,criticalChanceIncreased:1,blockChanceBase:.08,blockChanceIncreased:1,blockRecovery:4,initDecrementModifier:.1,tags:["all","sword","one-handed","shield","material","pierce","block"]}),maceandshield:new Equippable({name:"Mace and Shield",slot:"weapon",modslots:3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.maceandshieldWeaponAttacks),damage:{blunt:{min:6,max:12}},directChanceBase:.03,directChanceIncreased:1,blockChanceBase:.08,blockChanceIncreased:1,blockRecovery:4,stun:3,tags:["all","mace","shield","one-handed","material","blunt","block"]}),acidicmaceandshield:new Equippable({name:"Acid Mace and Shield",slot:"weapon",modslots:2,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.maceandshieldWeaponAttacks),damage:{blunt:{min:2,max:6},acid:{min:2,max:4}},directChanceBase:.03,directChanceIncreased:1,blockChanceBase:.08,blockChanceIncreased:1,blockRecovery:4,stun:3,tags:["all","mace","shield","one-handed","material","blunt","block"]}),lumbermanaxe:new Equippable({name:"Lumberman's Axe",slot:"weapon",modslots:3,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.twohandedaxeWeaponAttacks),damage:{pierce:{min:5,max:12}},criticalChanceBase:.02,criticalChanceIncreased:.25,initDecrementModifier:0,initRecoveryModifier:-.1,tags:["all","axe","two-handed","material","pierce"]}),executioneraxe:new Equippable({name:"Executioner's Axe",slot:"weapon",modslots:2,attacks:mergeArray(setup.COM.FAMILY_ATTACKS.twohandedaxeWeaponAttacks),damage:{pierce:{min:3,max:5}},criticalChanceBase:.2,criticalChanceIncreased:.5,initDecrementModifier:-.15,initRecoveryModifier:.2,tags:["all","axe","two-handed","material","pierce"]}),knightarmor:new Equippable({name:"Knight's Armor",slot:"armor",modslots:4,resistance:{material:.2,lightning:-.2,occult:-.1},reduct:{blunt:2,pierce:4},initStart:4,initDecrementModifier:-.2,initRecoveryModifier:.1,healthMax:30,tags:["all","plate"]}),chainmail:new Equippable({name:"Chainmail",slot:"armor",modslots:3,resistance:{material:.2,lightning:-.2,occult:-.1},reduct:{pierce:1},initStart:2,initDecrementModifier:-.1,initRecoveryModifier:.05,healthMax:24,tags:["all","plate"]}),leatherarmor:new Equippable({name:"Leather Chest Armor",slot:"armor",modslots:2,resistance:{material:.1,elemental:.1,occult:-.1},healthMax:16,tags:["all","leather"]}),priestvestiges:new Equippable({name:"Priest's Vestiges",slot:"armor",modslots:3,resistance:{elemental:.1,occult:.3},healthMax:10,tags:["all","cloth"]}),comfortableclothes:new Equippable({name:"Village Clothes",slot:"armor",modslots:3,resistance:{occult:-.1},initStart:-3,initDecrementModifier:.1,initRecoveryModifier:-.1,healthMax:3,tags:["all","cloth","leather"]}),trickstersamulet:new Equippable({name:"Trickster's Amulet",slot:"accessory",modslots:2,resistance:{occult:.1},initDecrementModifier:.2,initRecoveryModifier:-.15,tags:["all"]}),elementalistsamulet:new Equippable({name:"Elementalist's Amulet",slot:"accessory",modslots:2,damage:{fire:{increased:.25},frost:{increased:.25},lightning:{increased:.25}},resistance:{elemental:.2},tags:["all"]}),occultistsamulet:new Equippable({name:"Occultist's Amulet",slot:"accessory",modslots:2,damage:{aether:{increased:.1},sacred:{increased:.1},shadow:{increased:.1}},resistance:{occult:.2},tags:["all"]}),dadspendant:new Equippable({name:"Dad's Pendant",slot:"accessory",modslots:3,resistance:{material:.1},blockRecovery:-3,blockChanceIncreased:.45,blockChanceMore:1.1,healthMax:15,tags:["all"]}),sharktoothamulet:new Equippable({name:"Sharktooth Amulet",slot:"accessory",modslots:2,damage:{pierce:{increased:.5}},tags:["all"]}),friendscharm:new Equippable({name:"Friend's Charm",slot:"accessory",modslots:3,damage:{pierce:{increased:.1}},healthMax:25,tags:["all"]})};!function(S){S.COM||(S.COM={}),S.COM.Equippable=Equippable,S.COM.EQUIPPABLES=EQUIPPABLES}(setup);
/* twine-user-script #21: "_genericTB.min.js" */
!function(S){S.tbs||(S.tbs={});let inn_tbs=[{lines:[new Line({line:"Welcome to our inn!"})]},{lines:[new Line({line:"Oh, a visitor! Welcome!"})]},{lines:[new Line({line:"We got rooms available, feel free to stay the night!"})]},{lines:[new Line({line:"Welcome to our- Oh, how cute! We'll give you the best bed!"})]},{lines:[new Line({line:"First time here? There's an extra fee involved."})]}],flavor_tbs=[{lines:[new Line({line:"No portrait here!"}),new Line({line:"String 2"})]},{lines:[new Line({portrait:"assets/imported/img/png/turn_icon_pl.png",line:"The portrait should be showing here."}),new Line({line:"And here too!."})]},{lines:[new Line({line:"An unknown speaker should be here."}),new Line({portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"redrect3",line:"The portrait and name should be showing here."}),new Line({line:"The same and portrait name should sitll be here"}),new Line({portrait:"assets/imported/img/png/turn_icon.png",speaker:"new name",line:"A new name should now appear."})]},{showBackground:!0,backgroundSrc:"assets/imported/img/png/tavern1.png",lines:[new Line({line:"background image testing."})]}],gatherinfo_tbs=[{showBackground:!0,backgroundSrc:"assets/imported/img/png/tavern1.png",lines:[new Line({line:"We're gathering info!"})]}],tavern_tbs=[{showBackground:!0,backgroundSrc:"assets/imported/img/png/tavern1.png",lines:[new Line({line:"Stay awhile and listen."})]}];S.tbs.inn_tbs=inn_tbs,S.tbs.flavor_tbs=flavor_tbs,S.tbs.gatherinfo_tbs=gatherinfo_tbs,S.tbs.tavern_tbs=tavern_tbs}(setup);
/* twine-user-script #22: "_grid.min.js" */
let DEFAULT_GRID={width:6,height:6,debug:!0};class Grid{constructor(gridOptions){if(jQuery.extend(!0,this,DEFAULT_GRID,gridOptions),this.debug){console.debug("Grid Debug is checking all hexii.");for(let hex of hexii)new Hex(hex);console.debug("All hexii have been verified.")}return this.generateEmptyGrid(),this.generatePopulatedGrid(),this.debug&&console.log("Populated Grid successfully created."),this}generateEmptyGrid(){this.grid=Array(this.height).fill(0),this.grid.forEach((_,idx)=>{this.grid[idx]=idx%2==1?Array(this.width-1).fill(0):Array(this.width).fill(0)})}generatePopulatedGrid(){for(let rowNum=0;rowNum<this.height;rowNum++)for(let columnNum=0;columnNum<this.width;columnNum++){let adjacentEdgelines=this.getAdjacentEdgelines([columnNum,rowNum]),potentialHexii=this.getPotentialHexii(adjacentEdgelines);if(0===potentialHexii.length)return this.debug&&console.log("Reattempting..."),this.generatePopulatedGrid();let chosenHex=potentialHexii.random(),hex=new Hex(chosenHex.hex);hex.configuration=chosenHex.configuration,hex.required=chosenHex.required,this.setHexAtCoord([columnNum,rowNum],hex)}}getPotentialHexii(edgelineArray){let solarr=[];for(let hex of hexii)for(let configuration in hex.edgelines){let isUsable=!0;"none"!==edgelineArray[0]&&hex.edgelines[configuration][0]!==edgelineArray[0]&&(isUsable=!1),"none"!==edgelineArray[1]&&hex.edgelines[configuration][1]!==edgelineArray[1]&&(isUsable=!1),"none"!==edgelineArray[2]&&hex.edgelines[configuration][2]!==edgelineArray[2]&&(isUsable=!1),"none"!==edgelineArray[3]&&hex.edgelines[configuration][3]!==edgelineArray[3]&&(isUsable=!1),"none"!==edgelineArray[4]&&hex.edgelines[configuration][4]!==edgelineArray[4]&&(isUsable=!1),"none"!==edgelineArray[5]&&hex.edgelines[configuration][5]!==edgelineArray[5]&&(isUsable=!1),isUsable&&solarr.push({hex:hex,configuration:configuration,required:edgelineArray})}return 0===solarr.length&&this.debug&&console.debug(`No viable hex solutions were found for [${Hex.reportEdgelines(edgelineArray)}].`),solarr}getAdjacentEdgelines(coordArr){let columnOffset=0;coordArr[1]%2==0&&(columnOffset=1);let hex0={loc:[coordArr[0]-columnOffset,coordArr[1]-1]},hex1={loc:[coordArr[0]+1-columnOffset,coordArr[1]-1]},hex2={loc:[coordArr[0]+1,coordArr[1]]},hex3={loc:[coordArr[0]+1-columnOffset,coordArr[1]+1]},hex4={loc:[coordArr[0]-columnOffset,coordArr[1]+1]},hex5={loc:[coordArr[0]-1,coordArr[1]]};return hex0.hex=this.getHexAtCoord(hex0.loc),hex1.hex=this.getHexAtCoord(hex1.loc),hex2.hex=this.getHexAtCoord(hex2.loc),hex3.hex=this.getHexAtCoord(hex3.loc),hex4.hex=this.getHexAtCoord(hex4.loc),hex5.hex=this.getHexAtCoord(hex5.loc),hex0.edgeline=0===hex0.hex?"none":hex0.hex.getFaces()[3],hex1.edgeline=0===hex1.hex?"none":hex1.hex.getFaces()[4],hex2.edgeline=0===hex2.hex?"none":hex2.hex.getFaces()[5],hex3.edgeline=0===hex3.hex?"none":hex3.hex.getFaces()[0],hex4.edgeline=0===hex4.hex?"none":hex4.hex.getFaces()[1],hex5.edgeline=0===hex5.hex?"none":hex5.hex.getFaces()[2],[hex0.edgeline,hex1.edgeline,hex2.edgeline,hex3.edgeline,hex4.edgeline,hex5.edgeline]}setHexAtCoord(coordArr,hex){this.grid[coordArr[1]][coordArr[0]]=hex}getHexAtCoord(coordArr){return void 0===this.grid[coordArr[1]]?0:void 0===this.grid[coordArr[1]][coordArr[0]]?0:this.grid[coordArr[1]][coordArr[0]]}createGrid(pixiApp){let solarr=[],scale;scale=pixiApp.renderer.width/this.width<=pixiApp.renderer.height/this.height?this.width-3:this.height-3;for(let row in this.grid){row=parseInt(row);let columnOffset=0;row%2==1&&(columnOffset=1);for(let column in this.grid[row]){column=parseInt(column);let hex=this.getHexAtCoord([column,row]),sprite=PIXI.Sprite.from(hex.src);switch(sprite.width=sprite.width/scale,sprite.height=sprite.height/scale,sprite.anchor.set(.5,.5),sprite.x=sprite.width/2*(2*column+1+columnOffset)-sprite.width/2,sprite.y=sprite.height/2*(1.5*row+1)-sprite.height/2,hex.configuration){case"inverted":case"irOnce":case"irTwice":case"irThrice":case"irQuarce":case"irQuince":sprite.scale.x*=-1}switch(hex.configuration){case"default":case"inverted":sprite.angle=0;break;case"rOnce":case"irOnce":sprite.angle=60;break;case"rTwice":case"irTwice":sprite.angle=120;break;case"rThrice":case"irThrice":sprite.angle=180;break;case"rQuarce":case"irQuarce":sprite.angle=240;break;case"rQuince":case"irQuince":sprite.angle=300}function debugCallback(){console.log(`Hex ${hex.name} placed at: [${column}, ${row}]`)}sprite.scale.x*=1.01,sprite.scale.y*=1.01,this.debug&&(sprite.interactive=!0,sprite.on("click",debugCallback)),solarr.push(sprite)}}return solarr}}!function(S){S.hex||(S.hex={}),S.hex.Grid=Grid}(setup);
/* twine-user-script #23: "_imports.min.js" */
function importGameSSR(){function loggedin(id){State.variables.user.itch_id=id,db.getDBVars(State.variables.user.itch_id).then(result=>{State.variables.meta={...State.variables.meta,...result}}).then(()=>{State.variables.user.logged_in=!0,Engine.show()})}importScripts("assets/imported/js/game_ssr.min.js").then(()=>{if(State.variables.user.logged_in=!1,db=new db,!recall("user-uuid"))return memorize("user-uuid",uuid_v4()),void db.createLoginChecker(recall("user-uuid"),loggedin);try{db.getItchID(recall("user-uuid")).then(result=>{void 0!==result&&void 0!==result.itch_id?loggedin(result.itch_id):db.createLoginChecker(recall("user-uuid"),loggedin)})}catch(e){console.warn(e)}}).catch(e=>{console.warn(e)})}async function importDiscordWidget(){importScripts("https://cdn.jsdelivr.net/npm/@widgetbot/crate@3").then(()=>{new Crate({server:"1001698951516397590",channel:"1001708306416533514"})})}!function(S){S.fns||(S.fns={}),S.fns.importGameSSR=function(){importGameSSR()},S.fns.importDiscordWidget=function(){importDiscordWidget()}}(setup);
/* twine-user-script #24: "_map2.min.js" */
const DEFAULT_MAP={debug:!0,sequence:-1};class Map{constructor(obj){let pixiApp=State.temporary.pixi;return jQuery.extend(!0,this,DEFAULT_MAP,obj),this.gridFidelity=Map.getGridFidelity(),this.playerIcon="assets/imported/img/svg/icons/private.svg",this.player=this.preparePlayer(this.playerIcon),State.variables.quest.sequenceLoaded&&(this.sequence=State.variables.quest.sequence),this.backgroundHexes=State.variables.grid.createGrid(pixiApp),this.background=this.createBackground(pixiApp),this.debug&&this.drawGridlines(pixiApp),Map.gameLoop(pixiApp),this}static getGridFidelity(){let boxValue=.0525,maxgFWidth=Math.floor(.0525*window.innerWidth),maxgFHeight=Math.floor(.0525*window.innerHeight),gridFidelity;return maxgFWidth<=maxgFHeight?(gridFidelity=maxgFWidth,maxgFHeight=Math.floor(window.innerHeight/gridFidelity)-1,maxgFWidth=Math.floor(window.innerWidth/gridFidelity)-1):(gridFidelity=maxgFHeight,maxgFHeight=Math.floor(window.innerHeight/gridFidelity)-1,maxgFWidth=Math.floor(window.innerWidth/gridFidelity)-1),gridFidelity}static getGridFidelityCoords(pos,fidelity){return{x:(pos.x-pos.x%fidelity)/fidelity,y:(pos.y-pos.y%fidelity)/fidelity}}createBackground(pixiApp){let background=new PIXI.Sprite("");background.width=pixiApp.screen.width,background.height=pixiApp.screen.height;let canvas=this;return this.debug?(background.interactive=!0,background.on("click",(function(event){console.log(`GF Coord: [${Map.getGridFidelityCoords({x:event.data.global.x,y:event.data.global.y},canvas.gridFidelity).x}, ${Map.getGridFidelityCoords({x:event.data.global.x,y:event.data.global.y},canvas.gridFidelity).y}]`),Map.movePlayer(canvas.player,Map.getGridFidelityCoords({x:event.data.global.x,y:event.data.global.y},canvas.gridFidelity))}))):(background.interactive=!0,background.on("click",(function(event){Map.movePlayer(canvas.player,Map.getGridFidelityCoords({x:event.data.global.x,y:event.data.global.y},canvas.gridFidelity))}))),background}drawGridlines(pixiApp){for(let i=0;i<=window.innerWidth/this.gridFidelity;i++){let start={x:i*this.gridFidelity,y:0},end={x:i*this.gridFidelity,y:window.innerHeight},line=new PIXI.Graphics;line.lineStyle(1,8421504,1),line.moveTo(start.x,start.y),line.lineTo(end.x,end.y),pixiApp.stage.addChild(line)}for(let i=0;i<=window.innerWidth/this.gridFidelity;i++){let start={x:0,y:i*this.gridFidelity},end={x:window.innerWidth,y:i*this.gridFidelity},line=new PIXI.Graphics;line.lineStyle(1,8421504,1),line.moveTo(start.x,start.y),line.lineTo(end.x,end.y),pixiApp.stage.addChild(line)}}preparePlayer(imgSrc){""===imgSrc&&(imgSrc="assets/imported/img/png/turn_icon_pl.png");let player=PIXI.Sprite.from(imgSrc);return player.width=this.gridFidelity,player.height=this.gridFidelity,player.x=this.gridFidelity*State.variables.quest.playerLoc.x,player.y=this.gridFidelity*State.variables.quest.playerLoc.y,player}static movePlayer(playerObj,endLocation){playerObj.endx=endLocation.x,playerObj.endy=endLocation.y}static destroyMap(){let sv=State.variables;sv.map=null,sv.pixi=null,$("#passage-map canvas").remove()}resize(){let px_ratio=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth;function isZooming(){var newPx_ratio=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth;return newPx_ratio!==px_ratio&&(px_ratio=newPx_ratio,!0)}$(window).resize((function(){isZooming()}))}static gameLoop(pixiApp){let sv=State.variables;pixiApp.ticker.add(delta=>{if(null===sv.map)return;if(sv.map.sequence!==sv.quest.sequence&&!sv.quest.sequenceLoaded){sv.map.sequence=sv.quest.sequence;for(let i=0;i<sv.quest.interactables.length;i++)sv.quest.interactables[i].removeAfterSequenceUpdate&&(sv.quest.interactables[i].removeFromCanvas(),sv.quest.interactables.splice(i,1),i-=1);sv.quest.sequences[sv.map.sequence].interactables.forEach(interactable=>{sv.quest.interactables.push(interactable())}),sv.quest.sequenceLoaded=!0}function removeInteractableIfRequested(){let sv=State.variables;if(void 0!==sv.quest.currentInteractable&&void 0!==sv.quest.currentInteractableIdx)return sv.quest.currentInteractable.isInteracting&&sv.quest.currentInteractable.removeAfterInteracting?(sv.quest.currentInteractable.removeFromCanvas(),sv.quest.interactables.splice(sv.quest.currentInteractableIdx,1),sv.quest.currentInteractableIdx=void 0,void(sv.quest.currentInteractable=void 0)):sv.quest.currentInteractable.isInteracting&&"win"===sv.quest.combatOutcome&&sv.quest.currentInteractable.removeAfterCombatWin?(sv.quest.currentInteractable.removeFromCanvas(),sv.quest.combatOutcome=void 0,sv.quest.interactables.splice(sv.quest.currentInteractableIdx,1),void(sv.quest.currentInteractableIdx=void 0)):sv.quest.currentInteractable.isInteracting&&"loss"===sv.quest.combatOutcome&&sv.quest.currentInteractable.removeAfterCombatLoss?(sv.quest.currentInteractable.removeFromCanvas(),sv.quest.combatOutcome=void 0,sv.quest.interactables.splice(sv.quest.currentInteractableIdx,1),void(sv.quest.currentInteractableIdx=void 0)):void 0}removeInteractableIfRequested(),sv.quest.sequences[sv.quest.sequence].conditional();let playerVelocity=5;sv.map.player.endx*sv.map.gridFidelity<sv.map.player.x?sv.map.player.vx=-Math.abs(5):sv.map.player.endx*sv.map.gridFidelity>sv.map.player.x?sv.map.player.vx=Math.abs(5):sv.map.player.vx=0,sv.map.player.endy*sv.map.gridFidelity<sv.map.player.y?sv.map.player.vy=-Math.abs(5):sv.map.player.endy*sv.map.gridFidelity>sv.map.player.y?sv.map.player.vy=Math.abs(5):sv.map.player.vy=0,5.25>=Math.abs(Math.abs(sv.map.player.endx*sv.map.gridFidelity)-sv.map.player.x)?(sv.map.player.x=sv.map.player.endx*sv.map.gridFidelity,sv.map.player.vx=0):sv.map.player.x+=sv.map.player.vx,5.25>=Math.abs(Math.abs(sv.map.player.endy*sv.map.gridFidelity)-sv.map.player.y)?(sv.map.player.y=sv.map.player.endy*sv.map.gridFidelity,sv.map.player.vy=0):sv.map.player.y+=sv.map.player.vy,sv.quest.playerLoc=Map.getGridFidelityCoords({y:sv.map.player.y,x:sv.map.player.x},sv.map.gridFidelity),sv.map.backgroundHexes=State.variables.grid.createGrid(pixiApp);for(let hex of sv.map.backgroundHexes)pixiApp.stage.addChild(hex);pixiApp.stage.addChild(sv.map.background),sv.quest.interactables.forEach(interactable=>{pixiApp.stage.addChild(interactable.icon)}),pixiApp.stage.addChild(sv.map.player);for(let idx=0;idx<sv.quest.interactables.length;idx++){let interactable=sv.quest.interactables[idx];interactable.position.x===sv.quest.playerLoc.x&&interactable.position.y===sv.quest.playerLoc.y?(sv.quest.currentInteractable=interactable,sv.quest.currentInteractableIdx=idx,interactable.isInteracting||(interactable.isInteracting=!0,Map.movePlayer(sv.map.player,interactable.position),interactable.timesVisited+=1,interactable.intersecting())):interactable.isInteracting=!1}})}}!function(S){S.map||(S.map={}),S.map.Map=Map}(setup);
/* twine-user-script #25: "_map_interactables2.min.js" */
let DEFAULT_INTERACTABLE={isInteracting:!1,hasInteracted:!1,timesVisited:0,position:{x:null,y:null},imgSrc:"",interactable:!0,removeAfterInteracting:!1,removeAfterSequenceUpdate:!1,removeAfterCombatWin:!1,removeAfterCombatLoss:!1,scaleX:1,scaleY:1};class Interactable{constructor(options,clone=!1){return jQuery.extend(!0,this,DEFAULT_INTERACTABLE,options),this.position=this.setPosition(),clone||(this.icon=this.prepareInteractable()),this}prepareInteractable(){""===this.imgSrc&&(this.imgSrc="assets/imported/img/png/turn_icon_pl.png");let gridFidelity=Map.getGridFidelity(),isSvg=!1,interactableIcon;return"svg"===this.imgSrc.substring(this.imgSrc.length-3).toLowerCase()&&(isSvg=!0),interactableIcon=isSvg?PIXI.Sprite.from(new PIXI.SVGResource(this.imgSrc,{scale:1})):PIXI.Sprite.from(this.imgSrc),interactableIcon.width=gridFidelity*this.scaleX,interactableIcon.height=gridFidelity*this.scaleY,interactableIcon.x=gridFidelity*this.position.x-gridFidelity*(this.scaleX-1)/2,interactableIcon.y=gridFidelity*this.position.y-gridFidelity*(this.scaleY-1)/2,interactableIcon}removeFromCanvas(){if(void 0===this.icon)return void console.log("Cannot remove what does not exist.");let app;State.temporary.pixi.stage.removeChild(this.icon)}setPosition(attempt=0){if("number"==typeof this.position.x&&"number"==typeof this.position.y)return{x:this.position.x,y:this.position.y};let sv=State.variables,RNG=uuidToNum(sv.quest.uuid);for(let i=0;i<attempt;i++)RNG=shiftNumber(RNG);let x_minGF=1,x_maxGF=window.innerWidth/Map.getGridFidelity()-1,x_percent=Number(String(RNG).slice(0,6))/999999,x=Math.round((x_maxGF-1)*x_percent+1),y_minGF=1,y_maxGF=window.innerHeight/Map.getGridFidelity()-1,y_percent=Number(String(RNG).slice(6,12))/999999,y=Math.round((y_maxGF-1)*y_percent+1),exists=!1;for(let interactable of sv.quest.interactables)if(x===interactable.position.x&&y===interactable.position.y){exists=!0;break}return exists?this.setPosition(attempt+1):{x:x,y:y}}clone(){return new this.constructor(this,{},!0)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){"icon"!==pn&&(ownData[pn]=clone(this[pn]))}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.quest||(S.quest={}),S.quest.Interactable=Interactable}(setup);
/* twine-user-script #26: "_players.min.js" */
class Player{constructor(obj){jQuery.extend(!0,this,DEFAULTPLAYER,obj)}clone(){return new this.constructor(this)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.COM||(S.COM={}),S.COM.Player=Player}(setup);const DEFAULTPLAYER={family:"player",equippables:{weapon:EQUIPPABLES.unequippedweapon,armor:EQUIPPABLES.unequippedarmor,accessory:EQUIPPABLES.unequippedaccessory},temp:!0,buffs:[],healthMax:100,initStart:26,initStartVariance:.12,initDecrementModifier:1,initRecoveryModifier:1,criticalChanceBase:.05,criticalChanceIncreased:1,criticalChanceMore:1,criticalDamageBase:1.5,criticalDamageIncreased:1,criticalDamageMore:1,directChanceBase:.05,directChanceIncreased:1,directChanceMore:1,deflectChanceBase:.05,deflectChanceIncreased:1,deflectChanceMore:1,blockRecovery:5,blockChanceBase:0,blockChanceIncreased:1,blockChanceMore:1,damage:{blunt:{min:0,max:0,increased:0,more:1},pierce:{min:0,max:0,increased:0,more:1},acid:{min:0,max:0,increased:0,more:1},fire:{min:0,max:0,increased:0,more:1},frost:{min:0,max:0,increased:0,more:1},lightning:{min:0,max:0,increased:0,more:1},sacred:{min:0,max:0,increased:0,more:1},shadow:{min:0,max:0,increased:0,more:1},aether:{min:0,max:0,increased:0,more:1}},reduct:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},resistance:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},resistanceMax:{material:75,blunt:75,pierce:75,acid:75,elemental:75,fire:75,frost:75,lightning:75,occult:75,sacred:75,shadow:75,aether:75},absorbPercent:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0},absorbPercentMax:{material:45,blunt:45,pierce:45,acid:45,elemental:45,fire:45,frost:45,lightning:45,occult:45,sacred:45,shadow:45,aether:45},absorbFlat:{material:0,blunt:0,pierce:0,acid:0,elemental:0,fire:0,frost:0,lightning:0,occult:0,sacred:0,shadow:0,aether:0}};
/* twine-user-script #27: "_q_spider.min.js" */
let ittybittyman=function(){return new setup.quest.Interactable({removeAfterSequenceUpdate:!0,removeAfterInteracting:!0,imgSrc:"assets/imported/img/svg/icons/beard.svg",intersecting:function(){let seq1_tb={showBackground:!1,backgroundSrc:"",showDimmer:!0,lines:[new Line({portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Concerned Man",line:"There sure have been a lot of the itty bitties around recently, but they don't seem to do much damage, so they'll be perfect for some young folk like you to handle."}),new Line({portrait:null,speaker:null,line:"You thank the man and move on."})]};new setup.tb.TextBox(seq1_tb)}})},spider_intersection=function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;Map.destroyMap(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;sv.quest.subquest+=1,sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_SPIDERS()}))},spiders=function(){return new setup.quest.Interactable({imgSrc:"assets/imported/img/svg/icons/masked-spider.svg",removeAfterCombatWin:!0,removeAfterSequenceUpdate:!0,intersecting:spider_intersection})},sequence0a_intersecting=function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;Map.destroyMap(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;Quest.increaseSequence(),sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_BABYSPIDER1()}))},sequence0a=function(){return new setup.quest.Interactable({imgSrc:"assets/imported/img/svg/icons/hanging-spider.svg",position:{x:4,y:6},removeAfterSequenceUpdate:!0,intersecting:sequence0a_intersecting})},sequence0=new Sequence({objective:"Quell the sudden enemy.",interactables:[sequence0a,ittybittyman]}),city_seq1_interaction=function(){Quest.increaseSequence();let city_tb={showBackground:!1,backgroundSrc:"",showDimmer:!0,lines:[new Line({portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Mayor",line:"There sure are a lot of spiders around. Why don't ya go to the guild and get some buddies and slay some of them for us."}),new Line({portrait:null,speaker:null,line:"You thank the man and move on."})]};new setup.tb.TextBox(city_tb)},city_seq4_interaction=function(){Quest.increaseSequence();let city_tb={showBackground:!1,backgroundSrc:"",showDimmer:!0,lines:[new Line({portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Mayor",line:"Momma Spider time."}),new Line({portrait:null,speaker:null,line:"You thank the man and move on."})]};new setup.tb.TextBox(city_tb)},city=function(){return new setup.quest.Interactable({imgSrc:"assets/imported/img/svg/icons/village.svg",scaleX:1.75,scaleY:1.75,intersecting:function(){let sv=State.variables,city=new setup.map.CityMenu({name:"Testing City c:",hasGuildHall:!0,hasInn:!0});1===sv.quest.sequence&&city_seq1_interaction(),4===sv.quest.sequence&&city_seq4_interaction(),city.display()}})},sequence1=new Sequence({objective:"Find the city and visit the Mayor.",interactables:[city]}),sequence3intro_tb={showBackground:!1,backgroundSrc:"",showDimmer:!0,lines:[new Line({portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Narrator",line:"In the distance you see a bigger spider along with its family moving about. Curious about the size of the beast, you decide to check it out."})]},sequence2=new Sequence({objective:"Slay the sudden onslaught of spiders.",interactables:[spiders,spiders,spiders,spiders,spiders],conditional:function(){let sv=State.variables;sv.quest.subquest>=2&&(sv.quest.subquest=0,new setup.tb.TextBox(sequence3intro_tb),Quest.increaseSequence())}}),daddyinteraction=function(){console.log("This shouldn't run until interaction"),new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;Map.destroyMap(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;Quest.increaseSequence(),sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_DADDYSPIDER()}))},daddyspider=function(){return new setup.quest.Interactable({imgSrc:"assets/imported/img/svg/icons/spider-alt.svg",removeAfterSequenceUpdate:!0,intersecting:function(){daddyinteraction()}})},sequence3=new Sequence({playerLoc:{x:2,y:2},objective:"Slay the spider ringleader.",interactables:[daddyspider]}),sequence4=new Sequence({objective:"Return back to town.",interactables:[]}),mommainteractation=function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;Map.destroyMap(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;Quest.increaseSequence(),sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_MOMMASPIDER()}))},mommaspider=function(){return new setup.quest.Interactable({imgSrc:"assets/imported/img/png/turn_icon_en.png",removeAfterSequenceUpdate:!0,intersecting:mommainteractation})},sequence5=new Sequence({objective:"Return back to town.",interactables:[mommaspider]}),sequence6=new Sequence({objective:"Demo complete!",interactables:[]}),quest=new Quest({playerLoc:{x:2,y:6},guild:{},sequences:[sequence0,sequence1,sequence2,sequence3,sequence4,sequence5,sequence6]});!function(S){S.quests||(S.quests={}),S.quests.spiderQuest2=quest}(setup);
/* twine-user-script #28: "_setup.min.js" */
!function(S){S.CONST||(S.CONST={})}(setup);
/* twine-user-script #29: "_textbox.min.js" */
let DEFAULTTEXTBOX={showBackground:!1,backgroundSrc:"",showDimmer:!0,lines:[new Line({DEFAULTLINE:DEFAULTLINE})]};class TextBox{constructor(obj){jQuery.extend(!0,this,DEFAULTTEXTBOX,obj);let sv=State.variables;sv.PrevGameState=sv.GameState,sv.GameState="textbox",this.currentLine=0,this.start()}start(){$(document).trigger(":textboxopened"),$("#textbox-container").click(()=>{this.next()}),this.showDimmer?$("#textbox-container").removeClass("hidden"):$("#textbox-container").addClass("hidden"),this.showBackground?($("#textbox-container").addClass("showbackground"),$("#textbox-container").css("background-image",`url(${this.backgroundSrc})`)):($("#textbox-container").removeClass("showbackground"),$("#textbox-container").css("background-image","")),$("#textbox").removeClass("hidden"),this.display(0)}display(lineIdx){null===this.lines[lineIdx].portrait||void 0===this.lines[lineIdx].portrait?$("#textbox-container").removeClass("showportrait"):null===this.lines[lineIdx].portrait&&void 0===this.lines[lineIdx].portrait||($("#textbox #textbox-portrait").css("background-image",`url(${this.lines[lineIdx].portrait})`),$("#textbox-container").addClass("showportrait")),null===this.lines[lineIdx].speaker||void 0===this.lines[lineIdx].speaker?$("#textbox-container").removeClass("showspeakername"):null===this.lines[lineIdx].speaker&&void 0===this.lines[lineIdx].speaker||($("#textbox #textbox-speaker").text(this.lines[lineIdx].speaker),$("#textbox-container").addClass("showspeakername")),!0===this.lines[lineIdx].wasSeen?$("#textbox #textbox-text").text(this.lines[lineIdx].line):(this.lines[lineIdx].wasSeen=!0,$("#textbox #textbox-text").text(this.lines[lineIdx].line))}previous(){console.log("previous")}next(){this.currentLine+=1,this.currentLine>=this.lines.length?this.close():this.display(this.currentLine)}close(){let sv=State.variables;$("#textbox-container").addClass("hidden"),$("#textbox").addClass("hidden"),$("#textbox #textbox-text").text(""),$("#textbox-container").css("background-image",""),$("#textbox #textbox-portrait").css("background-image",""),sv.GameState=sv.PrevGameState,sv.PrevGameState=void 0,$("#textbox-container").off("click"),$(document).trigger(":textboxclosed")}clone(){return new this.constructor(this)}toJSON(){const ownData={};return Object.keys(this).forEach((function(pn){ownData[pn]=clone(this[pn])}),this),JSON.reviveWrapper(`new ${this.constructor.name}($ReviveData$)`,ownData)}}!function(S){S.tb||(S.tb={}),S.tb.TextBox=TextBox}(setup);
/* twine-user-script #30: "_update.min.js" */
function update_save(){switch(State.variables.version){case void 0:console.log("Updating save data to %c0.1.0 InDev%c.","color: lightblue","color: initial"),State.variables.version="0.1.0 InDev",Save.autosave.save(),console.log("Successfully updated save data to %c0.1.0 InDev%c.","color: lightblue","color: initial")}}!function(S){S.fns||(S.fns={}),S.fns.update_save=function(){update_save()}}(setup);
/* twine-user-script #31: "_utilities.min.js" */
function addTooltip(macroname,passage,metaname=!1){let psg=Story.get(passage);Template.add(macroname,(function(){let name=metaname||this.name;return settings.tooltips?"<<tt "+psg.title+">>"+name+"<</tt>>":name}))}function settingsHandler(){switch(Template.has("he")&&(Template.delete("he"),Template.delete("He"),Template.delete("him"),Template.delete("himself"),Template.delete("his"),Template.delete("Mr"),Template.delete("Mister"),Template.delete("men"),Template.delete("wizard"),Template.delete("wizards"),Template.delete("boy"),Template.delete("man"),Template.delete("sir")),settings.pronouns){case"male":Template.add("he","he"),Template.add("He","He"),Template.add("him","him"),Template.add("himself","himself"),Template.add("his","his"),Template.add("Mr","Mr."),Template.add("Mister","Mister"),Template.add("men","men"),Template.add("wizard","wizard"),Template.add("wizards","wizards"),Template.add("boy","boy"),Template.add("man","man"),Template.add("sir","sir");break;case"female":Template.add("he","she"),Template.add("He","She"),Template.add("him","her"),Template.add("himself","herself"),Template.add("his","her"),Template.add("Mr","Miss"),Template.add("Mister","Miss"),Template.add("men","women"),Template.add("wizard","witch"),Template.add("wizards","witches"),Template.add("boy","girl"),Template.add("man","woman"),Template.add("sir","ma'am");break;default:Template.add("he","they"),Template.add("He","They"),Template.add("him","them"),Template.add("himself","theirself"),Template.add("his","their"),Template.add("Mr","M."),Template.add("Mister","Gentleperson"),Template.add("men","people"),Template.add("wizard","wizard"),Template.add("wizards","wizards"),Template.add("man","guy"),Template.add("sir","sir")}}function assignFieldOfObjectsToArray(objarr,field){let solarr=[];return objarr.forEach(v=>{solarr.push(v[field])}),solarr}function someValuesTrue(arr,cond){let isViable=!1;return arr.forEach(v=>{cond(v)&&(isViable=!0)}),isViable}function allValuesTrue(arr,cond){let isViable=!0;return arr.forEach(v=>{cond(v)||(isViable=!1)}),isViable}function ranItems(amount,arr,isDuplicatable=!1){let solarr=[];if(1===amount)return[arr[Math.floor(Math.random()*arr.length)]];if(isDuplicatable){for(;amount>0;amount--)solarr.push(arr[Math.floor(Math.random()*arr.length)]);return solarr}for(amount>arr.length&&(console.warn(`ranItems: You tried to randomized without creating duplicates ${amount} items, but there are only ${arr.length} items in the array. We set the amount to the length of the array so the program can continue running.`),amount=arr.length);amount>0;amount--){let randItem=arr[Math.floor(Math.random()*arr.length)];for(;solarr.includes(randItem);)randItem=arr[Math.floor(Math.random()*arr.length)];solarr.push(randItem)}return solarr}function weightedRandom(weightedArray){let randomNumber=weightedArray.reduce((a,b)=>a+b[1],0)*Math.random();for(let element of weightedArray)if((randomNumber-=element[1])<0)return element[0]}function cloneDeep(obj,...args){return Array.isArray(obj)?jQuery.extend(!0,[],obj,args):jQuery.extend(!0,{},obj,args)}function mergeArray(){let solarr=[];for(let i=0;i<arguments.length;i++)solarr=solarr.concat(arguments[i]);return solarr}function waitForElm(selector){return new Promise(resolve=>{if(document.querySelector(selector))return resolve(document.querySelector(selector));const observer=new MutationObserver(mutations=>{document.querySelector(selector)&&(resolve(document.querySelector(selector)),observer.disconnect())});observer.observe(document.body,{childList:!0,subtree:!0})})}function waitForNumberOfElm(selector,number){return new Promise(resolve=>{if(document.querySelector(selector)&&$(selector).length>=number)return resolve(document.querySelector(selector));const observer=new MutationObserver(mutations=>{document.querySelector(selector)&&$(selector).length>=number&&(resolve(document.querySelector(selector)),observer.disconnect())});observer.observe(document.body,{childList:!0,subtree:!0})})}function setProperty(obj,path,value){const[head,...rest]=path.split(".");return{...obj,[head]:rest.length?setProperty(obj[head],rest.join("."),value):value}}function updateProperty(obj,path,value,updateWith){const[head,...rest]=path.split(".");let result;return result=rest.length?updateProperty(obj[head],rest.join("."),value,updateWith):"+"===updateWith?obj[head]+value:"*"===updateWith?obj[head]*(1+value):value,{...obj,[head]:result}}function waitFor(ms){return new Promise(resolve=>{setTimeout(()=>{resolve("")},ms)})}function uuidToNum(uuid){let tempUUID;return Number(String(BigInt("0x"+uuid.replace(/-/g,""))).slice(0,12))}function shiftNumber(number){return parseInt(`${String(number).substring(1)}${number.toString()[0]}`)-1}!function(S){S.fns||(S.fns={}),S.fns.addTooltip=function(macroname,passage,metaname=!1){addTooltip(macroname,passage,metaname)},S.fns.ranItems=function(amount,arr,isDuplicatable=!1){return ranItems(amount,arr,isDuplicatable)},S.fns.settingsHandler=function(){settingsHandler()},S.fns.assignFieldOfObjectsToArray=function(objarr,field){return assignFieldOfObjectsToArray(objarr,field)},S.fns.allValuesTrue=function(arr,cond){return allValuesTrue(arr,cond)},S.fns.cloneDeep=function(obj,...args){return cloneDeep(obj,...args)},S.fns.waitForElm=function(selector){return waitForElm(selector)},S.fns.waitForNumberOfElm=function(selector,number){return waitForNumberOfElm(selector,number)},S.fns.waitFor=function(ms){return waitFor(ms)}}(setup);
/* twine-user-script #32: "a-macro.min.js" */
/*! Maliface's a macro. Available at https://github.com/MalifaciousGames/Mali-s-Macros/blob/main/a-macro/a-macro.md */
Macro.add(["a","adel","but","butdel"],{isAsync:!0,tags:null,handler(){let passage,toApp=[],toRep=[],toPrep=[];const payload=this.payload[0].contents.trim();if(0===this.args.length)return this.error("No link text specified");if(this.args.length%2!=1)return this.error('Number of arguments must be odd: "link text" + attribute/value pair');let link="but"===this.name||"butdel"===this.name?$(document.createElement("button")):$(document.createElement("a"));for(let i=1;i<this.args.length;i+=2)"goto"===this.args[i]?(link.attr("data-passage",this.args[i+1]),passage=this.args[i+1],Story.has(passage)?(link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&link.addClass("link-visited")):link.addClass("link-broken")):"append"===this.args[i]||"app"===this.args[i]?toApp.push(this.args[i+1]):"prepend"===this.args[i]||"prep"===this.args[i]?toPrep.push(this.args[i+1]):"replace"===this.args[i]||"rep"===this.args[i]?toRep.push(this.args[i+1]):link.attr(this.args[i],this.args[i+1]);link.wikiWithOptions({profile:"core"},this.args[0]),link.addClass(`macro-${this.name}`).ariaClick({namespace:".macros",role:"but"===this.name||"butdel"===this.name?"button":"link",one:"adel"===this.name||"butdel"===this.name||null!=passage},this.createShadowWrapper(()=>{""!==payload&&(toRep.length+toPrep.length+toApp.length?(toRep.length&&toRep.forEach(target=>{$(target).empty().wiki(payload)}),toPrep.length&&toPrep.forEach(target=>{$(document.createDocumentFragment()).wiki(payload).prependTo(target)}),toApp.length&&toApp.forEach(target=>{$(target).wiki(payload)})):$.wiki(payload))},null!=passage?()=>Engine.play(passage):"adel"===this.name||"butdel"===this.name?()=>link.remove():null)).appendTo(this.output)}});
/* twine-user-script #33: "bg-macro.min.js" */
Macro.add("bg",{handler(){if(2!==this.args.length)return this.error("requires precisely two args: a url and a decimal");if("string"!=typeof this.args[0])return this.error("the first arg must be a string");if("number"!=typeof this.args[1]&&this.args[1]>=0&&this.args[1]<=1)return this.error("the second arg must be a decimal between 0 and 1");let sheet=window.document.styleSheets[0];sheet.deleteRule(0),sheet.insertRule(`\n            html {\n                background-image: linear-gradient(rgba(0, 0, 0, ${this.args[1]}), rgba(0, 0, 0, ${this.args[1]})), url(${this.args[0]});\n                background-size: cover;\n            }\n        `,0)}});
/* twine-user-script #34: "combats.min.js" */
!function(S){let combats={CI_BABYSPIDER1:function(){State.variables.ci=new setup.COM.CombatInstance({winPassage:"Map",losePassage:"Map",ep:["EN_BABY_SPIDER"]}),Engine.play("Combat_Overlord")},CI_BABYSPIDERS:function(){State.variables.ci=new setup.COM.CombatInstance({winPassage:"Map",losePassage:"Map",ep:["EN_BABY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER"]}),Engine.play("Combat_Overlord")},CI_SPIDERS:function(){State.variables.ci=new setup.COM.CombatInstance({winPassage:"Map",losePassage:"Map",ep:["EN_BABY_SPIDER"]}),Engine.play("Combat_Overlord")},CI_DADDYSPIDER:function(){State.variables.ci=new setup.COM.CombatInstance({winPassage:"Map",losePassage:"Map",ep:["EN_BABY_SPIDER","EN_DADDY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER"]}),Engine.play("Combat_Overlord")},CI_MOMMASPIDER:function(){State.variables.ci=new setup.COM.CombatInstance({winPassage:"Map",losePassage:"Map",ep:["EN_BABY_SPIDER","EN_MOMMY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER"]}),Engine.play("Combat_Overlord")}};S.combats=combats}(setup);
/* twine-user-script #35: "flash-macro.min.js" */
!function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,e),t&&t.constructor===Object&&(n=t,t=null),this.selector=t,this.options=Object.assign({},e.DEFAULT_OPTIONS,n),this._bag=[],this._setElement(),this._process()}return i(e,[{key:"getBag",value:function(){return this._bag}},{key:"setBag",value:function(e){return this._bag.push(e),this}},{key:"attach",value:function(){var e;return(e=this._bag).push.apply(e,arguments),this._checkLimit(),this}},{key:"detach",value:function(e){return this._bag=this._bag.filter((function(t){return e instanceof FlashMessage&&t!==e})),this}},{key:"_setElement",value:function(){!this.selector||this.selector instanceof Element||this.selector.constructor===String&&(this.selector=document.querySelectorAll(this.selector)||null)}},{key:"_process",value:function(){var e=this;this.selector&&(Array.isArray(this.selector)||this.selector.constructor===NodeList?this.selector.forEach((function(t){return e.setBag(new FlashMessage(t,e.options))})):this.setBag(new FlashMessage(this.selector,this.options)),this._checkLimit())}},{key:"_checkLimit",value:function(){if(this.options.limit&&this._bag.length>this.options.limit)for(var e=0;e<this._bag.length-this.options.limit;++e)this._bag[e].destroy(),this.detach(this._bag[e])}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},{key:"DEFAULT_OPTIONS",get:function(){return{limit:0}}}]),e}();t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),i=(n.n(s),n(0)),r=n(3),o=n(4);n.n(o),function(e){void 0!==e&&(e.Flash||(e.Flash=i.a),e.FlashMessage||(e.FlashMessage=r.a))}(window),t.default={Flash:i.a,FlashMessage:r.a}},function(e,t){"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(e){"use strict";if("Element"in e){var t="classList",n="prototype",s=e.Element[n],i=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},u=function(e){for(var t=r.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],s=0,i=n.length;i>s;s++)this.push(n[s]);this._updateClassName=function(){e.setAttribute("class",""+this)}},h=u[n]=[],c=function(){return new u(this)};if(a[n]=Error[n],h.item=function(e){return this[e]||null},h.contains=function(e){return-1!==l(this,e+="")},h.add=function(){var e,t=arguments,n=0,s=t.length,i=!1;do{e=t[n]+"",-1===l(this,e)&&(this.push(e),i=!0)}while(++n<s);i&&this._updateClassName()},h.remove=function(){var e,t,n=arguments,s=0,i=n.length,r=!1;do{for(e=n[s]+"",t=l(this,e);-1!==t;)this.splice(t,1),r=!0,t=l(this,e)}while(++s<i);r&&this._updateClassName()},h.toggle=function(e,t){e+="";var n=this.contains(e),s=n?!0!==t&&"remove":!1!==t&&"add";return s&&this[s](e),!0===t||!1===t?t:!n},h.toString=function(){return this.join(" ")},i.defineProperty){var _={get:c,enumerable:!0,configurable:!0};try{i.defineProperty(s,t,_)}catch(e){(void 0===e.number||-2146823252===e.number)&&(_.enumerable=!1,i.defineProperty(s,t,_))}}else i[n].__defineGetter__&&s.__defineGetter__(t,c)}}(self),function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,s=arguments.length;for(n=0;s>n;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}())},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function genNewID(){var randomID;return Math.floor(1e8*Math.random())}var i=(n(0),function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}()),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._CONSTANTS.TYPES.ERROR,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(this,e),n.constructor===Object&&(i=n,n=e._CONSTANTS.TYPES.ERROR),this.$_element=null,this.setOptions(i),t instanceof Element?(this.$_element=t,this._composeMessage()):(this.message=t,this.type=n),this.$_container=document.querySelector(this.options.container)||null,this._c_timeout=null,this.$_progress=null,this._progress_value=0,this._createContainer(),this._createMessage()}return i(e,null,[{key:"_CONSTANTS",get:function(){return{TYPES:{SUCCESS:"success",WARNING:"warning",ERROR:"error",INFO:"info"},THEME:"default",LAYOUT:"top-right",CONTAINER:".flash-container",CLASSES:{CONTAINER:"flash-container",VISIBLE:"flash-is-visible",FLASH:"flash-message",PROGRESS:"flash-progress",PROGRESS_HIDDEN:"flash-is-hidden"}}}},{key:"DEFAULT_OPTIONS",get:function(){return{progress:!1,interactive:!0,timeout:8e3,appear_delay:200,remove_delay:600,container:e._CONSTANTS.CONTAINER,classes:{container:e._CONSTANTS.CLASSES.CONTAINER,visible:e._CONSTANTS.CLASSES.VISIBLE,flash:e._CONSTANTS.CLASSES.FLASH,progress:e._CONSTANTS.CLASSES.PROGRESS,progress_hidden:e._CONSTANTS.CLASSES.PROGRESS_HIDDEN},theme:e._CONSTANTS.THEME,layout:e._CONSTANTS.LAYOUT,onShow:null,onClick:null,onClose:null}}}]),i(e,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},e.DEFAULT_OPTIONS,t),this}},{key:"destroy",value:function(){this._close()}},{key:"_createContainer",value:function(){null!==this.$_container&&document.body.contains(this.$_container)||(this.$_container=document.createElement("div"),this.$_container.classList.add(this.options.classes.container),document.body.firstChild?document.body.insertBefore(this.$_container,document.body.firstChild):document.body.appendChild(this.$_container)),this.$_container.setAttribute("aria-label","Notification list"),this.$_container.tabIndex=0,this._setLayout()}},{key:"_composeMessage",value:function(){this.message=this.$_element.dataset.message||this.$_element.innerHTML||"",this.type=this.$_element.dataset.type||e._CONSTANTS.TYPES.ERROR,void 0!==this.$_element.dataset.progress&&this.setOptions({progress:!0}),this.$_element.classList.add("flash-"+this.type)}},{key:"_createMessage",value:function(){if(this.$_element)this.$_element.querySelector(".thumb")&&this.$_element.classList.add("has-thumb");else{if(this.$_element=document.createElement("div"),this.$_element.classList.add(this.options.classes.flash,"flash-"+this.type),this.$_element.setAttribute("data-type",this.type),this.$_element.setAttribute("aria-label",this.message),this.$_element.setAttribute("data-message",this.message),this.$_element.innerHTML=this.message,this.options.thumb){var e=document.createElement("img");e.classList.add("thumb"),e.src=this.options.thumb,this.$_element.classList.add("has-thumb"),this.$_element.appendChild(e)}this._append()}this._setTheme(),this._hasProgress()&&this._progressBar(),this.$_element.dataset.timeout&&(this.options.timeout=parseInt(this.$_element.dataset.timeout,10)),this._behavior(),!0===this._isInteractive()&&this._bindEvents(),this.$_element.setAttribute("id","flash-id-"+genNewID()),this.$_element.setAttribute("role","alert"),this.$_element.tabIndex=1}},{key:"_append",value:function(){this.$_container.appendChild(this.$_element)}},{key:"_behavior",value:function(){var e=this;this._run(),window.setTimeout((function(){return e.$_element.classList.add(e.options.classes.visible)}),this.options.appear_delay)}},{key:"_run",value:function(){var e=this;this._startProgress(),this._c_timeout=window.setTimeout((function(){return e._close()}),this.options.timeout)}},{key:"_stop",value:function(){null!==this._c_timeout&&(window.clearTimeout(this._c_timeout),this._stopProgress(),this._c_timeout=null)}},{key:"_close",value:function(){var e=this;e.$_element.remove(),0===$(e.options.container).children().length&&$(e.options.container).remove()}},{key:"_clear",value:function(){!this.$_container.children.length&&this.$_container.parentNode.contains(this.$_container)&&this.$_container.parentNode.removeChild(this.$_container)}},{key:"_bindEvents",value:function(){var e=this;this._bindEvent("mouseover",(function(t){return e._stop()})),this._bindEvent("mouseleave",(function(t){return e._run()})),this._bindEvent("click",(function(t){return e._close()}))}},{key:"_bindEvent",value:function(e,t){try{this.$_element.addEventListener?this.$_element.addEventListener(e,t,!1):this.$_element.attachEvent("on"+this._getCapitalizedEventName(e),t)}catch(e){throw new Error("FlashMessage._bindEvent - Cannot add event on element - "+e)}}},{key:"_unbindEvents",value:function(){var e=this;this._unbindEvent("mouseover",(function(t){return e._stop()})),this._unbindEvent("mouseleave",(function(t){return e._run()})),this._unbindEvent("click",(function(t){return e._close()}))}},{key:"_unbindEvent",value:function(e,t){try{this.$_element.removeEventListener?this.$_element.removeEventListener(e,t,!1):this.$_element.detachEvent("on"+this._getCapitalizedEventName(e),t)}catch(e){throw new Error("FlashMessage._unbindEvent - Cannot remove event on element - "+e)}}},{key:"_isInteractive",value:function(){return this.options.interactive||this.$_element.classList.add("flash-not-interactive"),Boolean(!0===this.options.interactive)}},{key:"_getCapitalizedEventName",value:function(e){return e.charAt(0).toUpperCase()+e.substr(1)}},{key:"_hasProgress",value:function(){return Boolean(this.options.progress)}},{key:"_progressBar",value:function(){this.$_progress=document.createElement("div"),this.$_progress.classList.add(this.options.classes.progress),this.$_element.appendChild(this.$_progress),this.$_progress.setAttribute("role","progressbar"),this.$_progress.setAttribute("aria-valuemin",0),this.$_progress.setAttribute("aria-valuemax",100)}},{key:"_setProgress",value:function(){const elapsed=Date.now()-this._progress_starttime,pct=Math.min(1,elapsed/this.options.timeout),width=(100*pct).toFixed(2);this.$_progress.setAttribute("aria-valuenow",width),this.$_progress.style.width=width+"%",this._progress_value=width,pct>=1?this._stopProgress():requestAnimationFrame(this._setProgress.bind(this))}},{key:"_startProgress",value:function(){var e=this;this._hasProgress()&&(this.$_progress||this._progressBar(),this._stopProgress(),this._progress_starttime=Date.now(),this.$_progress.classList.remove(this.options.classes.progress_hidden),e._setProgress())}},{key:"_stopProgress",value:function(){this._hasProgress()&&this.$_progress&&(this.$_progress.classList.add("flash-is-hidden"),this._progress_value=0)}},{key:"_setTheme",value:function(){var t=this.$_element.dataset.theme||this.options.theme||"";t.length&&t!==e._CONSTANTS.THEME&&this.$_element.classList.add(t+"-theme")}},{key:"_setLayout",value:function(){var l=this.$_container.dataset.layout||this.options.layout||"";l.length&&this.$_container.classList.add(l+"-flash-layout")}}],[{key:"create",value:function(t){return new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._CONSTANTS.TYPES.ERROR,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"success",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t,e._CONSTANTS.TYPES.SUCCESS,n)}},{key:"warning",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t,e._CONSTANTS.TYPES.WARNING,n)}},{key:"error",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t,e._CONSTANTS.TYPES.ERROR,n)}},{key:"info",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t,e._CONSTANTS.TYPES.INFO,n)}},{key:"addCustomVerbs",value:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];n&&n.length&&n.forEach((function(t){e[t]||(e[t]=function(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(n,t,s)})}))}}]),e}();t.a=r},function(e,t){}]),Macro.add("flash",{tags:["progress","Progress","interactive","Interactive","timeout","Timeout","delay","Delay","container","Container","theme","Theme","classContainer","classcontainer","classFlash","classflash","classVisible","classvisible","classProgress","classprogress","classHidden","classhidden","flashtype","flashType","layout","Layout","transition","Transition"],handler:function(){const typeArray=["success","warning","error","info","bug","disabled","default"],layoutArray=["top-right","middle-right","bottom-right","middle-bottom","bottom-left","middle-left","top-left","middle-top"];let errorArray=[],defaultOptions={type:"default",progress:!0,interactive:!0,timeout:8e3,appear_delay:200,container:".flash-container",theme:"default",layout:"top-right",classes:{container:"flash-container",flash:"flash-message",visible:"flash-is-visible",progress:"flash-progress",progress_hidden:"flash-is-hidden"}};if(window.addEventListener||window.attachEvent||document.createElement||errorArray.push("Unable to either add EvenListener, AttachEvent or createElement"),this.args.length<=0)return this.error('First argument cannot be skipped, please insert a string via <<flash "Text here.">>.');if(""===this.args[0])return this.error("First argument cannot be an empty string.");for(const pay of this.payload)switch(pay.name.toLowerCase()){case"flashtype":"string"!=typeof pay.args[0]&&errorArray.push("Type must be a string."),"function"==typeof window.FlashMessage[pay.args[0]]||typeArray.includes(pay.args[0])||errorArray.push("Type does not include: "+pay.args[0]),defaultOptions.type=pay.args[0];break;case"layout":"string"!=typeof pay.args[0]&&errorArray.push("Layout must be a string."),layoutArray.includes(pay.args[0])||errorArray.push("Layout does not include: "+pay.args[0]),defaultOptions.layout=pay.args[0];break;case"progress":"boolean"!=typeof pay.args[0]&&errorArray.push("Progress must be true or false."),defaultOptions.progress=pay.args[0];break;case"interactive":"boolean"!=typeof pay.args[0]&&errorArray.push("Interactive must be true or false."),defaultOptions.interactive=pay.args[0];break;case"timeout":"number"!=typeof pay.args[0]&&errorArray.push("Timeout must be a number."),pay.args[0]<500&&errorArray.push("Timeout cannot be lower than 500ms."),pay.args[0]>1e5&&errorArray.push("Timeout cannot be higher than 100s."),defaultOptions.timeout=pay.args[0];break;case"delay":"number"!=typeof pay.args[0]&&errorArray.push("Delay must be a number."),pay.args[0]<50&&errorArray.push("Delay cannot be lower than 50ms."),pay.args[0]>1e5&&errorArray.push("Delay cannot be higher than 100s."),defaultOptions.appear_delay=pay.args[0];break;case"container":$("."+pay.args[0]).length||errorArray.push("Container not found."),defaultOptions.container=pay.args[0];break;case"theme":"string"!=typeof pay.args[0]&&errorArray.push("Theme must be a string."),"dark"!==pay.args[0]&&errorArray.push('The only theme option is "dark".'),defaultOptions.theme=pay.args[0];break;case"classcontainer":"string"!=typeof pay.args[0]&&errorArray.push("Class must be a string."),defaultOptions.classes.container=pay.args[0];break;case"classflash":"string"!=typeof pay.args[0]&&errorArray.push("Class must be a string."),defaultOptions.classes.flash=pay.args[0];break;case"classvisible":"string"!=typeof pay.args[0]&&errorArray.push("Class must be a string."),defaultOptions.classes.visible=pay.args[0];break;case"classprogress":"string"!=typeof pay.args[0]&&errorArray.push("Class must be a string."),defaultOptions.classes.progress=pay.args[0];break;case"classhidden":"string"!=typeof pay.args[0]&&errorArray.push("Class must be a string."),defaultOptions.classes.progress_hidden=pay.args[0];break;case"transition":"boolean"!=typeof pay.args[0]&&errorArray.push("Interactive must be true or false."),pay.args[0]&&$(document).one(":passagestart",(function(ev){$(defaultOptions.container).remove()}))}if(errorArray.length>0)return this.error(errorArray.join("\n"));new window.FlashMessage(this.args[0],defaultOptions.type,{progress:defaultOptions.progress,interactive:defaultOptions.interactive,timeout:defaultOptions.timeout,appear_delay:defaultOptions.appear_delay,container:defaultOptions.container,theme:defaultOptions.theme,layout:defaultOptions.layout,classes:{container:defaultOptions.classes.container,flash:defaultOptions.classes.flash,visible:defaultOptions.classes.visible,progress:defaultOptions.classes.progress,progress_hidden:defaultOptions.classes.progress_hidden}})}});
/* twine-user-script #36: "img-macro.min.js" */
Macro.add("img",{handler(){if("string"!=typeof this.args[0])return this.error("the first arg must be the src to your image");if("string"!=typeof this.args[1])return this.error('the second arg must be one of: "hori", "verti-left", "verti-right"');let blurred="";void 0!==this.args[2]&&!0!==this.args[2]||(blurred="class=blurred"),"hori"===this.args[1]&&$(this.output).wiki(`<br><imghori><img src="${this.args[0]}" ${blurred}></imghori>`),"verti-left"===this.args[1]&&$(this.output).wiki(`<br><imgverti style="float: left; clear: left;"><img src="${this.args[0]}" ${blurred}></imgverti>`),"verti-right"===this.args[1]&&$(this.output).wiki(`<br><imgverti style="float: right; clear: right;"><img src="${this.args[0]}" ${blurred}></imgverti>`)}});
/* twine-user-script #37: "maptest1.min.js" */
!function(S){let svq=State.variables.quest;function map(){svq.playerLoc=[5,5],State.temporary.interactableLocs=[[svq.playerLoc[0],svq.playerLoc[1]]];let sequence0=[function(){new setup.map.Interactable("assets/imported/img/png/turn_icon_en.png",{intersecting:function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){setup.combats.CI_MOMMASPIDER()}))}})},function(){new setup.map.Interactable("assets/imported/img/png/turn_icon.png",{intersecting:function(){let value=uuidToNum(State.variables.uuid),flavortb=setup.tbs.flavor_tbs[value%setup.tbs.flavor_tbs.length];new setup.tb.TextBox(flavortb)}})},function(){new setup.map.Interactable("assets/imported/img/png/init_icon_pl.png",{keepLoc:!0,intersecting:function(){let city;new setup.map.CityMenu({name:"Testing City c:",hasGuildHall:!0,hasInn:!0}).display()}})}],sequence1=mergeArray(sequence0),map;return sequence1.pop(),{sequence:0,interactables:[sequence0,sequence1],mapBackground:["assets/imported/img/png/browncanvas.jpeg",void 0]}}S.maps||(S.maps={}),svq||(svq={}),S.maps.questTest1=map}(setup);
/* twine-user-script #38: "maptest2.min.js" */
!function(S){S.maps||(S.maps={});let i0_0,map={sequence:0,interactables:[[function(){let svm=State.variables.map;new setup.map.Interactable("assets/imported/img/png/turn_icon_en.png",{top:3*svm.gF,left:3*svm.gF,intersecting:function(){$(".canvas-container").addClass("hidden"),svm=void 0,State.variables.ci=new setup.COM.CombatInstance({winPassage:"MapTesting",losePassage:"MapTesting",ep:["EN_BABY_SPIDER","EN_MOMMY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER","EN_BABY_SPIDER"]}),Engine.play("Combat_Overlord")}})}]]};S.maps.questTest2=map}(setup);
/* twine-user-script #39: "setmeta-macro.min.js" */
Macro.add("setmeta",{skipArgs:!0,handler(){if(0===this.args.full.length)return this.error("no expression specified");if("object"!=typeof this.args)return this.error('expression must be a JSON object with "key" : value pairs');try{let objVars=JSON.parse(this.args.full);for(let key in objVars)State.variables.meta[key]=objVars[key];State.variables.user.logged_in?setametaHelper(objVars):setTimeout(()=>{State.variables.user.logged_in&&setametaHelper(objVars)},"5000")}catch(e){return this.error(`bad evaluation: ${"object"==typeof e?e.message:e}`)}function setametaHelper(obj){State.variables.meta.psgsthatsentdb.includes(passage())||(db.setDBVars(State.variables.user.itch_id,obj),State.variables.meta.psgsthatsentdb.push(passage()))}Config.debug&&this.debugView.modes({hidden:!0})}});
/* twine-user-script #40: "spiderquest.min.js" */
!function(S){function map(){let ittybittyman,spiders=function(){let interactable;return new setup.quest.Interactable({imgSrc:"assets/imported/img/png/turn_icon_en.png",removeAfterCombatWin:!0,removeAfterSequenceUpdate:!0,intersecting:function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;sv.map=null,State.variables.pixi=null,$("#passage-map canvas").remove(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;sv.quest.subquest+=1,sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_SPIDERS()}))}})},sequences,quest;return{playerLoc:{x:2,y:6},interactables:[],sequence:0,sequences:[[function(){let interactable;return new setup.quest.Interactable({imgSrc:"assets/imported/img/png/turn_icon_en.png",position:{x:4,y:6},removeAfterSequenceUpdate:!0,intersecting:function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;sv.map=null,sv.pixi=null,$("#passage-map canvas").remove(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;sv.quest.sequence+=1,sv.quest.sequenceLoaded=!1,sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_BABYSPIDER1()}))}})},function(){let interactableInstance;return new setup.quest.Interactable({removeAfterInteracting:!0,imgSrc:"assets/imported/img/png/turn_icon.png",intersecting:function(){let seq1_tb={showBackground:!1,backgroundSrc:"",showDimmer:!0,showPortrait:!1,showSpeakerName:!0,lines:[{portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Concerned Man",line:"There sure have been a lot of the itty bitties around recently, but they don't seem to do much damage, so they'll be perfect for some young folk like you to handle."},{speaker:"Narrator",line:"You thank the man and move on."}]};new setup.tb.TextBox(seq1_tb)}})}],[function(){let sv=State.variables,town;return new setup.quest.Interactable({imgSrc:"assets/imported/img/png/init_icon_pl.png",intersecting:function(){let city=new setup.map.CityMenu({name:"Testing City c:",hasGuildHall:!0,hasInn:!0});if(1===sv.quest.sequence){sv.quest.sequence+=1,sv.quest.sequenceLoaded=!1;let city_tb={showBackground:!1,backgroundSrc:"",showDimmer:!0,showPortrait:!1,showSpeakerName:!0,lines:[{portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Mayor",line:"There sure are a lot of spiders around. Why do you go to the guild and get some buddies and slay some of them for us."},{speaker:"Narrator",line:"You thank the man and move on."}]};new setup.tb.TextBox(city_tb)}if(4===sv.quest.sequence){sv.quest.sequence+=1,sv.quest.sequenceLoaded=!1;let city_tb2={showBackground:!1,backgroundSrc:"",showDimmer:!0,showPortrait:!1,showSpeakerName:!0,lines:[{portrait:"assets/imported/img/png/turn_icon_pl.png",speaker:"Mayor",line:"Momma Spider time."},{speaker:"Narrator",line:"You thank the man and move on."}]};new setup.tb.TextBox(city_tb2)}city.display()}})}],[spiders,spiders,spiders,spiders,spiders],[function(){let interactable;return new setup.quest.Interactable({imgSrc:"assets/imported/img/png/turn_icon_en.png",removeAfterSequenceUpdate:!0,intersecting:function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;sv.map=null,sv.pixi=null,$("#passage-map canvas").remove(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;sv.quest.sequence+=1,sv.quest.sequenceLoaded=!1,sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_DADDYSPIDER()}))}})}],[],[function(){let interactable;return new setup.quest.Interactable({imgSrc:"assets/imported/img/png/turn_icon_en.png",removeAfterSequenceUpdate:!0,intersecting:function(){new setup.tb.TextBox(setup.tbs.flavor_tbs.random()),$(document).one(":textboxclosed",(function(){let sv=State.variables;sv.map=null,sv.pixi=null,$("#passage-map canvas").remove(),sv.quest.afterCombatWinFunction=function(){let sv=State.variables;sv.quest.sequence+=1,sv.quest.sequenceLoaded=!1,sv.quest.afterCombatWinFunction=void 0},setup.combats.CI_MOMMASPIDER()}))}})}],[]],conditionals:[function(){},function(){State.variables.quest.subquest=0},,function(){},function(){},function(){},function(){}]}}S.quests||(S.quests={}),S.quests.spiderQuest=map}(setup);
/* twine-user-script #41: "tooltipster.bundle.min.js" */
/*! tooltipster v4.2.8 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],(function(a){return b(a)})):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,(function(a){function b(a){this.$container,this.constraints=null,this.__$tooltip,this.__init(a)}function c(b,c){var d=!0;return a.each(b,(function(a,e){return void 0===c[a]||b[a]!==c[a]?(d=!1,!1):void 0})),d}function d(b){var c=b.attr("id"),d=c?h.window.document.getElementById(c):null;return d?d===b[0]:a.contains(h.window.document.body,b[0])}function e(){if(!g)return!1;var a,b=(g.document.body||g.document.documentElement).style,c="transition",d=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof b[c])return!0;c=c.charAt(0).toUpperCase()+c.substr(1);for(var e=0;e<d.length;e++)if("string"==typeof b[d[e]+c])return!0;return!1}var f={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},g="undefined"!=typeof window?window:null,h={hasTouchCapability:!(!g||!("ontouchstart"in g||g.DocumentTouch&&g.document instanceof g.DocumentTouch||g.navigator.maxTouchPoints)),hasTransitions:e(),IE:!1,semVer:"4.2.8",window:g},i=function(){this.__$emitterPrivate=a({}),this.__$emitterPublic=a({}),this.__instancesLatestArr=[],this.__plugins={},this._env=h};i.prototype={__bridge:function(b,c,d){if(!c[d]){var e=function(){};e.prototype=b;var g=new e;g.__init&&g.__init(c),a.each(b,(function(a,b){0!=a.indexOf("__")&&(c[a]?f.debug&&console.log("The "+a+" method of the "+d+" plugin conflicts with another plugin or native methods"):(c[a]=function(){return g[a].apply(g,Array.prototype.slice.apply(arguments))},c[a].bridged=g))})),c[d]=g}return this},__setWindow:function(a){return h.window=a,this},_getRuler:function(a){return new b(a)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(b){var c=this;if("string"==typeof b){var d=b,e=null;return d.indexOf(".")>0?e=c.__plugins[d]:a.each(c.__plugins,(function(a,b){return b.name.substring(b.name.length-d.length-1)=="."+d?(e=b,!1):void 0})),e}if(b.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return c.__plugins[b.name]=b,b.core&&c.__bridge(b.core,c,b.name),this},_trigger:function(){var a=Array.prototype.slice.apply(arguments);return"string"==typeof a[0]&&(a[0]={type:a[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,a),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,a),this},instances:function(b){var c=[],d;return a(b||".tooltipstered").each((function(){var b=a(this),d=b.data("tooltipster-ns");d&&a.each(d,(function(a,d){c.push(b.data(d))}))})),c},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(b){var c;return a((b?b+" ":"")+".tooltipstered").toArray()},setDefaults:function(b){return a.extend(f,b),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},a.tooltipster=new i,a.Tooltipster=function(b,c){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=a({}),this.__$emitterPublic=a({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(b,c)},a.Tooltipster.prototype={__init:function(b,c){var d=this;if(d._$origin=a(b),d.__options=a.extend(!0,{},f,c),d.__optionsFormat(),!h.IE||h.IE>=d.__options.IEmin){var e=null;if(void 0===d._$origin.data("tooltipster-initialTitle")&&(void 0===(e=d._$origin.attr("title"))&&(e=null),d._$origin.data("tooltipster-initialTitle",e)),null!==d.__options.content)d.__contentSet(d.__options.content);else{var g,i=d._$origin.attr("data-tooltip-content");i&&(g=a(i)),g&&g[0]?d.__contentSet(g.first()):d.__contentSet(e)}d._$origin.removeAttr("title").addClass("tooltipstered"),d.__prepareOrigin(),d.__prepareGC(),a.each(d.__options.plugins,(function(a,b){d._plug(b)})),h.hasTouchCapability&&a(h.window.document.body).on("touchmove."+d.__namespace+"-triggerOpen",(function(a){d._touchRecordEvent(a)})),d._on("created",(function(){d.__prepareTooltip()}))._on("repositioned",(function(a){d.__lastPosition=a.position}))}else d.__options.disabled=!0},__contentInsert:function(){var a=this,b=a._$tooltip.find(".tooltipster-content"),c=a.__Content,d=function(a){c=a};return a._trigger({type:"format",content:a.__Content,format:d}),a.__options.functionFormat&&(c=a.__options.functionFormat.call(a,a,{origin:a._$origin[0]},a.__Content)),"string"!=typeof c||a.__options.contentAsHTML?b.empty().append(c):b.text(c),a},__contentSet:function(b){return b instanceof a&&this.__options.contentCloning&&(b=b.clone(!0)),this.__Content=b,this._trigger({type:"updated",content:b}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var b=this,c=b._$origin,d=b._$origin.is("area");if(d){var e=b._$origin.parent().attr("name");c=a('img[usemap="#'+e+'"]')}var f=c[0].getBoundingClientRect(),g=a(h.window.document),i=a(h.window),j=c,k={available:{document:null,window:null},document:{size:{height:g.height(),width:g.width()}},window:{scroll:{left:h.window.scrollX||h.window.document.documentElement.scrollLeft,top:h.window.scrollY||h.window.document.documentElement.scrollTop},size:{height:i.height(),width:i.width()}},origin:{fixedLineage:!1,offset:{},size:{height:f.bottom-f.top,width:f.right-f.left},usemapImage:d?c[0]:null,windowOffset:{bottom:f.bottom,left:f.left,right:f.right,top:f.top}}};if(d){var l=b._$origin.attr("shape"),m=b._$origin.attr("coords");if(m&&(m=m.split(","),a.map(m,(function(a,b){m[b]=parseInt(a)}))),"default"!=l)switch(l){case"circle":var n=m[0],o=m[1],p=m[2],q=o-p,r=n-p;k.origin.size.height=2*p,k.origin.size.width=k.origin.size.height,k.origin.windowOffset.left+=r,k.origin.windowOffset.top+=q;break;case"rect":var s=m[0],t=m[1],u=m[2],v=m[3];k.origin.size.height=v-t,k.origin.size.width=u-s,k.origin.windowOffset.left+=s,k.origin.windowOffset.top+=t;break;case"poly":for(var w=0,x=0,y=0,z=0,A="even",B=0;B<m.length;B++){var C=m[B];"even"==A?(C>y&&(y=C,0===B&&(w=y)),w>C&&(w=C),A="odd"):(C>z&&(z=C,1==B&&(x=z)),x>C&&(x=C),A="even")}k.origin.size.height=z-x,k.origin.size.width=y-w,k.origin.windowOffset.left+=w,k.origin.windowOffset.top+=x}}var D=function(a){k.origin.size.height=a.height,k.origin.windowOffset.left=a.left,k.origin.windowOffset.top=a.top,k.origin.size.width=a.width};for(b._trigger({type:"geometry",edit:D,geometry:{height:k.origin.size.height,left:k.origin.windowOffset.left,top:k.origin.windowOffset.top,width:k.origin.size.width}}),k.origin.windowOffset.right=k.origin.windowOffset.left+k.origin.size.width,k.origin.windowOffset.bottom=k.origin.windowOffset.top+k.origin.size.height,k.origin.offset.left=k.origin.windowOffset.left+k.window.scroll.left,k.origin.offset.top=k.origin.windowOffset.top+k.window.scroll.top,k.origin.offset.bottom=k.origin.offset.top+k.origin.size.height,k.origin.offset.right=k.origin.offset.left+k.origin.size.width,k.available.document={bottom:{height:k.document.size.height-k.origin.offset.bottom,width:k.document.size.width},left:{height:k.document.size.height,width:k.origin.offset.left},right:{height:k.document.size.height,width:k.document.size.width-k.origin.offset.right},top:{height:k.origin.offset.top,width:k.document.size.width}},k.available.window={bottom:{height:Math.max(k.window.size.height-Math.max(k.origin.windowOffset.bottom,0),0),width:k.window.size.width},left:{height:k.window.size.height,width:Math.max(k.origin.windowOffset.left,0)},right:{height:k.window.size.height,width:Math.max(k.window.size.width-Math.max(k.origin.windowOffset.right,0),0)},top:{height:Math.max(k.origin.windowOffset.top,0),width:k.window.size.width}};"html"!=j[0].tagName.toLowerCase();){if("fixed"==j.css("position")){k.origin.fixedLineage=!0;break}j=j.parent()}return k},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=a(h.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=a(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var b=this;return b.__options.selfDestruction?b.__garbageCollector=setInterval((function(){var c=(new Date).getTime();b.__touchEvents=a.grep(b.__touchEvents,(function(a,b){return c-a.time>6e4})),d(b._$origin)||b.close((function(){b.destroy()}))}),2e4):clearInterval(b.__garbageCollector),b},__prepareOrigin:function(){var a=this;if(a._$origin.off("."+a.__namespace+"-triggerOpen"),h.hasTouchCapability&&a._$origin.on("touchstart."+a.__namespace+"-triggerOpen touchend."+a.__namespace+"-triggerOpen touchcancel."+a.__namespace+"-triggerOpen",(function(b){a._touchRecordEvent(b)})),a.__options.triggerOpen.click||a.__options.triggerOpen.tap&&h.hasTouchCapability){var b="";a.__options.triggerOpen.click&&(b+="click."+a.__namespace+"-triggerOpen "),a.__options.triggerOpen.tap&&h.hasTouchCapability&&(b+="touchend."+a.__namespace+"-triggerOpen"),a._$origin.on(b,(function(b){a._touchIsMeaningfulEvent(b)&&a._open(b)}))}if(a.__options.triggerOpen.mouseenter||a.__options.triggerOpen.touchstart&&h.hasTouchCapability){var b="";a.__options.triggerOpen.mouseenter&&(b+="mouseenter."+a.__namespace+"-triggerOpen "),a.__options.triggerOpen.touchstart&&h.hasTouchCapability&&(b+="touchstart."+a.__namespace+"-triggerOpen"),a._$origin.on(b,(function(b){!a._touchIsTouchEvent(b)&&a._touchIsEmulatedEvent(b)||(a.__pointerIsOverOrigin=!0,a._openShortly(b))}))}if(a.__options.triggerClose.mouseleave||a.__options.triggerClose.touchleave&&h.hasTouchCapability){var b="";a.__options.triggerClose.mouseleave&&(b+="mouseleave."+a.__namespace+"-triggerOpen "),a.__options.triggerClose.touchleave&&h.hasTouchCapability&&(b+="touchend."+a.__namespace+"-triggerOpen touchcancel."+a.__namespace+"-triggerOpen"),a._$origin.on(b,(function(b){a._touchIsMeaningfulEvent(b)&&(a.__pointerIsOverOrigin=!1)}))}return a},__prepareTooltip:function(){var b=this,c=b.__options.interactive?"auto":"";return b._$tooltip.attr("id",b.__namespace).css({"pointer-events":c,zIndex:b.__options.zIndex}),a.each(b.__previousThemes,(function(a,c){b._$tooltip.removeClass(c)})),a.each(b.__options.theme,(function(a,c){b._$tooltip.addClass(c)})),b.__previousThemes=a.merge([],b.__options.theme),b},__scrollHandler:function(b){var c=this;if(c.__options.triggerClose.scroll)c._close(b);else if(d(c._$origin)&&d(c._$tooltip)){var e=null;if(b.target===h.window.document)c.__Geometry.origin.fixedLineage||c.__options.repositionOnScroll&&c.reposition(b);else{e=c.__geometry();var f=!1;if("fixed"!=c._$origin.css("position")&&c.__$originParents.each((function(b,c){var d=a(c),g=d.css("overflow-x"),h=d.css("overflow-y");if("visible"!=g||"visible"!=h){var i=c.getBoundingClientRect();if("visible"!=g&&(e.origin.windowOffset.left<i.left||e.origin.windowOffset.right>i.right))return f=!0,!1;if("visible"!=h&&(e.origin.windowOffset.top<i.top||e.origin.windowOffset.bottom>i.bottom))return f=!0,!1}return"fixed"!=d.css("position")&&void 0})),f)c._$tooltip.css("visibility","hidden");else if(c._$tooltip.css("visibility","visible"),c.__options.repositionOnScroll)c.reposition(b);else{var g=e.origin.offset.left-c.__Geometry.origin.offset.left,i=e.origin.offset.top-c.__Geometry.origin.offset.top;c._$tooltip.css({left:c.__lastPosition.coord.left+g,top:c.__lastPosition.coord.top+i})}}c._trigger({type:"scroll",event:b,geo:e})}return c},__stateSet:function(a){return this.__state=a,this._trigger({type:"state",state:a}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,a.each(this.__timeouts.close,(function(a,b){clearTimeout(b)})),this.__timeouts.close=[],this},__trackerStart:function(){var a=this,b=a._$tooltip.find(".tooltipster-content");return a.__options.trackTooltip&&(a.__contentBcr=b[0].getBoundingClientRect()),a.__tracker=setInterval((function(){if(d(a._$origin)&&d(a._$tooltip)){if(a.__options.trackOrigin){var e=a.__geometry(),f=!1;c(e.origin.size,a.__Geometry.origin.size)&&(a.__Geometry.origin.fixedLineage?c(e.origin.windowOffset,a.__Geometry.origin.windowOffset)&&(f=!0):c(e.origin.offset,a.__Geometry.origin.offset)&&(f=!0)),f||(a.__options.triggerClose.mouseleave?a._close():a.reposition())}if(a.__options.trackTooltip){var g=b[0].getBoundingClientRect();g.height===a.__contentBcr.height&&g.width===a.__contentBcr.width||(a.reposition(),a.__contentBcr=g)}}else a._close()}),a.__options.trackerInterval),a},_close:function(b,c,d){var e=this,f=!0;if(e._trigger({type:"close",event:b,stop:function(){f=!1}}),f||d){c&&e.__callbacks.close.push(c),e.__callbacks.open=[],e.__timeoutsClear();var g=function(){a.each(e.__callbacks.close,(function(a,c){c.call(e,e,{event:b,origin:e._$origin[0]})})),e.__callbacks.close=[]};if("closed"!=e.__state){var i=!0,j,k,l=(new Date).getTime()+e.__options.animationDuration[1];if("disappearing"==e.__state&&l>e.__closingTime&&e.__options.animationDuration[1]>0&&(i=!1),i){e.__closingTime=l,"disappearing"!=e.__state&&e.__stateSet("disappearing");var m=function(){clearInterval(e.__tracker),e._trigger({type:"closing",event:b}),e._$tooltip.off("."+e.__namespace+"-triggerClose").removeClass("tooltipster-dying"),a(h.window).off("."+e.__namespace+"-triggerClose"),e.__$originParents.each((function(b,c){a(c).off("scroll."+e.__namespace+"-triggerClose")})),e.__$originParents=null,a(h.window.document.body).off("."+e.__namespace+"-triggerClose"),e._$origin.off("."+e.__namespace+"-triggerClose"),e._off("dismissable"),e.__stateSet("closed"),e._trigger({type:"after",event:b}),e.__options.functionAfter&&e.__options.functionAfter.call(e,e,{event:b,origin:e._$origin[0]}),g()};h.hasTransitions?(e._$tooltip.css({"-moz-animation-duration":e.__options.animationDuration[1]+"ms","-ms-animation-duration":e.__options.animationDuration[1]+"ms","-o-animation-duration":e.__options.animationDuration[1]+"ms","-webkit-animation-duration":e.__options.animationDuration[1]+"ms","animation-duration":e.__options.animationDuration[1]+"ms","transition-duration":e.__options.animationDuration[1]+"ms"}),e._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),e.__options.animationDuration[1]>0&&e._$tooltip.delay(e.__options.animationDuration[1]),e._$tooltip.queue(m)):e._$tooltip.stop().fadeOut(e.__options.animationDuration[1],m)}}else g()}return e},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(b,c){var e=this;if(!e.__destroying&&d(e._$origin)&&e.__enabled){var f=!0;if("closed"==e.__state&&(e._trigger({type:"before",event:b,stop:function(){f=!1}}),f&&e.__options.functionBefore&&(f=e.__options.functionBefore.call(e,e,{event:b,origin:e._$origin[0]}))),!1!==f&&null!==e.__Content){c&&e.__callbacks.open.push(c),e.__callbacks.close=[],e.__timeoutsClear();var g,i=function(){"stable"!=e.__state&&e.__stateSet("stable"),a.each(e.__callbacks.open,(function(a,b){b.call(e,e,{origin:e._$origin[0],tooltip:e._$tooltip[0]})})),e.__callbacks.open=[]};if("closed"!==e.__state)g=0,"disappearing"===e.__state?(e.__stateSet("appearing"),h.hasTransitions?(e._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),e.__options.animationDuration[0]>0&&e._$tooltip.delay(e.__options.animationDuration[0]),e._$tooltip.queue(i)):e._$tooltip.stop().fadeIn(i)):"stable"==e.__state&&i();else{if(e.__stateSet("appearing"),g=e.__options.animationDuration[0],e.__contentInsert(),e.reposition(b,!0),h.hasTransitions?(e._$tooltip.addClass("tooltipster-"+e.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":e.__options.animationDuration[0]+"ms","-ms-animation-duration":e.__options.animationDuration[0]+"ms","-o-animation-duration":e.__options.animationDuration[0]+"ms","-webkit-animation-duration":e.__options.animationDuration[0]+"ms","animation-duration":e.__options.animationDuration[0]+"ms","transition-duration":e.__options.animationDuration[0]+"ms"}),setTimeout((function(){"closed"!=e.__state&&(e._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),e.__options.animationDuration[0]>0&&e._$tooltip.delay(e.__options.animationDuration[0]),e._$tooltip.queue(i))}),0)):e._$tooltip.css("display","none").fadeIn(e.__options.animationDuration[0],i),e.__trackerStart(),a(h.window).on("resize."+e.__namespace+"-triggerClose",(function(b){var c=a(document.activeElement);(c.is("input")||c.is("textarea"))&&a.contains(e._$tooltip[0],c[0])||e.reposition(b)})).on("scroll."+e.__namespace+"-triggerClose",(function(a){e.__scrollHandler(a)})),e.__$originParents=e._$origin.parents(),e.__$originParents.each((function(b,c){a(c).on("scroll."+e.__namespace+"-triggerClose",(function(a){e.__scrollHandler(a)}))})),e.__options.triggerClose.mouseleave||e.__options.triggerClose.touchleave&&h.hasTouchCapability){e._on("dismissable",(function(a){a.dismissable?a.delay?(m=setTimeout((function(){e._close(a.event)}),a.delay),e.__timeouts.close.push(m)):e._close(a):clearTimeout(m)}));var j=e._$origin,k="",l="",m=null;e.__options.interactive&&(j=j.add(e._$tooltip)),e.__options.triggerClose.mouseleave&&(k+="mouseenter."+e.__namespace+"-triggerClose ",l+="mouseleave."+e.__namespace+"-triggerClose "),e.__options.triggerClose.touchleave&&h.hasTouchCapability&&(k+="touchstart."+e.__namespace+"-triggerClose",l+="touchend."+e.__namespace+"-triggerClose touchcancel."+e.__namespace+"-triggerClose"),j.on(l,(function(a){if(e._touchIsTouchEvent(a)||!e._touchIsEmulatedEvent(a)){var b="mouseleave"==a.type?e.__options.delay:e.__options.delayTouch;e._trigger({delay:b[1],dismissable:!0,event:a,type:"dismissable"})}})).on(k,(function(a){!e._touchIsTouchEvent(a)&&e._touchIsEmulatedEvent(a)||e._trigger({dismissable:!1,event:a,type:"dismissable"})}))}e.__options.triggerClose.originClick&&e._$origin.on("click."+e.__namespace+"-triggerClose",(function(a){e._touchIsTouchEvent(a)||e._touchIsEmulatedEvent(a)||e._close(a)})),(e.__options.triggerClose.click||e.__options.triggerClose.tap&&h.hasTouchCapability)&&setTimeout((function(){if("closed"!=e.__state){var b="",c=a(h.window.document.body);e.__options.triggerClose.click&&(b+="click."+e.__namespace+"-triggerClose "),e.__options.triggerClose.tap&&h.hasTouchCapability&&(b+="touchend."+e.__namespace+"-triggerClose"),c.on(b,(function(b){e._touchIsMeaningfulEvent(b)&&(e._touchRecordEvent(b),e.__options.interactive&&a.contains(e._$tooltip[0],b.target)||e._close(b))})),e.__options.triggerClose.tap&&h.hasTouchCapability&&c.on("touchstart."+e.__namespace+"-triggerClose",(function(a){e._touchRecordEvent(a)}))}}),0),e._trigger("ready"),e.__options.functionReady&&e.__options.functionReady.call(e,e,{origin:e._$origin[0],tooltip:e._$tooltip[0]})}if(e.__options.timer>0){var m=setTimeout((function(){e._close()}),e.__options.timer+g);e.__timeouts.close.push(m)}}}return e},_openShortly:function(a){var b=this,c=!0;if("stable"!=b.__state&&"appearing"!=b.__state&&!b.__timeouts.open&&(b._trigger({type:"start",event:a,stop:function(){c=!1}}),c)){var d=0==a.type.indexOf("touch")?b.__options.delayTouch:b.__options.delay;d[0]?b.__timeouts.open=setTimeout((function(){b.__timeouts.open=null,b.__pointerIsOverOrigin&&b._touchIsMeaningfulEvent(a)?(b._trigger("startend"),b._open(a)):b._trigger("startcancel")}),d[0]):(b._trigger("startend"),b._open(a))}return b},_optionsExtract:function(b,c){var d=this,e=a.extend(!0,{},c),f=d.__options[b];return f||(f={},a.each(c,(function(a,b){var c=d.__options[a];void 0!==c&&(f[a]=c)}))),a.each(e,(function(b,c){void 0!==f[b]&&("object"!=typeof c||c instanceof Array||null==c||"object"!=typeof f[b]||f[b]instanceof Array||null==f[b]?e[b]=f[b]:a.extend(e[b],f[b]))})),e},_plug:function(b){var c=a.tooltipster._plugin(b);if(!c)throw new Error('The "'+b+'" plugin is not defined');return c.instance&&a.tooltipster.__bridge(c.instance,this,c.name),this},_touchIsEmulatedEvent:function(a){for(var b=!1,c=(new Date).getTime(),d=this.__touchEvents.length-1;d>=0;d--){var e=this.__touchEvents[d];if(!(c-e.time<500))break;e.target===a.target&&(b=!0)}return b},_touchIsMeaningfulEvent:function(a){return this._touchIsTouchEvent(a)&&!this._touchSwiped(a.target)||!this._touchIsTouchEvent(a)&&!this._touchIsEmulatedEvent(a)},_touchIsTouchEvent:function(a){return 0==a.type.indexOf("touch")},_touchRecordEvent:function(a){return this._touchIsTouchEvent(a)&&(a.time=(new Date).getTime(),this.__touchEvents.push(a)),this},_touchSwiped:function(a){for(var b=!1,c=this.__touchEvents.length-1;c>=0;c--){var d=this.__touchEvents[c];if("touchmove"==d.type){b=!0;break}if("touchstart"==d.type&&a===d.target)break}return b},_trigger:function(){var b=Array.prototype.slice.apply(arguments);return"string"==typeof b[0]&&(b[0]={type:b[0]}),b[0].instance=this,b[0].origin=this._$origin?this._$origin[0]:null,b[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,b),a.tooltipster._trigger.apply(a.tooltipster,b),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,b),this},_unplug:function(b){var c=this;if(c[b]){var d=a.tooltipster._plugin(b);d.instance&&a.each(d.instance,(function(a,d){c[a]&&c[a].bridged===c[b]&&delete c[a]})),c[b].__destroy&&c[b].__destroy(),delete c[b]}return c},close:function(a){return this.__destroyed?this.__destroyError():this._close(null,a),this},content:function(a){var b=this;if(void 0===a)return b.__Content;if(b.__destroyed)b.__destroyError();else if(b.__contentSet(a),null!==b.__Content){if("closed"!==b.__state&&(b.__contentInsert(),b.reposition(),b.__options.updateAnimation))if(h.hasTransitions){var c=b.__options.updateAnimation;b._$tooltip.addClass("tooltipster-update-"+c),setTimeout((function(){"closed"!=b.__state&&b._$tooltip.removeClass("tooltipster-update-"+c)}),1e3)}else b._$tooltip.fadeTo(200,.5,(function(){"closed"!=b.__state&&b._$tooltip.fadeTo(200,1)}))}else b._close();return b},destroy:function(){var b=this;if(b.__destroyed)b.__destroyError();else{"closed"!=b.__state?b.option("animationDuration",0)._close(null,null,!0):b.__timeoutsClear(),b._trigger("destroy"),b.__destroyed=!0,b._$origin.removeData(b.__namespace).off("."+b.__namespace+"-triggerOpen"),a(h.window.document.body).off("."+b.__namespace+"-triggerOpen");var c=b._$origin.data("tooltipster-ns");if(c)if(1===c.length){var d=null;"previous"==b.__options.restoration?d=b._$origin.data("tooltipster-initialTitle"):"current"==b.__options.restoration&&(d="string"==typeof b.__Content?b.__Content:a("<div></div>").append(b.__Content).html()),d&&b._$origin.attr("title",d),b._$origin.removeClass("tooltipstered"),b._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else c=a.grep(c,(function(a,c){return a!==b.__namespace})),b._$origin.data("tooltipster-ns",c);b._trigger("destroyed"),b._off(),b.off(),b.__Content=null,b.__$emitterPrivate=null,b.__$emitterPublic=null,b.__options.parent=null,b._$origin=null,b._$tooltip=null,a.tooltipster.__instancesLatestArr=a.grep(a.tooltipster.__instancesLatestArr,(function(a,c){return b!==a})),clearInterval(b.__garbageCollector)}return b},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(a){return this.close(a)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(a){return this.__destroyed?this.__destroyError():this._open(null,a),this},option:function(b,c){return void 0===c?this.__options[b]:(this.__destroyed?this.__destroyError():(this.__options[b]=c,this.__optionsFormat(),a.inArray(b,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===b&&this.__prepareGC()),this)},reposition:function(a,b){var c=this;return c.__destroyed?c.__destroyError():"closed"!=c.__state&&d(c._$origin)&&(b||d(c._$tooltip))&&(b||c._$tooltip.detach(),c.__Geometry=c.__geometry(),c._trigger({type:"reposition",event:a,helper:{geo:c.__Geometry}})),c},show:function(a){return this.open(a)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},a.fn.tooltipster=function(){var b=Array.prototype.slice.apply(arguments),c="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof b[0]){var d="#*$~&";return this.each((function(){var e=a(this).data("tooltipster-ns"),f=e?a(this).data(e[0]):null;if(!f)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');if("function"!=typeof f[b[0]])throw new Error('Unknown method "'+b[0]+'"');this.length>1&&"content"==b[0]&&(b[1]instanceof a||"object"==typeof b[1]&&null!=b[1]&&b[1].tagName)&&!f.__options.contentCloning&&f.__options.debug&&console.log(c);var g=f[b[0]](b[1],b[2]);return g!==f||"instance"===b[0]?(d=g,!1):void 0})),"#*$~&"!==d?d:this}a.tooltipster.__instancesLatestArr=[];var e=b[0]&&void 0!==b[0].multiple,g=e&&b[0].multiple||!e&&f.multiple,h=b[0]&&void 0!==b[0].content,i=h&&b[0].content||!h&&f.content,j=b[0]&&void 0!==b[0].contentCloning,k=j&&b[0].contentCloning||!j&&f.contentCloning,l=b[0]&&void 0!==b[0].debug,m=l&&b[0].debug||!l&&f.debug;return this.length>1&&(i instanceof a||"object"==typeof i&&null!=i&&i.tagName)&&!k&&m&&console.log(c),this.each((function(){var c=!1,d=a(this),e=d.data("tooltipster-ns"),f=null;e?g?c=!0:m&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):c=!0,c&&(f=new a.Tooltipster(this,b[0]),e||(e=[]),e.push(f.__namespace),d.data("tooltipster-ns",e),d.data(f.__namespace,f),f.__options.functionInit&&f.__options.functionInit.call(f,f,{origin:this}),f._trigger("init")),a.tooltipster.__instancesLatestArr.push(f)})),this},b.prototype={__init:function(b){this.__$tooltip=b,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=a('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(h.window.document.body)},__forceRedraw:function(){var a=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(a)},constrain:function(a,b){return this.constraints={width:a,height:b},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:a}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var a=this.__$tooltip[0].getBoundingClientRect(),b={size:{height:a.height||a.bottom-a.top,width:a.width||a.right-a.left}};if(this.constraints){var c=this.__$tooltip.find(".tooltipster-content"),d=this.__$tooltip.outerHeight(),e=c[0].getBoundingClientRect(),f={height:d<=this.constraints.height,width:a.width<=this.constraints.width&&e.width>=c[0].scrollWidth-1};b.fits=f.height&&f.width}return h.IE&&h.IE<=11&&b.size.width!==h.window.document.documentElement.clientWidth&&(b.size.width=Math.ceil(b.size.width)+1),b}};var j=navigator.userAgent.toLowerCase();-1!=j.indexOf("msie")?h.IE=parseInt(j.split("msie")[1]):-1!==j.toLowerCase().indexOf("trident")&&-1!==j.indexOf(" rv:11")?h.IE=11:-1!=j.toLowerCase().indexOf("edge/")&&(h.IE=parseInt(j.toLowerCase().split("edge/")[1]));var k="tooltipster.sideTip";return a.tooltipster._plugin({name:k,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(a){var b=this;b.__instance=a,b.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),b.__previousState="closed",b.__options,b.__optionsFormat(),b.__instance._on("state."+b.__namespace,(function(a){"closed"==a.state?b.__close():"appearing"==a.state&&"closed"==b.__previousState&&b.__create(),b.__previousState=a.state})),b.__instance._on("options."+b.__namespace,(function(){b.__optionsFormat()})),b.__instance._on("reposition."+b.__namespace,(function(a){b.__reposition(a.event,a.helper)}))},__close:function(){this.__instance.content()instanceof a&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var b=a('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||b.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&b.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&b.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=b,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var b=this;if(b.__options=b.__instance._optionsExtract(k,b.__defaults()),b.__options.position&&(b.__options.side=b.__options.position),"object"!=typeof b.__options.distance&&(b.__options.distance=[b.__options.distance]),b.__options.distance.length<4&&(void 0===b.__options.distance[1]&&(b.__options.distance[1]=b.__options.distance[0]),void 0===b.__options.distance[2]&&(b.__options.distance[2]=b.__options.distance[0]),void 0===b.__options.distance[3]&&(b.__options.distance[3]=b.__options.distance[1])),b.__options.distance={top:b.__options.distance[0],right:b.__options.distance[1],bottom:b.__options.distance[2],left:b.__options.distance[3]},"string"==typeof b.__options.side){var c={top:"bottom",right:"left",bottom:"top",left:"right"};b.__options.side=[b.__options.side,c[b.__options.side]],"left"==b.__options.side[0]||"right"==b.__options.side[0]?b.__options.side.push("top","bottom"):b.__options.side.push("right","left")}6===a.tooltipster._env.IE&&!0!==b.__options.arrow&&(b.__options.arrow=!1)},__reposition:function(b,c){var d,e=this,f=e.__targetFind(c),g=[];e.__instance._$tooltip.detach();var h=e.__instance._$tooltip.clone(),i=a.tooltipster._getRuler(h),j=!1,k=e.__instance.option("animation");switch(k&&h.removeClass("tooltipster-"+k),a.each(["window","document"],(function(d,k){var l=null;if(e.__instance._trigger({container:k,helper:c,satisfied:j,takeTest:function(a){l=a},results:g,type:"positionTest"}),1==l||0!=l&&0==j&&("window"!=k||e.__options.viewportAware))for(var d=0;d<e.__options.side.length;d++){var m={horizontal:0,vertical:0},n=e.__options.side[d];"top"==n||"bottom"==n?m.vertical=e.__options.distance[n]:m.horizontal=e.__options.distance[n],e.__sideChange(h,n),a.each(["natural","constrained"],(function(a,d){if(l=null,e.__instance._trigger({container:k,event:b,helper:c,mode:d,results:g,satisfied:j,side:n,takeTest:function(a){l=a},type:"positionTest"}),1==l||0!=l&&0==j){var h={container:k,distance:m,fits:null,mode:d,outerSize:null,side:n,size:null,target:f[n],whole:null},o,p=("natural"==d?i.free():i.constrain(c.geo.available[k][n].width-m.horizontal,c.geo.available[k][n].height-m.vertical)).measure();if(h.size=p.size,h.outerSize={height:p.size.height+m.vertical,width:p.size.width+m.horizontal},"natural"==d?c.geo.available[k][n].width>=h.outerSize.width&&c.geo.available[k][n].height>=h.outerSize.height?h.fits=!0:h.fits=!1:h.fits=p.fits,"window"==k&&(h.fits?h.whole="top"==n||"bottom"==n?c.geo.origin.windowOffset.right>=e.__options.minIntersection&&c.geo.window.size.width-c.geo.origin.windowOffset.left>=e.__options.minIntersection:c.geo.origin.windowOffset.bottom>=e.__options.minIntersection&&c.geo.window.size.height-c.geo.origin.windowOffset.top>=e.__options.minIntersection:h.whole=!1),g.push(h),h.whole)j=!0;else if("natural"==h.mode&&(h.fits||h.size.width<=c.geo.available[k][n].width))return!1}}))}})),e.__instance._trigger({edit:function(a){g=a},event:b,helper:c,results:g,type:"positionTested"}),g.sort((function(a,b){if(a.whole&&!b.whole)return-1;if(!a.whole&&b.whole)return 1;if(a.whole&&b.whole){var c=e.__options.side.indexOf(a.side),d;return(d=e.__options.side.indexOf(b.side))>c?-1:c>d?1:"natural"==a.mode?-1:1}if(a.fits&&!b.fits)return-1;if(!a.fits&&b.fits)return 1;if(a.fits&&b.fits){var c=e.__options.side.indexOf(a.side),d;return(d=e.__options.side.indexOf(b.side))>c?-1:c>d?1:"natural"==a.mode?-1:1}return"document"==a.container&&"bottom"==a.side&&"natural"==a.mode?-1:1})),(d=g[0]).coord={},d.side){case"left":case"right":d.coord.top=Math.floor(d.target-d.size.height/2);break;case"bottom":case"top":d.coord.left=Math.floor(d.target-d.size.width/2)}switch(d.side){case"left":d.coord.left=c.geo.origin.windowOffset.left-d.outerSize.width;break;case"right":d.coord.left=c.geo.origin.windowOffset.right+d.distance.horizontal;break;case"top":d.coord.top=c.geo.origin.windowOffset.top-d.outerSize.height;break;case"bottom":d.coord.top=c.geo.origin.windowOffset.bottom+d.distance.vertical}"window"==d.container?"top"==d.side||"bottom"==d.side?d.coord.left<0?c.geo.origin.windowOffset.right-this.__options.minIntersection>=0?d.coord.left=0:d.coord.left=c.geo.origin.windowOffset.right-this.__options.minIntersection-1:d.coord.left>c.geo.window.size.width-d.size.width&&(c.geo.origin.windowOffset.left+this.__options.minIntersection<=c.geo.window.size.width?d.coord.left=c.geo.window.size.width-d.size.width:d.coord.left=c.geo.origin.windowOffset.left+this.__options.minIntersection+1-d.size.width):d.coord.top<0?c.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?d.coord.top=0:d.coord.top=c.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:d.coord.top>c.geo.window.size.height-d.size.height&&(c.geo.origin.windowOffset.top+this.__options.minIntersection<=c.geo.window.size.height?d.coord.top=c.geo.window.size.height-d.size.height:d.coord.top=c.geo.origin.windowOffset.top+this.__options.minIntersection+1-d.size.height):(d.coord.left>c.geo.window.size.width-d.size.width&&(d.coord.left=c.geo.window.size.width-d.size.width),d.coord.left<0&&(d.coord.left=0)),e.__sideChange(h,d.side),c.tooltipClone=h[0],c.tooltipParent=e.__instance.option("parent").parent[0],c.mode=d.mode,c.whole=d.whole,c.origin=e.__instance._$origin[0],c.tooltip=e.__instance._$tooltip[0],delete d.container,delete d.fits,delete d.mode,delete d.outerSize,delete d.whole,d.distance=d.distance.horizontal||d.distance.vertical;var l=a.extend(!0,{},d),n,o,p;if(e.__instance._trigger({edit:function(a){d=a},event:b,helper:c,position:l,type:"position"}),e.__options.functionPosition){var m=e.__options.functionPosition.call(e,e.__instance,c,l);m&&(d=m)}i.destroy(),"top"==d.side||"bottom"==d.side?(n={prop:"left",val:d.target-d.coord.left},o=d.size.width-this.__options.minIntersection):(n={prop:"top",val:d.target-d.coord.top},o=d.size.height-this.__options.minIntersection),n.val<this.__options.minIntersection?n.val=this.__options.minIntersection:n.val>o&&(n.val=o),p=c.geo.origin.fixedLineage?c.geo.origin.windowOffset:{left:c.geo.origin.windowOffset.left+c.geo.window.scroll.left,top:c.geo.origin.windowOffset.top+c.geo.window.scroll.top},d.coord={left:p.left+(d.coord.left-c.geo.origin.windowOffset.left),top:p.top+(d.coord.top-c.geo.origin.windowOffset.top)},e.__sideChange(e.__instance._$tooltip,d.side),c.geo.origin.fixedLineage?e.__instance._$tooltip.css("position","fixed"):e.__instance._$tooltip.css("position",""),e.__instance._$tooltip.css({left:d.coord.left,top:d.coord.top,height:d.size.height,width:d.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(n.prop,n.val),e.__instance._$tooltip.appendTo(e.__instance.option("parent")),e.__instance._trigger({type:"repositioned",event:b,position:d})},__sideChange:function(a,b){a.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+b)},__targetFind:function(a){var b={},c=this.__instance._$origin[0].getClientRects(),d;c.length>1&&(1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),c=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)));if(c.length<2)b.top=Math.floor(a.geo.origin.windowOffset.left+a.geo.origin.size.width/2),b.bottom=b.top,b.left=Math.floor(a.geo.origin.windowOffset.top+a.geo.origin.size.height/2),b.right=b.left;else{var e=c[0];b.top=Math.floor(e.left+(e.right-e.left)/2),e=c.length>2?c[Math.ceil(c.length/2)-1]:c[0],b.right=Math.floor(e.top+(e.bottom-e.top)/2),e=c[c.length-1],b.bottom=Math.floor(e.left+(e.right-e.left)/2),e=c.length>2?c[Math.ceil((c.length+1)/2)-1]:c[c.length-1],b.left=Math.floor(e.top+(e.bottom-e.top)/2)}return b}}}),a}));
/* twine-user-script #42: "tt-macro.min.js" */
Macro.add("tt",{tags:null,handler:function(){if(0===this.args.length)return this.error("no passage specified");let psg;if(psg="object"==typeof this.args[0]?this.args[0].link:this.args[0],!Story.has(psg))return this.error(`passage "${psg}" does not exist`);Config.debug&&this.debugView.modes({block:!0}),psg=Story.get(psg),settings.tooltips?new Wikifier(this.output,"<tooltip class='tooltip' data-tooltip-content='#"+psg.title+"'>"+this.payload[0].contents+"<div class='tooltip_templates'><tttext id='"+psg.title+"'>"+psg.processText()+"</tttext></tooltip></div>"):new Wikifier(this.output,this.payload[0].contents)}});</script><tw-passagedata pid="1" name="Combat_Overlord" tags="@combatoverlord #combat .combat nostats" position="550,575" size="100,100">/**
 * This passage will only be run once, and will be the predominant 
 * passage until combat is over. This will allow us to keep _vars 
 * until we are done with the combat. 
 */
&lt;&lt;script&gt;&gt;
    /* On passage completion, initialize. */
    $(document).one(&quot;:passagedisplay&quot;, function() {
        $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
    });

    /* UI Audio */
    $(document).on(&quot;mouseenter mouseleave click&quot;, &#39;.playerAttack&#39;, function() {
        SimpleAudio.select(&quot;tick2&quot;).play();
    });

    /* Battle Log */
    $(document).on(&quot;mouseenter&quot;, &#39;#battlelogicon&#39;, function() {
        let sv = State.variables; 
        console.log(sv.ci.log);
        let tempHTML = `&lt;span id=&quot;battleLog&quot;&gt;`;
        for (let i = 0; i &lt; sv.ci.log.length; i++) {
            tempHTML += `${sv.ci.log[i]}&lt;br&gt;`;
        }
        tempHTML += `&lt;/span&gt;`;
         $(&quot;#MainCombatGrid #combatNotifications&quot;).html(tempHTML);
    });

    /* Processing after Reward/Defeat Dialog. */
    $(document).on(&#39;:dialogopening&#39;, function (ev) {
        let sv = State.variables; 

        if ($(ev.target).attr(&#39;class&#39;) === &quot;dialogCombatWon&quot;) {
            $(document).off(&#39;:dialogopening&#39;);

            sv.quest.combatOutcome = &quot;win&quot;;
            
            if (sv.quest.afterCombatWinFunction) {
                sv.quest.afterCombatWinFunction();
            }

        } else if ($(ev.target).attr(&#39;class&#39;) === &quot;dialogCombatLoss&quot;) {
            $(document).off(&#39;:dialogopening&#39;);

            sv.quest.combatOutcome = &quot;loss&quot;;

            if (sv.quest.afterCombatLossFunction) {
                sv.quest.afterCombatLossFunction();
            }
        }
    });

    /**
     * This is required here. If you have anything after the 
     * `Engine.play()` call, the game recurvisely loops forever for
     * some reason.
     */
    $(document).on(&#39;:dialogclosing&#39;, function (ev) {
        let sv = State.variables;
        let loc;

        if ($(ev.target).attr(&#39;class&#39;) === &quot;dialogCombatWon&quot;) {
            $(document).off(&#39;:dialogclosing&#39;);
            
            loc = sv.ci.winPassage;
            sv.ci = undefined;
            Engine.play(loc);
        } else if ($(ev.target).attr(&#39;class&#39;) === &quot;dialogCombatLoss&quot;) {
            $(document).off(&#39;:dialogclosing&#39;);
            
            loc = sv.ci.losePassage;
            sv.ci = undefined;
            Engine.play(loc);
        }
    });

&lt;&lt;/script&gt;&gt;

&lt;grid id=&quot;MainCombatGrid&quot;&gt;
    /* This is effectively the enemies&#39; side of the &quot;field&quot;. */
    &lt;span id=&quot;enemyZone&quot;&gt;&lt;/span&gt;

    /* The &quot;center field&quot;, if you will. */
    &lt;span id=&quot;combatNotifications&quot;&gt;
        &lt;span id=&quot;battleLog&quot;&gt;&lt;/span&gt;
    &lt;/span&gt;

    &lt;span id=&quot;combatButtons&quot;&gt;
        &lt;span id=&quot;battlelogicon&quot;&gt;Battle Log Icon Here&lt;/span&gt;
    &lt;/span&gt;

    /**
    * This is effectively the player&#39;s side of the &quot;field&quot;. 
    * It lets the player pick attacks, use items, etc, etc.
    */
    &lt;span id=&quot;playerZone&quot;&gt;&lt;/span&gt;

    /* The options for the player. */
    &lt;span id=&quot;targetsZone&quot;&gt;
        &lt;span id=&quot;notifArea&quot;&gt;&lt;/span&gt;

        &lt;span id=&quot;playerAttacks&quot;&gt;&lt;/span&gt;

        &lt;span id=&quot;backForward&quot;&gt;
            &lt;span id=&quot;back&quot;&gt;Back&lt;/span&gt;
            &lt;span id=&quot;forward&quot;&gt;Forward&lt;/span&gt;
        &lt;/span&gt;
    &lt;/span&gt;
&lt;/grid&gt;</tw-passagedata><tw-passagedata pid="2" name="Combat_Zone" tags=".combat helper nostats" position="500,650" size="100,100">/**
 * The Combat_Zone passage dictates the logic of the combat. It 
 * iterates through &quot;ticks&quot; of combat, which decrement all character&#39;s
 * initialization as well as update their Canvas information. It also 
 * determines whose turn it is.
 * 
 * Its contents are run at the very beginning of combat, and at the 
 * end of every Player or Enemy turn.
 */
&lt;&lt;script&gt;&gt;
let ci = State.variables.ci;

/**
 * This function is called every &quot;tick&quot;. It decrements Combatants
 * inits and determines whose turn it is.
 */
async function processTurns(pp, ep) {
    /** Decrement init of the character, and apply buffs if applicable. */
    function decrementInits(char) {
        char.init -= (State.variables.initDecrementAmount * char.initDecrementModifier);

        for (let buff of char.buffs) {
            /* Decrement buff. If buff duration goes down a whole number, apply its effects. */
            let buffStart = Math.floor(buff.duration);
            buff.duration -= State.variables.initDecrementAmount;
            let buffEnd = Math.floor(buff.duration);

            if (buffStart &gt; buffEnd) {
                buff.perInit(char);
            }

            /* Remove expired buffs. */
            if (buff.duration &lt; 0) {
                char.buffs = char.buffs.filter(function(value) { return value !== buff;});
                char.reform();
                setup.COM.determineIfCanvas(char);
            }
        }
    }

    let activeCharacter = null;

    /* Determine if all characters in pp are dead. */
    let ppdead = true;
    for (let char of ci.pp) {
        if (char.health &gt; 0) {
            ppdead = false;
            break;
        }
    }

    /* Determine if all characters in ep are dead. */
    let epdead = true;
    for (let char of ci.ep) {
        if (char.health &gt; 0) {
            epdead = false;
            break;
        }
    }

    /* Show Reward Dialog if all Combatants on a side are dead. */
    /* TODO: This should also check for special conditions set in CI. */
    if (ppdead) {
        /* You lost. */
        setup.COM.drawCombat();
        $(&quot;#notifArea&quot;).empty().wiki(&quot;You Lost!&quot;);

        Dialog.setup(`You Lost!`, &quot;dialogCombatLoss&quot;);
        Dialog.wiki(Story.get(`Dialog_Lose`).processText());
        Dialog.open();

        return;
    } else if (epdead) {
        /* You won. */
        setup.COM.drawCombat();
        $(&quot;#notifArea&quot;).empty().wiki(&quot;You Won!&quot;);

        Dialog.setup(`You Won!`, &quot;dialogCombatWon&quot;);
        Dialog.wiki(Story.get(`Dialog_Win`).processText());
        Dialog.open();
        
        return;
    }

    /* Determine if we can hit backline with frontline attacks. */
    setup.COM.determineRowViabilities();
    
    /* Check if anyone has a turn available. */
    pp.forEach((char) =&gt; {
        if (char.init &lt;= 0 &amp;&amp; char.health &gt; 0) {
            activeCharacter = char;
            return;
        }
    });
    if (activeCharacter === null) {
        ep.forEach((char) =&gt; {
            if (char.init &lt;= 0 &amp;&amp; char.health &gt; 0) {
                activeCharacter = char;
                return;
            }
        });
    }

    /* So that we can use this value in other Twine places, notably, ::Player_Zone. */
    ci.activeCharacter = activeCharacter;

    if (activeCharacter === null) {
        /* It is no ones turn. */
        $(&quot;#notifArea&quot;).empty().removeClass().wiki(&quot;Determining Turn&quot;);

        /* Decrement inits. */
        pp.forEach((char) =&gt; {
            if (char.health &gt; 0) {
                decrementInits(char);
            }
        });
        ep.forEach((char) =&gt; {
            if (char.health &gt; 0) {
                decrementInits(char);
            }
        });

        setup.COM.drawCombat();
        await setup.fns.waitFor(20);
        return processTurns(pp, ep);
    } else if (ci.pp.includes(activeCharacter)) {
        /* Player Turn */
        $(&quot;#notifArea&quot;).empty().removeClass().addClass(&quot;playerTurn&quot;).wiki(`${activeCharacter.name}&#39;s Turn`);

        setup.COM.drawCombat();
        /* setup.COM.drawCombat() updates #playerZone, so the player can make a choice there. */

        /* TODO: Return a promise that ensure&#39;s an attacks animation is over before proceeding. */
        /* The player will processTurns() after clicking a button. No need to do it here. */
        return;
    } else if (ci.ep.includes(activeCharacter)) {
        /* Enemy Turn */
        $(&quot;#notifArea&quot;).empty().removeClass().addClass(&quot;enemyTurn&quot;).wiki(&quot;Enemy Turn&quot;);

        setup.COM.drawCombat();
        await setup.fns.waitFor(500);

        /* Enemy AI */
        activeCharacter.ai(ci);

        /* TODO: Return a promise that ensure&#39;s an attacks animation is over before proceeding. */
        $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        return;
    }
};

$(&quot;#enemyZone&quot;).empty().wiki(Story.get(&quot;Combat_Zone_Main&quot;).processText());
$(&quot;#playerZone&quot;).empty().wiki(Story.get(&quot;Player_Zone&quot;).processText());

processTurns(ci.pp, ci.ep);
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="Combat_Zone_Main" tags=".combat helper nostats" position="500,625" size="100,100">/**
 * The HTML elements of the enemies.
 */

/**
 * DESIRED: I wanted to dynamically make these elements, but they  
 * aren&#39;t created fast enough to render properly. Further research 
 * shows that it is because I would have to constantly recreate the  
 * canvas element, so if we fix that problem, we can dynamically make 
 * these elements. Unfortunately, I don&#39;t think the efficiency gain 
 * is worth the effort. 
 */
&lt;&lt;if $ci.ep[0]&gt;&gt;
    &lt;griditem id=&quot;gitemA&quot;&gt;
        /* TODO: Add the name to the canvas instead so that I have total control over the thing. */
        $ci.ep[0].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;enemyA&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#enemyZone griditem#gitemA&#39;, State.variables.ci.ep[0]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.ep[1]&gt;&gt;
    &lt;griditem id=&quot;gitemB&quot;&gt;
        $ci.ep[1].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;enemyB&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#enemyZone griditem#gitemB&#39;, State.variables.ci.ep[1]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.ep[2]&gt;&gt;
    &lt;griditem id=&quot;gitemC&quot;&gt;
        $ci.ep[2].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;enemyC&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#enemyZone griditem#gitemC&#39;, State.variables.ci.ep[2]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.ep[3]&gt;&gt;
    &lt;griditem id=&quot;gitemD&quot;&gt;
        $ci.ep[3].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;enemyD&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#enemyZone griditem#gitemD&#39;, State.variables.ci.ep[3]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.ep[4]&gt;&gt;
    &lt;griditem id=&quot;gitemE&quot;&gt;
        $ci.ep[4].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;enemyE&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#enemyZone griditem#gitemE&#39;, State.variables.ci.ep[4]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="4" name="Player_Zone" tags=".combat helper nostats" position="600,625" size="100,100">/* HTML elements of the player characters. */

/**
 * DESIRED: I wanted to dynamically make these elements, but they  
 * aren&#39;t created fast enough to render properly. Further research 
 * shows that it is because I would have to constantly recreate the  
 * canvas element, so if we fix that problem, we can dynamically make 
 * these elements. Unfortunately, I don&#39;t think the efficiency gain 
 * is worth the effort. 
 */
&lt;&lt;if $ci.pp[0]&gt;&gt;
    &lt;griditem id=&quot;gitemA&quot;&gt;
        $ci.pp[0].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;playerA&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#playerZone griditem#gitemA&#39;, State.variables.ci.pp[0]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.pp[1]&gt;&gt;
    &lt;griditem id=&quot;gitemB&quot;&gt;
        $ci.pp[1].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;playerB&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#playerZone griditem#gitemB&#39;, State.variables.ci.pp[1]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.pp[2]&gt;&gt;
    &lt;griditem id=&quot;gitemC&quot;&gt;
        $ci.pp[2].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;playerC&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#playerZone griditem#gitemC&#39;, State.variables.ci.pp[2]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ci.pp[3]&gt;&gt;
    &lt;griditem id=&quot;gitemD&quot;&gt;
        $ci.pp[3].name
        &lt;canvas class=&quot;initBar&quot; id=&quot;playerD&quot; width=&quot;2048&quot; height=&quot;384&quot;&gt;&lt;/canvas&gt;
    &lt;/griditem&gt;

    &lt;&lt;script&gt;&gt;
        setup.fns.displayToInfoScreenOnMouseover(&#39;#playerZone griditem#gitemD&#39;, State.variables.ci.pp[3]);
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="5" name="Dialog_Win" tags=".combat helper nostats" position="500,675" size="100,100">Winners Screen! Congratulations, this screen is Not Yet Implemented.</tw-passagedata><tw-passagedata pid="6" name="Dialog_Lose" tags=".combat helper nostats" position="500,700" size="100,100">Losing Screen! This screen is Not Yet Implemented.</tw-passagedata><tw-passagedata pid="7" name="Player_Attacks" tags=".combat helper nostats" position="600,650" size="100,100">/**
 * Determines and shows which attacks are enabled or disabled.
 *
 * Disabled attacks are currently only possible if that attack has
 * no viable targets.
 */
&lt;&lt;if $ci.pp.includes($ci.activeCharacter)&gt;&gt;
    &lt;&lt;run setup.COM.updatePlayerAttacks(&quot;target-attacks&quot;)&gt;&gt;
    &lt;&lt;for _int, _attack range $ci.activeCharacter.attacks&gt;&gt;
    &lt;&lt;set _attack.viableTargets to setup.COM.assignViableTargets(_attack, $ci.activeCharacter)&gt;&gt;
        &lt;&lt;capture _attack&gt;&gt;
            &lt;&lt;if _attack[&quot;viableTargets&quot;].length &gt; 0&gt;&gt;
                &lt;&lt;run $(`#targetsZone #playerAttacks`).wiki(Story.get(&quot;Player_Attack_Enabled&quot;).processText());&gt;&gt;
            &lt;&lt;else&gt;&gt;
                /* There are no viable targets, so disable the button. */
                &lt;&lt;run $(`#targetsZone #playerAttacks`).wiki(Story.get(&quot;Player_Attack_Disabled&quot;).processText());&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/capture&gt;&gt;
    &lt;&lt;/for&gt;&gt;
    /* TODO: Logic here should be done if there are more than n attacks, in which case we need a second grid. If none is needed then arrows should be greyed out. */
&lt;&lt;else&gt;&gt;
    &lt;&lt;run setup.COM.updatePlayerAttacks()&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;script&gt;&gt;
    $(`#targetsZone #backForward #back`).empty();
    $(`#targetsZone #backForward #forward`).empty();
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="8" name="Player_Attack_Enabled" tags=".combat helper nostats" position="575,675" size="100,100">/**
 * The button for enabled attacks on the #targetsZone grid.
 */
&lt;&lt;set _id to &quot;PlayerAttack&quot; + (_int + 1)&gt;&gt;
&lt;&lt;but _attack.name id _id class &quot;playerAttack&quot;&gt;&gt;
    &lt;&lt;run $(&quot;#targetsZone #playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attack_Targets&quot;).processText());&gt;&gt;
&lt;&lt;/but&gt;&gt;

&lt;&lt;run setup.fns.displayToInfoScreenOnMouseover(`#targetsZone #playerAttacks #${_id}`, _attack, $ci.activeCharacter);&gt;&gt;</tw-passagedata><tw-passagedata pid="9" name="Player_Attack_Disabled" tags=".combat helper nostats" position="625,675" size="100,100">/**
 * The button for disabled attacks on the #targetsZone grid.
 */
&lt;&lt;set _id to &quot;PlayerAttack&quot; + (_int + 1)&gt;&gt;
&lt;&lt;but _attack.name id _id class &quot;playerAttack disabled&quot;&gt;&gt;
&lt;&lt;/but&gt;&gt;
&lt;&lt;if tags().includes(&#39;.combat&#39;)&gt;&gt;
    &lt;&lt;run setup.fns.displayToInfoScreenOnMouseover(`#targetsZone #playerAttacks #${_id}`, _attack, $ci.activeCharacter);&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="Player_Attack_Targets" tags=".combat helper nostats" position="600,700" size="100,100">&lt;&lt;run setup.COM.updatePlayerAttacks()&gt;&gt;

/* Show the correct targets given an attack.targets object. */
&lt;&lt;switch _attack.targets.style&gt;&gt;
    &lt;&lt;case &quot;all&quot;&gt;&gt;
        &lt;&lt;run $(&quot;#targetsZone #playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attack_Targets_All&quot;).processText());&gt;&gt;
    &lt;&lt;case &quot;side&quot;&gt;&gt;
        &lt;&lt;run $(&quot;#targetsZone #playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attack_Targets_Side&quot;).processText());&gt;&gt;
    &lt;&lt;case &quot;row&quot;&gt;&gt;
        &lt;&lt;run $(&quot;#targetsZone #playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attack_Targets_Row&quot;).processText());&gt;&gt;
    &lt;&lt;case &quot;single&quot;&gt;&gt;
        &lt;&lt;run $(&quot;#targetsZone #playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attack_Targets_Single&quot;).processText());&gt;&gt;
    &lt;&lt;case &quot;self&quot;&gt;&gt;
        &lt;&lt;run $(&quot;#targetsZone #playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attack_Targets_Self&quot;).processText());&gt;&gt;
&lt;&lt;/switch&gt;&gt;

/* TODO: Below should be a function, cause it&#39;ll be applied a lot, I think. */
/* Provide a back button if the player wants to chose a different attack. */
&lt;&lt;script&gt;&gt;
    $(`#targetsZone #backForward #back`).empty().wiki(`
        &lt;&lt;but &quot;Back&quot; id &quot;BackAttack&quot;&gt;&gt;
            &lt;&lt;run $(&quot;#playerAttacks&quot;).empty().wiki(Story.get(&quot;Player_Attacks&quot;).processText());&gt;&gt;
        &lt;&lt;/but&gt;&gt;
    `);
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="11" name="Player_Attack_Targets_All" tags=".combat helper nostats" position="600,725" size="100,100">/* _attack.targets.style === &quot;all&quot; */
&lt;&lt;run setup.COM.updatePlayerAttacks(&quot;target-all&quot;)&gt;&gt;

/** 
 * NTS: Because this attack either hits everyone or no one, we don&#39;t 
 * need to be concerned about disabling this option. The attack itself 
 * will be disabled, and this targeting menu will never be reached. 
 */
&lt;&lt;but &quot;Hit Everyone&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
    &lt;&lt;script&gt;&gt;
        let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
        setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
        State.variables.ci.activeCharacter = null;
        $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/but&gt;&gt;</tw-passagedata><tw-passagedata pid="12" name="Player_Attack_Targets_Side" tags=".combat helper nostats" position="600,750" size="100,100">/* _attack.targets.style === &quot;side&quot; */
&lt;&lt;run setup.COM.updatePlayerAttacks(&quot;target-side&quot;)&gt;&gt;

/* Check Enemy Combatants */
&lt;&lt;if _attack[&quot;viableTargets&quot;].some(r=&gt; [$ci.ep[0], $ci.ep[1], $ci.ep[2], $ci.ep[3], $ci.ep[4]].includes(r))&gt;&gt;
    &lt;&lt;but &quot;Hit All Enemies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
            setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
            State.variables.ci.activeCharacter = null;
            $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;but &quot;Hit All Enemies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack disabled&quot;&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Check Player Combatants */
&lt;&lt;if _attack[&quot;viableTargets&quot;].some(r=&gt; [$ci.pp[0], $ci.pp[1], $ci.pp[2], $ci.pp[3]].includes(r))&gt;&gt;
    &lt;&lt;but &quot;Hit All Allies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
            setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
            State.variables.ci.activeCharacter = null;
            $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;but &quot;Hit All Allies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack disabled&quot;&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="Player_Attack_Targets_Row" tags=".combat helper nostats" position="600,775" size="100,100">/* _attack.targets.style === &quot;row&quot; */
&lt;&lt;run setup.COM.updatePlayerAttacks(&quot;target-row&quot;)&gt;&gt;

/* Check enemy backline Combatants */
&lt;&lt;if _attack[&quot;viableTargets&quot;].some(r=&gt; [$ci.ep[3], $ci.ep[4]].includes(r)) &amp;&amp; ((_attack.targets.row === &quot;back&quot; || _attack.targets.row === &quot;both&quot;) || $ci.epbacklineTargetable)&gt;&gt;
    &lt;&lt;but &quot;Hit Backrow Enemies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
            setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
            State.variables.ci.activeCharacter = null;
            $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;but &quot;Hit Backtrow Enemies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack disabled&quot;&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Check enemy frontline Combatants */
&lt;&lt;if _attack[&quot;viableTargets&quot;].some(r=&gt; [$ci.ep[0], $ci.ep[1], $ci.ep[2]].includes(r)) &amp;&amp; ((_attack.targets.row === &quot;front&quot; || _attack.targets.row === &quot;both&quot;) || $ci.epfrontlineTargetable)&gt;&gt;
    &lt;&lt;but &quot;Hit Frontrow Enemies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
            setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
            State.variables.ci.activeCharacter = null;
            $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;but &quot;Hit Frontrow Enemies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack disabled&quot;&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Check player frontline Combatants */
&lt;&lt;if _attack[&quot;viableTargets&quot;].some(r=&gt; [$ci.pp[0], $ci.pp[1]].includes(r))&gt;&gt;
    &lt;&lt;but &quot;Hit Frontrow Allies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
            setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
            State.variables.ci.activeCharacter = null;
            $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;but &quot;Hit Frontrow Allies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack disabled&quot;&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;/if&gt;&gt;

/* Check player backline Combatants */
&lt;&lt;if _attack[&quot;viableTargets&quot;].some(r=&gt; [$ci.pp[2], $ci.pp[3]].includes(r))&gt;&gt;
    &lt;&lt;but &quot;Hit Backrow Allies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
            setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
            State.variables.ci.activeCharacter = null;
            $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;else&gt;&gt;
    &lt;&lt;but &quot;Hit Backtrow Allies&quot; id &quot;AttackTarget&quot; class &quot;playerAttack disabled&quot;&gt;&gt;
    &lt;&lt;/but&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="Player_Attack_Targets_Single" tags=".combat .helper nostats" position="600,800" size="100,100">/* _attack.targets.style === &quot;single&quot; */
&lt;&lt;run setup.COM.updatePlayerAttacks(&quot;target-single&quot;)&gt;&gt;

/* Check enemy Combatants */
&lt;&lt;for _target range $ci.ep&gt;&gt;
    &lt;&lt;capture _target&gt;&gt;
        &lt;&lt;if _attack[&quot;viableTargets&quot;].includes(_target)&gt;&gt;
            &lt;&lt;set _class to &quot;playerAttack &quot; + _target.location&gt;&gt;
            &lt;&lt;but _target.name id &quot;AttackTarget&quot; class _class&gt;&gt;
                &lt;&lt;script&gt;&gt;
                    setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, [State.temporary.target]);
                    State.variables.ci.activeCharacter = null;
                    $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
                &lt;&lt;/script&gt;&gt;
            &lt;&lt;/but&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;set _class to &quot;playerAttack &quot; + _target.location + &quot; disabled&quot;&gt;&gt;
            &lt;&lt;but _target.name id &quot;AttackTarget&quot; class _class&gt;&gt;
            &lt;&lt;/but&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

/* Check player Combatants */
&lt;&lt;for _target range $ci.pp&gt;&gt;
    &lt;&lt;capture _target&gt;&gt;
        &lt;&lt;if _attack[&quot;viableTargets&quot;].includes(_target)&gt;&gt;
            &lt;&lt;set _class to &quot;playerAttack &quot; + _target.location&gt;&gt;
            &lt;&lt;but _target.name id &quot;AttackTarget&quot; class _class&gt;&gt;
                &lt;&lt;script&gt;&gt;
                    setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, [State.temporary.target]);
                    State.variables.ci.activeCharacter = null;
                    $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
                &lt;&lt;/script&gt;&gt;
            &lt;&lt;/but&gt;&gt;
        &lt;&lt;else&gt;&gt;
            &lt;&lt;set _class to &quot;playerAttack &quot; + _target.location + &quot; disabled&quot;&gt;&gt;
            &lt;&lt;but _target.name id &quot;AttackTarget&quot; class _class&gt;&gt;
            &lt;&lt;/but&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;</tw-passagedata><tw-passagedata pid="15" name="Player_Attack_Targets_Self" tags=".combat helper nostats" position="600,825" size="100,100">/* _attack.targets.style === &quot;self&quot; */
&lt;&lt;run setup.COM.updatePlayerAttacks(&quot;target-self&quot;)&gt;&gt;

/** 
 * NTS: Because this attack hits the attacker, we don&#39;t need to be
 * concerned about disabling this option. The attack itself will be
 * disabled, and this targeting menu will never be reached. 
 */
&lt;&lt;but &quot;Hit Self&quot; id &quot;AttackTarget&quot; class &quot;playerAttack&quot;&gt;&gt;
    &lt;&lt;script&gt;&gt;
        let targets = setup.COM.assignViableTargets(State.temporary.attack, State.variables.ci.activeCharacter);
        setup.COM.attackCalculations(State.temporary.attack, State.variables.ci.activeCharacter, targets);
        State.variables.ci.activeCharacter = null;
        $(&quot;#enemyZone&quot;).wiki(Story.get(&quot;Combat_Zone&quot;).processText());
    &lt;&lt;/script&gt;&gt;
&lt;&lt;/but&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="PassageReady" tags=".rendering" position="500,25" size="100,100">/* Everything here is done before every passage begins rendering.
Best for checking variables and whatnot. */
&lt;&lt;script&gt;&gt;
let sv = State.variables;

/* Ensure correct versioning. */
if (sv.version !== setup.version) {
    setup.fns.update_save();
}

/* Set sv.ft_people = true if any variable ending in _met is true. */
if (!sv.ft_people) {
    for (let key in sv) {
        if (key.includes(&quot;ppl_&quot;) &amp;&amp; key.includes(&quot;_met&quot;) &amp;&amp; sv[key] === true) {
            sv.ft_people = true;
        }
    }
}

/* Set sv.ft_knowledge = true if any variable ending in _lv is true. */
if (!sv.ft_knowledge) {
    for (let key in sv) {
        if (key.includes(&quot;kn_&quot;) &amp;&amp; key.includes(&quot;_lv&quot;) &amp;&amp; sv[key] == true) {
            /* 0 is falsy, 1+ is truthy. That&#39;s why the condition is == and not ===. */
            sv.ft_knowledge = true;
        }
    }
}

/* Handle Settings. */
setup.fns.settingsHandler();
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="17" name="PassageHeader" tags=".rendering" position="500,50" size="100,100">/* Everything here is rendered at the start of every passage rendering. 
It&#39;s intended for actual rendering stuff. */
&lt;div id=&quot;chapterheader&quot;&gt;Chapter Header Text&lt;/div&gt;
&lt;span id=&quot;passagetitleheader&quot;&gt;Passage Header Text&lt;/span&gt;</tw-passagedata><tw-passagedata pid="18" name="PassageFooter" tags=".rendering" position="500,75" size="100,100">/* Everything here is rendered at the end of every passage rendering.
It&#39;s intended for actual rendering stuff. */
&lt;span id=&#39;flash-notifs-here&#39;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="19" name="PassageDone" tags=".rendering" position="500,100" size="100,100">/* Everything here is done after each passage is rendered. Best for 
event handlers and the like. */
&lt;&lt;script&gt;&gt;
/* Check if we want background images, remove them if we don&#39;t. */
if (!settings.bgimg) {
    $(&#39;body&#39;).css(&quot;background-image&quot;, &quot;none&quot;);
}

/* Add Fancy Chapter Header */
// let curPsgTitle = State.active.title;
let curPsgTitle = passage();
let curPsg = Story.get(curPsgTitle);
let curPsgChapter = &quot;Unknown Chapter&quot;;

Object.keys(setup.STR.TITLES).forEach(key =&gt; {
    /* DESIRED: Add ability to check for an alternative title. For instance, if a possible has @1 but T2, then T2 should   takeprecedence over @1. This should be done programmatically, and not be based on which tag is processed last. Once that&#39;s  done,actually add in the new titles, like &quot;The Departure&quot; and whatnot. */
    if (curPsg.tags.includes(key)) {
        curPsgChapter = setup.STR.TITLES[key];
        return;
    }
});

$(&#39;div#chapterheader&#39;).text(curPsgChapter);
$(&#39;span#passagetitleheader&#39;).text(curPsgTitle);

/* Save if it is not a combat passage. */
if (!tags().includes(&quot;.combat&quot;)) {
    if (Save.autosave.ok()) {
        Save.autosave.save(curPsgChapter);
    } else {
        console.error(&quot;Autosave was not available for saving.&quot;)
    }
}



/* Create an event handler that checks every time an element is added.
If that element is a &lt;&lt;link&gt;&gt;, check if the passage tags it links 
to. If they are on the bad content lists, disable them or flag them for
a warning. */
const targetNode = document.getElementById(&#39;passages&#39;);
const config = {
    childList: true,
    subtree: true
};

const callback = function(mutationList, observer) {
    for (const mutation of mutationList) {
        /* Only run for new added elements. */
        if (mutation.type !== &#39;childList&#39;) return;

        /* Get every link and put them in an array. */
        let linkarr = $(&#39;.macro-link&#39;).toArray();
        linkarr.forEach(link =&gt; {

            if (!$(link).hasClass(&#39;cont-disabled&#39;) &amp;&amp; !$(link).hasClass(&#39;cont-warning&#39;)) {
                let psgTitle = $(link).attr(&quot;data-passage&quot;);

                /* Ensure we have a title, and rendering has finished. */
                if (typeof psgTitle !== &quot;string&quot;) return;

                let psgTags = Story.get(psgTitle).tags;

                /* Check Disables */
                psgTags.forEach(function(tag) {
                    if (State.variables.ft_disable.includes(tag)) {
                        /* Adding the .cont-disabled class will add the css rule
                        &quot;display: none&quot;, hiding the element. */
                        $(link).addClass(&quot;cont-disabled&quot;);
                    }
                });

                /* Check Warnings */
                psgTags.forEach(function(tag) {
                    if (State.variables.ft_warning.includes(tag)) {
                        /* Adding the .cont-warning class will add the some css 
                        and allow us to show warnings. */
                        $(link).addClass(&quot;cont-warning&quot;);

                        /* Add qualifying tags to the &#39;cont-warning&#39; attribute so
                        we know which content we&#39;re warning the user about. */
                        if (typeof $(link).attr(&#39;cont-warning&#39;) === &quot;undefined&quot;) {
                            $(link).attr(&#39;cont-warning&#39;, tag);
                        } else {
                            let tmp = &quot; &quot; + $(link).attr(&#39;cont-warning&#39;);
                            $(link).attr(&#39;cont-warning&#39;, tag + tmp);
                        }
                    }

                    if ($(link).attr(&#39;cont-warning&#39;) !== undefined &amp;&amp; !$(link).children(&#39;span&#39;).hasClass(&#39;warning-link&#39;)) {
                        let contarr = $(link).attr(&#39;cont-warning&#39;).split(&#39; &#39;);
                        contarr = [...new Set(contarr)];
                        $(link).append(&quot;&lt;br&gt;&lt;span class=&#39;warning-link&#39;&gt;Warning: This link contains the following content: &quot; + contarr + &quot;&lt;/span&gt;&quot;);
                    }

                    /* BUG: This may make us unable to check for changes on link replace. */
                    observer.disconnect();

                });
            }
        });
    }
};

/* Create an observer instance linked to the callback function */
const observer = new MutationObserver(callback);

/* Start observing the target node for configured mutations */
observer.observe(targetNode, config);

/* Unblur images on click. */
jQuery(&#39;img, imghori, imgverti&#39;).on(&#39;click&#39;, function(e) {
    e.preventDefault();
    if ($(this).hasClass(&#39;blurred&#39;)) {
        jQuery(this).toggleClass(&#39;blurred&#39;);
    }
});


/* Initalize tooltips. */
$(document).ready(function() {
    $(&#39;.tooltip&#39;).tooltipster({
        contentCloning: true,
        theme: &#39;tooltipster-custom&#39;
    });
});

if (tags().includes(&quot;.combat&quot;) ) {
    State.variables.GameState = &quot;combat&quot;;
    /**
    $(&#39;body&#39;).css({
        &quot;height&quot;: &quot;100%&quot;,
        &quot;overflow&quot;: &quot;hidden&quot;,
    })
     */
} else {
    $(&#39;body&#39;).css({
        &quot;height&quot;: &quot;initial&quot;,
        &quot;overflow&quot;: &quot;initial&quot;,
    });
}

/**
 *  If we delete the session, then we can&#39;t load from it: We&#39;ll only 
 * be able to load from the autosave. This is important because we 
 * cannot save a function&#39;s scope within story variables:
 * https://www.motoslave.net/sugarcube/2/docs/#twinescript-supported-types 
 * That means we do NOT want to load into a combat instance, as we 
 * will break all sorts of things. Therefore, we disallow session 
 * storage and force ourselves to load from the autosave, which solves 
 * that problem. 
 */
session.delete(&#39;state&#39;);
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="20" name="StorySubtitle" tags="initialize nostats" position="0,75" size="100,100">&lt;span style=&quot;color:brown&quot;&gt;This game is in InDev development. Currently, saving and loading is unavailable.&lt;/span&gt;
&lt;br&gt;&lt;br&gt;
You&#39;re playing &lt;span style=&quot;font-style:italic; color:lightblue&quot;&gt;&lt;&lt;print Story.title&gt;&gt;&lt;/span&gt;, Version &lt;span style=&quot;color:lightblue&quot;&gt;&lt;&lt;print setup.STR.version&gt;&gt;&lt;/span&gt;, by &lt;a href=&quot;https://leahiel.itch.io/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;LeahPeach↗&lt;/a&gt;
&lt;br&gt;&lt;br&gt;
Find my other games at &lt;a href=&quot;https://leahiel.itch.io/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Itch.io&lt;/a&gt;. 
&lt;br&gt;
Follow me if you&#39;d like to be notified of my future games as well!</tw-passagedata><tw-passagedata pid="21" name="StoryAuthor" tags="initialize" position="0,100" size="100,100">LeahPeach</tw-passagedata><tw-passagedata pid="22" name="StoryInit" tags="initialize" position="0,125" size="100,100">/* Everything here is only called once, when the story is initialized. */

&lt;&lt;script&gt;&gt;
let sv = State.variables;

(() =&gt; {
    /* Solution supplied by Chapel:
        Problem:
    https://discord.com/channels/389867840406159362/389868418855075840/1014747488139354123
        Solution:
    https://discord.com/channels/389867840406159362/389868418855075840/1014814647297265705
    */

    &quot;use strict&quot;;
    const lock = LoadScreen.lock();

    // the core idea is that when the game is started or reloaded, we want the following things to happen:
    // 1) we want all UI elements, `data-passages`, etc to render passages normally
    // 2) we want to replace the onProcess handler with a custom one for the first &quot;normal&quot; passage render, including all header/footer/done/ready passage content
    // 3) the onProcess handler should &quot;defer&quot; passage rendering by returning no content (an empty string) but after the promise is resolved, we will manually render the content
    // 4) we need to remove the onProcess hanlder after the first passage render, as the promise is resolved
    function process(psg) {
        // handle the promise
        Promise.all([setup.promises.importInit]).then(() =&gt; {
            /* When in Test Mode, disable debug views by default. */
            if (Config.debug) {
                DebugView.disable();
            }

            // wikify the passage content after the promise is resolved, then remove the loadscreen
            // $(&quot;.passage&quot;).wiki(psg.text.replace(/^\n+|\n+$/g, &#39;&#39;).replace(/\n+/g, &#39; &#39;));
            // Engine.show();
            Engine.play(passage(), true);
            LoadScreen.unlock(lock);
        });
        // return no content (prevent initial render, we do it ourselves after the promise is resolved)
        return &quot;&quot;;
    }

    $(document).one(&quot;:passagestart&quot;, () =&gt; {
        // one time event handler on passage start,
        // we set the onProcess handler to our process function
        // we need to do this here because we need to only process the passages that are part of the nav process (no UI `data-passage` content), but we do want headers, footers, etc
        Config.passages.onProcess = process;

        $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
            // we remove our process handler using another one time event
            // passage display happens before `data-passage` content is processed, so the onProcess is back to normal by then
            Config.passages.onProcess = undefined;
        });
    });
})();

/* Discord Widget */
/* FIXME: Uncomment when UI fixing is done.
if (!Config.debug) {
    setup.fns.importDiscordWidget()
}
*/

&lt;&lt;/script&gt;&gt;
/*
   ###    ##     ## ########  ####  #######  
  ## ##   ##     ## ##     ##  ##  ##     ## 
 ##   ##  ##     ## ##     ##  ##  ##     ## 
##     ## ##     ## ##     ##  ##  ##     ## 
######### ##     ## ##     ##  ##  ##     ## 
##     ## ##     ## ##     ##  ##  ##     ## 
##     ##  #######  ########  ####  #######  
*/
/* Like the sound you here when you click &quot;Start...&quot; after opening up the game for the first time. */
&lt;&lt;cacheaudio &quot;tick1&quot; &quot;assets/imported/audio/sfx/tick1.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;tick2&quot; &quot;assets/imported/audio/sfx/tick2.ogg&quot;&gt;&gt;
&lt;&lt;createaudiogroup &quot;:sfx&quot;&gt;&gt;
    &lt;&lt;track &quot;tick1&quot;&gt;&gt;
    &lt;&lt;track &quot;tick2&quot;&gt;&gt;
&lt;&lt;/createaudiogroup&gt;&gt;

&lt;&lt;cacheaudio &quot;WaveShop1&quot; &quot;assets/imported/audio/music/WaveShop1.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop2&quot; &quot;assets/imported/audio/music/WaveShop2.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;MainMenu&quot; &quot;assets/imported/audio/music/MainMenu.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop4&quot; &quot;assets/imported/audio/music/WaveShop4.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop5&quot; &quot;assets/imported/audio/music/WaveShop5.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop6&quot; &quot;assets/imported/audio/music/WaveShop6.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop7&quot; &quot;assets/imported/audio/music/WaveShop7.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop8&quot; &quot;assets/imported/audio/music/WaveShop8.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop9&quot; &quot;assets/imported/audio/music/WaveShop9.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop10&quot; &quot;assets/imported/audio/music/WaveShop10.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;147&quot; &quot;assets/imported/audio/music/147.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop12&quot; &quot;assets/imported/audio/music/WaveShop12.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop13&quot; &quot;assets/imported/audio/music/WaveShop13.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop14&quot; &quot;assets/imported/audio/music/WaveShop14.ogg&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;WaveShop15&quot; &quot;assets/imported/audio/music/WaveShop15.ogg&quot;&gt;&gt;

&lt;&lt;createaudiogroup &quot;:music&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop1&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop2&quot;&gt;&gt;
    &lt;&lt;track &quot;MainMenu&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop4&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop5&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop6&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop7&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop8&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop9&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop10&quot;&gt;&gt;
    &lt;&lt;track &quot;147&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop12&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop13&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop14&quot;&gt;&gt;
    &lt;&lt;track &quot;WaveShop15&quot;&gt;&gt;
&lt;&lt;/createaudiogroup&gt;&gt;

&lt;&lt;script&gt;&gt;
let sv = State.variables;

/*
########     ###    ########    ###    ########     ###     ######  ######## 
##     ##   ## ##      ##      ## ##   ##     ##   ## ##   ##    ## ##       
##     ##  ##   ##     ##     ##   ##  ##     ##  ##   ##  ##       ##       
##     ## ##     ##    ##    ##     ## ########  ##     ##  ######  ######   
##     ## #########    ##    ######### ##     ## #########       ## ##       
##     ## ##     ##    ##    ##     ## ##     ## ##     ## ##    ## ##       
########  ##     ##    ##    ##     ## ########  ##     ##  ######  ######## 
*/

/* NOTE: These variables don&#39;t update when added to the script, reload 
the script, and then refresh. This is fine for most things, but 
when things are added here, I want them to be initialized on the 
save file created in a previous version. */
/* This is because State is replaced by the loaded file. See:
https://www.motoslave.net/sugarcube/2/docs/#guide-state-sessions-and-saving-refreshing-and-restarting */

/* USER IDENTIFICATION FEATURES  */
sv.user = {};
sv.user.itch_id = undefined;
sv.user.logged_in = false;

/* META STUFF */
/* Important variables that are hopefully one day transferable across stories. */
sv.meta = {};
sv.meta.psgsthatsentdb = [];

setup.promises = {}
/* REQUIRED: Remove pixi.js and other hexgenclone stuff for distribution. */
setup.promises.importInit = importScripts(
    &quot;assets/imported/js/jcanvas.min.js&quot;, 
    /* &quot;assets/imported/js/fabric.js&quot;, */
    &quot;https://pixijs.download/release/pixi.js&quot;,
).then(
    () =&gt; {
        /* setup.fns.importGameSSR(); */
    }
); 

/* 
##     ##    ###    ########  ####    ###    ########  ##       ########  ######  
##     ##   ## ##   ##     ##  ##    ## ##   ##     ## ##       ##       ##    ## 
##     ##  ##   ##  ##     ##  ##   ##   ##  ##     ## ##       ##       ##       
##     ## ##     ## ########   ##  ##     ## ########  ##       ######    ######  
 ##   ##  ######### ##   ##    ##  ######### ##     ## ##       ##             ## 
  ## ##   ##     ## ##    ##   ##  ##     ## ##     ## ##       ##       ##    ## 
   ###    ##     ## ##     ## #### ##     ## ########  ######## ########  ######  
*/

sv.GameState = &quot;initial&quot;;

/* GAME FEATURES */
sv.ft_knowledge = false;
sv.ft_people = false;
sv.ft_disable = [];
sv.ft_warning = [];
sv.quest = null;

/* STATE/STATUS  */
/* Information about your current state or status.  */
/*
    &quot;pc&quot; == Playable Character
    &quot;pp&quot; == Permanent Partner
    &quot;tp1&quot; == Temporary Partner 1
    &quot;tp2&quot; == Temporary Partner 2
*/
sv.pc = new setup.COM.Player({temp: false,});
sv.pc.nude = false;
sv.pc.topless = false;
sv.pc.panties = false;

/* ACCOUNT */
sv.account = {};
sv.account.inventory = {};
let svai = State.variables.account.inventory;
svai.weapons = [];
svai.armors = [];
svai.accessories = [];
for (let equippable in setup.COM.EQUIPPABLES) {
    switch (setup.COM.EQUIPPABLES[equippable].slot) {
        case &quot;weapon&quot;:
            svai.weapons.push(setup.COM.EQUIPPABLES[equippable]);
            break;
        case &quot;armor&quot;:
            svai.armors.push(setup.COM.EQUIPPABLES[equippable]);
            break;
        case &quot;accessory&quot;:
            svai.accessories.push(setup.COM.EQUIPPABLES[equippable]);
            break;
    }
}

State.variables.initDecrementAmount = .25;

sv.pc.equippables.weapon = svai.weapons[0];
sv.pc.equippables.armor = svai.armors[3];
sv.pc.equippables.accessory = svai.accessories[1];

sv.pc.equippables.weapon.mods = [setup.COM.affixes.WEAPON_DECREASED_INIT_RECOVERY, setup.COM.affixes.WEAPON_DECREASED_INIT_RECOVERY, setup.COM.affixes.WEAPON_DECREASED_INIT_RECOVERY];
sv.pc.equippables.armor.mods = [setup.COM.affixes.ARMOR_DECREASED_INIT_RECOVERY, setup.COM.affixes.ARMOR_DECREASED_INIT_RECOVERY];
sv.pc.equippables.accessory.mods = [setup.COM.affixes.ACCESSORY_DECREASED_INIT_RECOVERY, setup.COM.affixes.ACCESSORY_DECREASED_INIT_RECOVERY];

svai.mods = [];
for (let mod in setup.COM.affixes) {
    svai.mods.push(setup.COM.Affix.new(setup.COM.affixes[mod]));
}

sv.pp = undefined;
sv.tp1 = undefined;
sv.tp2 = undefined;


/* INFO MENU */
sv.info = {};
sv.info.current = null;


/* KNOWLEDGE */
/* These are used for tooltips and also in the knowledge tab. See UIBar/knowledge.tw */
sv.kn_vampire_lv = 0;
setup.fns.addTooltip([&quot;vampire&quot;, &quot;vampires&quot;], &quot;K_Vampires&quot;);


// PEOPLE
/* These are used for tooltips and also in the people tab. See UIBar/people.tw */
sv.ppl_orick_met = false;
setup.fns.addTooltip(&quot;Orick&quot;, &quot;P_Orick&quot;);


// LOCATIONS
// Locations are completely unimplemented, but would be used the same way as people, but you discover them instead of meeting them.
sv.loc_lox_disc = false;
sv.loc_lox = 0;
setup.fns.addTooltip(&quot;Lox&quot;, &quot;L_Lox&quot;)


// TOOLTIPS
/* Misc. things that I want to have a tooltip but will otherwise never be seen. */
setup.fns.addTooltip(&quot;tower&quot;, &quot;TT_Tower&quot;);


/*
 ######  ######## ######## ######## #### ##    ##  ######    ######  
##    ## ##          ##       ##     ##  ###   ## ##    ##  ##    ## 
##       ##          ##       ##     ##  ####  ## ##        ##       
 ######  ######      ##       ##     ##  ## ## ## ##   ####  ######  
      ## ##          ##       ##     ##  ##  #### ##    ##        ## 
##    ## ##          ##       ##     ##  ##   ### ##    ##  ##    ## 
 ######  ########    ##       ##    #### ##    ##  ######    ######  
*/

// Toggle the option for images.
// Setting.addToggle(&quot;images&quot;, {
//     label: &quot;Allow images?&quot;,
//     default: true
// })

// Toggle for Background Images.
Setting.addToggle(&quot;bgimg&quot;, {
    label: &quot;Show Background Images?&quot;,
    default: true
});
settings.bgimg = true;

// TODO:
// Toggle to hide images.
// Toggle to turn off image blurring.

// // Toggle option for tooltips.
// Setting.addToggle(&quot;tooltips&quot;, {
//     label: &quot;Show tooltips on important text?&quot;,
//     default: true,
//     onChange: () =&gt; {
//         Engine.show()
//     },
// });
// settings.tooltips = true;
// Setting.save();

// Pronouns
Setting.addList(&quot;pronouns&quot;, {
    label: &quot;Preferred Pronouns:&quot;,
    list: [
        &quot;female&quot;,
        &quot;male&quot;,
        &quot;misc&quot;
    ],
    default: &quot;female&quot;,
    onChange: () =&gt; {
        Engine.show()
    },
});

// Audio
Setting.addHeader(&quot;Audio Settings&quot;);
Setting.addRange(&quot;masterVolume&quot;, {
    label: &quot;Master Volume&quot;,
    min: 0,
    max: 100,
    step: 5,
    onChange: function () {
        $.wiki(`&lt;&lt;masteraudio volume ${settings.masterVolume / 100}&gt;&gt;`);
    }
});

Setting.addRange(&quot;musicVolume&quot;, {
    label: &quot;Music Volume&quot;,
    min: 0,
    max: 100,
    step: 5,
    onChange: function () {
        $.wiki(`&lt;&lt;audio &quot;:music&quot; volume ${settings.musicVolume / 100}&gt;&gt;`);
    }
});

Setting.addRange(&quot;sfxVolume&quot;, {
    label: &quot;SFX Volume&quot;,
    min: 0,
    max: 100,
    step: 5,
    onChange: function () {
        $.wiki(`&lt;&lt;audio &quot;:sfx&quot; volume ${settings.sfxVolume / 100}&gt;&gt;`);
    }
});

/** 
 * ~FIXME~: Pronouns get reset on refresh.  
 * REVIEW: Is this still a bug? 
 */

/**
 * Audio
 * 
 * &lt;&lt;masteraudio volume 0.40&gt;&gt;
 * &lt;&lt;audio &quot;:music&quot; volume 1&gt;&gt;
 * &lt;&lt;audio &quot;:sfx&quot; volume 1&gt;&gt;
 * &lt;&lt;audio &quot;:combat&quot; volume 1&gt;&gt;
 */
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="Inbetween" tags="@rest" position="575,350" size="100,100">This passage exists so that you can change your party configuration and items inbetween combat instances.
&lt;br&gt;
I hope you&#39;re enjoying my simulator! 
&lt;br&gt;
Click a button to generate a Combat Instance.
&lt;br&gt;
They&#39;re roughly ordered from least difficult to most difficult.
&lt;br&gt;
&lt;&lt;button &quot;Gen. CI w/ Spiders&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: [
				&quot;EN_BABY_SPIDER&quot;,
				&quot;EN_MOMMY_SPIDER&quot;,
				&quot;EN_BABY_SPIDER&quot;,
				&quot;EN_BABY_SPIDER&quot;,
				&quot;EN_BABY_SPIDER&quot;,
			],
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Gen. CI w/ Carbuncles&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		/* Random Int between 1 and 5 */
		let int = Math.ceil(Math.random() * (5));
		let carbuncleArr = [
			&quot;EN_CARBUNCLE&quot;,
			&quot;EN_EMERALD_CARBUNCLE&quot;,
			&quot;EN_OYNX_CARBUNCLE&quot;,
			&quot;EN_RUBY_CARBUNCLE&quot;,
			&quot;EN_SAPPHIRE_CARBUNCLE&quot;,
			&quot;EN_TOPAZ_CARBUNCLE&quot;,
		];
		let ep = setup.fns.ranItems(int, carbuncleArr, true);

		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: ep,
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Gen. CI w/ Fauna&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		/* Random Int between 1 and 2 */
		let int = Math.ceil(Math.random() * (2));
		let ep = setup.fns.ranItems(int, [&quot;EN_HOG&quot;], true); /* Basically: 1 or 2 hogs? */

		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: ep,
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Gen. CI w/ Skeletons&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		/* Random Int between 1 and 5 */
		let int = Math.ceil(Math.random() * (5));
		let skeletonArr = [
			&quot;EN_UNARMED_SKELETON&quot;,
			&quot;EN_SPEAR_SKELETON&quot;,
			&quot;EN_SWORDSHIELD_SKELETON&quot;,
			&quot;EN_BOW_SKELETON&quot;,
		];
		let ep = setup.fns.ranItems(int, skeletonArr, true);

		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: ep,
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Gen. CI w/ Ghouls&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		/* Random Int between 2 and 4 */
		let int = Math.floor(Math.random() * (4 - 2 + 1) + 2);
		let skeletonArr = [
			&quot;EN_UNARMED_SKELETON&quot;,
			&quot;EN_SPEAR_SKELETON&quot;,
			&quot;EN_SWORDSHIELD_SKELETON&quot;,
			&quot;EN_BOW_SKELETON&quot;,
		];
		let ep = setup.fns.ranItems(int, skeletonArr, true);
		ep.push(&quot;EN_SAUSON_GHOUL_MASTER&quot;);

		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: ep,
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Gen.Hardest CI&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		/* Random Int between 3 and 5 */
		let int = Math.floor(Math.random() * (5 - 3 + 1) + 3);
		let skeletonArr = [
			&quot;EN_CENTAUR_BOWMAN&quot;,
			&quot;EN_CENTAUR_HERD_MENTOR&quot;,
			&quot;EN_CENTAUR_WARRIOR&quot;,
			&quot;EN_CHAOS_CENTAUR&quot;,
		];
		let ep = setup.fns.ranItems(int, skeletonArr, true);

		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: ep,
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;
&lt;br&gt;
&lt;&lt;button &quot;Gen. CI w/ Random Enemies&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		/* Random Int between 1 and 5 */
		let int = Math.ceil(Math.random() * (5));

		State.variables.ci = new setup.COM.CombatInstance({
			winPassage: &quot;Inbetween&quot;,
			losePassage: &quot;Inbetween&quot;,
			ep: setup.fns.ranItems(int, Object.keys(setup.COM.monsters), true),
		});

		Engine.play(&quot;Combat_Overlord&quot;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="24" name="Party_Preset_Select" tags="helper nostats" position="275,350" size="100,100">&lt;&lt;script&gt;&gt;
	let sv = State.variables;
	let st = State.temporary;
	let Eq = setup.COM.Equippable;
	let eq = setup.COM.EQUIPPABLES;
	let af = setup.COM.affixes;

	/* TODO: Make presets. */
	st.presets = {
		trickster: new setup.COM.Player({
			name: &quot;Trickster&quot;, 
			equippables: {
				weapon: new Eq(eq.swordandshield),
				armor: new Eq(eq.leatherarmor),
				accessory: new Eq(eq.trickstersamulet),
			}
		}),
		critmonster: new setup.COM.Player({
			name: &quot;Crit Tank&quot;, 
			equippables: {
				weapon: new Eq(eq.executioneraxe),
				armor: new Eq(eq.knightarmor),
				accessory: new Eq(eq.sharktoothamulet),
			}
		}),
		cackler: new setup.COM.Player({
			name: &quot;Abyssal Cackler&quot;, 
			equippables: {
				weapon: new Eq(eq.abyssalspear),
				armor: new Eq(eq.priestvestiges),
				accessory: new Eq(eq.elementalistsamulet),
			}
		}),
		elementalranger: new setup.COM.Player({
			name: &quot;Elemental Ranger&quot;, 
			equippables: {
				weapon: new Eq(eq.arcanebow),
				armor: new Eq(eq.leatherarmor),
				accessory: new Eq(eq.elementalistsamulet),
			}
		}),
		spearuser: new setup.COM.Player({
			name: &quot;Spear User&quot;, 
			equippables: {
				weapon: new Eq(eq.nimblespear),
				armor: new Eq(eq.leatherarmor),
				accessory: new Eq(eq.elementalistsamulet),
			}
		}),
	};

	st.presets.trickster.equippables.weapon.mods = [af.WEAPON_DECREASED_INIT_RECOVERY, af.WEAPON_DECREASED_INIT_RECOVERY, af.WEAPON_DECREASED_INIT_RECOVERY];
	st.presets.trickster.equippables.armor.mods = [af.ARMOR_DECREASED_INIT_RECOVERY, af.ARMOR_DECREASED_INIT_RECOVERY];
	st.presets.trickster.equippables.accessory.mods = [af.ACCESSORY_DECREASED_INIT_RECOVERY, af.ACCESSORY_DECREASED_INIT_RECOVERY];

	st.presets.critmonster.equippables.weapon.mods = [af.WEAPON_INCREASED_CRIT_CHANCE, af.WEAPON_INCREASED_CRIT_DAMAGE];
	st.presets.critmonster.equippables.armor.mods = [
		af.ARMOR_INCREASED_ELEMENTAL_RESISTANCE, 
		af.ARMOR_INCREASED_MATERIAL_RESISTANCE_PLATE, 
		af.ARMOR_MINUS_MATERIAL_DAMAGE, 
		af.ARMOR_ADDED_HEALTH_MAX];
	st.presets.critmonster.equippables.accessory.mods = [af.ACCESSORY_INCREASED_CRIT_DAMAGE, af.ACCESSORY_INCREASED_CRIT_DAMAGE];

	st.presets.cackler.equippables.weapon.mods = [af.WEAPON_INCREASED_LIGHTNING_DAMAGE, af.WEAPON_INCREASED_AETHER_DAMAGE];
	st.presets.cackler.equippables.armor.mods = [af.ARMOR_INCREASED_ELEMENTAL_RESISTANCE, af.ARMOR_INCREASED_ELEMENTAL_RESISTANCE, af.ARMOR_INCREASED_OCCULT_RESISTANCE];
	st.presets.cackler.equippables.accessory.mods = [af.ACCESSORY_MINUS_INIT_START, af.ACCESSORY_MINUS_INIT_START];

	st.presets.elementalranger.equippables.weapon.mods = [af.WEAPON_INCREASED_FIRE_DAMAGE, af.WEAPON_INCREASED_FROST_DAMAGE, af.WEAPON_INCREASED_LIGHTNING_DAMAGE, af.WEAPON_INCREASED_CRIT_CHANCE];
	st.presets.elementalranger.equippables.armor.mods = [af.ARMOR_INCREASED_ELEMENTAL_RESISTANCE, af.ARMOR_INCREASED_ACTION_SPEED];
	st.presets.elementalranger.equippables.accessory.mods = [af.ACCESSORY_INCREASED_CRIT_DAMAGE, af.ACCESSORY_INCREASED_CRIT_DAMAGE];

	st.presets.spearuser.equippables.weapon.mods = [af.WEAPON_INCREASED_DEFLECT_CHANCE, af.WEAPON_INCREASED_PIERCE_DAMAGE, af.WEAPON_INCREASED_PIERCE_DAMAGE];
	st.presets.spearuser.equippables.armor.mods = [af.ARMOR_MINUS_INIT_START, af.ARMOR_DECREASED_INIT_RECOVERY];
	st.presets.spearuser.equippables.accessory.mods = [af.ARMOR_INCREASED_DEFLECT_CHANCE, af.ARMOR_INCREASED_DEFLECT_CHANCE, af.ARMOR_INCREASED_DEFLECT_CHANCE];
&lt;&lt;/script&gt;&gt;
&lt;!--
&lt;griditem&gt;
	&lt;gridtitle&gt;Main Character&lt;/gridtitle&gt;
	&lt;griddescript&gt;
		&lt;span id=&quot;lbpc&quot;&gt;
		&lt;&lt;listbox &quot;$pcObj&quot; autoselect&gt;&gt;
			&lt;&lt;option &quot;Trickster&quot; &quot;trickster&quot;&gt;&gt;
			&lt;&lt;option &quot;Crit Tank&quot; &quot;critmonster&quot;&gt;&gt;
			&lt;&lt;option &quot;Cackler&quot; &quot;cackler&quot;&gt;&gt;
			&lt;&lt;option &quot;Elemental Ranger&quot; &quot;elementalranger&quot;&gt;&gt;
			&lt;&lt;option &quot;Spear User&quot; &quot;spearuser&quot;&gt;&gt;
		&lt;&lt;/listbox&gt;&gt;
		&lt;/span&gt;
	&lt;/griddescript&gt;
&lt;/griditem&gt;
--&gt;
&lt;!--
&lt;griditem&gt;
	&lt;gridtitle&gt;Permanent Partner&lt;/gridtitle&gt;
	&lt;griddescript&gt;
		&lt;span id=&quot;lbpp&quot;&gt;
		&lt;&lt;listbox &quot;$ppObj&quot;&gt;&gt;
			&lt;&lt;option &quot;None&quot; autoselect&gt;&gt;
			&lt;&lt;option &quot;Trickster&quot; &quot;trickster&quot;&gt;&gt;
			&lt;&lt;option &quot;Crit Tank&quot; &quot;critmonster&quot;&gt;&gt;
			&lt;&lt;option &quot;Cackler&quot; &quot;cackler&quot;&gt;&gt;
			&lt;&lt;option &quot;Elemental Ranger&quot; &quot;elementalranger&quot;&gt;&gt;
			&lt;&lt;option &quot;Spear User&quot; &quot;spearuser&quot;&gt;&gt;
		&lt;&lt;/listbox&gt;&gt;
		&lt;/span&gt;
	&lt;/griddescript&gt;
&lt;/griditem&gt;
--&gt;

&lt;span id=&quot;tp1swapcharplate&quot;&gt;
	&lt;&lt;if ($tp1)&gt;&gt;
		&lt;&lt;print new setup.COM.Combatant($tp1).getInfo()&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;print new setup.COM.Combatant(new setup.COM.Player()).getInfo()&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;/span&gt;

&lt;griditem id=&quot;tp1swap&quot;&gt;
	&lt;gridtitle&gt;Temp Partner 1&lt;/gridtitle&gt;
	&lt;griddescript&gt;
		&lt;span id=&quot;lbtp1&quot;&gt;
		&lt;&lt;listbox &quot;$tp1Obj&quot; autoselect&gt;&gt;
			&lt;&lt;option &quot;None&quot;&gt;&gt;
			&lt;&lt;option &quot;Trickster&quot; &quot;trickster&quot;&gt;&gt;
			&lt;&lt;option &quot;Crit Tank&quot; &quot;critmonster&quot;&gt;&gt;
			&lt;&lt;option &quot;Cackler&quot; &quot;cackler&quot;&gt;&gt;
			&lt;&lt;option &quot;Elemental Ranger&quot; &quot;elementalranger&quot;&gt;&gt;
			&lt;&lt;option &quot;Spear User&quot; &quot;spearuser&quot;&gt;&gt;
		&lt;&lt;/listbox&gt;&gt;
		&lt;/span&gt;
	&lt;/griddescript&gt;
&lt;/griditem&gt;

&lt;griditem id=&quot;tp2swap&quot;&gt;
	&lt;gridtitle&gt;Temp Partner 2&lt;/gridtitle&gt;
	&lt;griddescript&gt;
		&lt;span id=&quot;lbtp2&quot;&gt;
		&lt;&lt;listbox &quot;$tp2Obj&quot; autoselect&gt;&gt;
			&lt;&lt;option &quot;None&quot;&gt;&gt;
			&lt;&lt;option &quot;Trickster&quot; &quot;trickster&quot;&gt;&gt;
			&lt;&lt;option &quot;Crit Tank&quot; &quot;critmonster&quot;&gt;&gt;
			&lt;&lt;option &quot;Cackler&quot; &quot;cackler&quot;&gt;&gt;
			&lt;&lt;option &quot;Elemental Ranger&quot; &quot;elementalranger&quot;&gt;&gt;
			&lt;&lt;option &quot;Spear User&quot; &quot;spearuser&quot;&gt;&gt;
		&lt;&lt;/listbox&gt;&gt;
		&lt;/span&gt;
	&lt;/griddescript&gt;
&lt;/griditem&gt;

&lt;span id=&quot;tp2swapcharplate&quot;&gt;
	&lt;&lt;if ($tp2)&gt;&gt;
		&lt;&lt;print new setup.COM.Combatant($tp2).getInfo()&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;print new setup.COM.Combatant(new setup.COM.Player()).getInfo()&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;/span&gt;

&lt;&lt;done&gt;&gt;
&lt;&lt;script&gt;&gt;
	let sv = State.variables;
	let st = State.temporary;

	function localUpdateInfoScreen() {
		sv.info.current = null;
	}

	/*
	setup.fns.waitForElm(&#39;#lbpc select&#39;).then(() =&gt; {
		$(&#39;#lbpc select&#39;).on(&#39;change&#39;, function (event) {
			event.stopImmediatePropagation();

			sv.pc = setup.fns.cloneDeep(st.presets[sv.pcObj]);

			localUpdateInfoScreen();
		});
	});
	*/

	/*
	setup.fns.waitForElm(&#39;#lbpp select&#39;).then(() =&gt; {
		$(&#39;#lbpp select&#39;).on(&#39;change&#39;, function (event) {
			event.stopImmediatePropagation();

			if (sv.ppObj.toLowerCase() === &quot;none&quot;) {
				sv.pp = undefined;
			} else {
				sv.pp = setup.fns.cloneDeep(st.presets[sv.ppObj]);
			}

			localUpdateInfoScreen();
		});
	});
	*/

	setup.fns.waitForElm(&#39;#lbtp1 select&#39;).then(() =&gt; {
		$(&#39;#lbtp1 select&#39;).on(&#39;change&#39;, function (event) {
			event.stopImmediatePropagation();

			if (sv.tp1Obj.toLowerCase() === &quot;none&quot;) {
				sv.tp1 = undefined;
				$(`#tp1swapcharplate`).html(&quot;&quot;);
				$(`#tp1swapcharplate`).wiki(new setup.COM.Combatant(new setup.COM.Player()).getInfo());
			} else {
				sv.tp1 = setup.fns.cloneDeep(st.presets[sv.tp1Obj]);
				$(`#tp1swapcharplate`).html(&quot;&quot;);
				$(`#tp1swapcharplate`).wiki(new setup.COM.Combatant(sv.tp1).getInfo());
			}
			/* localUpdateInfoScreen(); */
		});
	});

	setup.fns.waitForElm(&#39;#lbtp2 select&#39;).then(() =&gt; {
		$(&#39;#lbtp2 select&#39;).on(&#39;change&#39;, function (event) {
			event.stopImmediatePropagation();

			if (sv.tp2Obj.toLowerCase() === &quot;none&quot;) {
				sv.tp2 = undefined;
				$(`#tp2swapcharplate`).html(&quot;&quot;);
				$(`#tp2swapcharplate`).wiki(new setup.COM.Combatant(new setup.COM.Player()).getInfo());
			} else {
				sv.tp2 = setup.fns.cloneDeep(st.presets[sv.tp2Obj]);
				$(`#tp2swapcharplate`).html(&quot;&quot;);
				$(`#tp2swapcharplate`).wiki(new setup.COM.Combatant(sv.tp2).getInfo());
			}

			/* localUpdateInfoScreen(); */
		});
	});
&lt;&lt;/script&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="25" name="Link-Replace-Prepend" tags="@ex nostats" position="750,25" size="100,100">/* Showing how to use Link Replaces to go through all options, and then showing a final text block. */
&lt;&lt;bg &quot;assets/imported/img/desolatecity.jpeg&quot; 0.70&gt;&gt;
&lt;&lt;set _loc to &quot;#1_resp&quot;&gt;&gt;
Here, I want to show off using an event handler to show text, and then show the text block afterwards. ?Mr
&lt;br&gt;
&lt;br&gt;

&lt;span id=&quot;1_resp&quot;&gt;&lt;/span&gt;
&lt;span id=&quot;2_resp&quot;&gt;&lt;/span&gt;
&lt;span id=&quot;3_resp&quot;&gt;&lt;/span&gt;

&lt;&lt;linkreplace &quot;You gotta pick all these options, but the order doesn&#39;t matter.&lt;br&gt;&quot;&gt;&gt;
    &lt;&lt;prepend _loc t8n&gt;&gt;
        You gotta pick all these options, but no, the order you click them can be in any order.
        &lt;br&gt;
    &lt;&lt;/prepend&gt;&gt;
    &lt;&lt;if _loc is &quot;#1_resp&quot;&gt;&gt;
        &lt;&lt;set _loc to &quot;#2_resp&quot;&gt;&gt;
    &lt;&lt;elseif _loc is &quot;#2_resp&quot;&gt;&gt;
        &lt;&lt;set _loc to &quot;#3_resp&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set _loc to &quot;done&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;linkreplace &quot;Event Handlers sure are handy.&lt;br&gt;&quot;&gt;&gt;
    &lt;&lt;prepend _loc t8n&gt;&gt;
        They let us do so much. 
        &lt;br&gt;
    &lt;&lt;/prepend&gt;&gt;
    &lt;&lt;if _loc is &quot;#1_resp&quot;&gt;&gt;
        &lt;&lt;set _loc to &quot;#2_resp&quot;&gt;&gt;
    &lt;&lt;elseif _loc is &quot;#2_resp&quot;&gt;&gt;
        &lt;&lt;set _loc to &quot;#3_resp&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set _loc to &quot;done&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;linkreplace &quot;IDK I felt like adding a third option.&lt;br&gt;&quot;&gt;&gt;
    &lt;&lt;prepend _loc t8n&gt;&gt;
        You can add as many options as you want, baby!
        &lt;br&gt;
    &lt;&lt;/prepend&gt;&gt;
    &lt;&lt;if _loc is &quot;#1_resp&quot;&gt;&gt;
        &lt;&lt;set _loc to &quot;#2_resp&quot;&gt;&gt;
    &lt;&lt;elseif _loc is &quot;#2_resp&quot;&gt;&gt;
        &lt;&lt;set _loc to &quot;#3_resp&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
        &lt;&lt;set _loc to &quot;done&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;br&gt;
&lt;span id=&quot;insert&quot;&gt;&lt;/span&gt;

&lt;&lt;script&gt;&gt;
    $(document).one(&quot;:passagedisplay&quot;, function() {
        $(&quot;a.macro-linkreplace&quot;).on(&quot;click&quot;, function() {
            if (State.getVar(&quot;_loc&quot;) === &quot;done&quot;) {
                $(&quot;#insert&quot;).wiki(Story.get(&quot;Link-Replace-Hide-Others-Helper&quot;).processText());
                $(&quot;#insert&quot;).wiki(&quot;And there you go, all the text has been replaced! This text was manually added.&quot;);
            }
        });
    })
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="26" name="Link-Replace-Prepend-Helper" tags="@ex nostats" position="750,50" size="100,100">And there you go, all the text has been replaced! This text has been added using a passage.</tw-passagedata><tw-passagedata pid="27" name="Link-Replace-Hide-Others" tags="@ex nostats" position="625,25" size="100,100">Only one option can be picked, Which one will it be?
&lt;br&gt;
&lt;br&gt;
&lt;&lt;linkreplace &quot;The top option is superior.&lt;br&gt;&quot; t8n&gt;&gt;
    You picked the top option!
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;linkreplace &quot;I like bottoms.&lt;br&gt;&quot; t8n&gt;&gt;
    I get it, I do, but there&#39;s no need to say that.
&lt;&lt;/linkreplace&gt;&gt;
&lt;span id=&quot;insert&quot;&gt;&lt;/span&gt;

&lt;&lt;script&gt;&gt;
    $(document).one(&quot;:passagedisplay&quot;, function() {
        $(&quot;a.macro-linkreplace&quot;).on(&quot;click&quot;, function() {
            $(&quot;a.macro-linkreplace&quot;).addClass(&quot;hidden&quot;);
            $(&quot;#insert&quot;).wiki(Story.get(&quot;Link-Replace-Hide-Others-Helper&quot;).processText());
        });
    })
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="28" name="Link-Replace-Hide-Others-Helper" tags="@ex nostats" position="625,50" size="100,100">&lt;br&gt;
&lt;br&gt;
This is the helper text that appears after you pick an option.</tw-passagedata><tw-passagedata pid="29" name="Intro1" tags=".introduction @intro1" position="1100,350" size="100,100">&lt;&lt;audio &quot;:music&quot; stop&gt;&gt;
&lt;&lt;audio &quot;147&quot; volume 0 fadein loop&gt;&gt;

/**
 * Sci-Fi introduction scene where it is explained to you that you&#39;re 
 * going back in time in order to fight evils. First quest? Get 
 * stronger. 
 */</tw-passagedata><tw-passagedata pid="30" name="MainMenu" tags="#mainmenu @mainmenu" position="1225,350" size="100,100">&lt;&lt;audio &quot;MainMenu&quot; load&gt;&gt;
/* &lt;&lt;audio &quot;HeavyClickReverb&quot; load&gt;&gt; */
&lt;span id=&quot;main-menu-start&quot; class=&quot;animate-fade&quot;&gt;Start...&lt;/span&gt;
&lt;span id=&quot;main-menu-menu&quot; class=&quot;hidden&quot;&gt;
	&lt;&lt;link [[&quot;New Game&quot;|Intro1]]&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;br&gt;
	&lt;span class=&quot;disabled&quot;&gt;Load Game&lt;/span&gt;
	&lt;br&gt;
	&lt;span class=&quot;disabled&quot;&gt;Connect Online&lt;/span&gt;
	&lt;br&gt;
	&lt;&lt;link &quot;Settings&quot;&gt;&gt;&lt;&lt;run UI.settings()&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;

&lt;&lt;done&gt;&gt;
&lt;&lt;script&gt;&gt;
	/* On click, hide main-menu-start, unhide main-menu-menu. */
	$(`#passages`).one(&#39;click&#39;, function () {
		$.wiki(`&lt;&lt;audio &quot;MainMenu&quot; volume 0.0 fadeoverto 2 1.0&gt;&gt;`);
		/* TODO: Make pretty transition. */
		$(`#main-menu-start`).addClass(&quot;hidden&quot;);
		$(`#main-menu-menu`).removeClass(&quot;hidden&quot;);
	});

	/* On hover, play tick sound. */
	$(`#main-menu-menu a`).on(&#39;mouseenter&#39;, function () {
		SimpleAudio.select(&quot;tick2&quot;).loop(true).play();
	});
&lt;&lt;/script&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="31" name="Map" tags="#map nostats" position="100,475" size="100,100">&lt;&lt;set $GameState = &quot;map&quot;&gt;&gt;

&lt;&lt;done&gt;&gt;
&lt;&lt;script&gt;&gt;
    let sv = State.variables;
    let st = State.temporary;

    if (sv.quest === null ) {
        /* TODO: Eventually, this should be like a tutorial quest if its the first quest, or just lead to the guild hall.  */

        sv.quest = setup.quests.spiderQuest2;
        sv.quest.uuid = setup.uuid_v4();
        sv.quest.sequence = 1;
        sv.quest.sequenceLoaded = false;
    }
    
    st.pixi = new PIXI.Application({width: window.innerWidth, height: window.innerHeight});
    $(`#passage-map`).append(st.pixi.view);

    sv.grid = new setup.hex.Grid();

    /* Amount of time in seconds since our demo has been running. */
    /* let elapsed = 0.0; */

    /* Tell the application to run a callback every frame. */
    /* 
    st.pixi.ticker.add((delta)=&gt; {
        elapsed += delta;
    });
    */

    sv.map = new setup.map.Map({debug: false});
&lt;&lt;/script&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="Start" tags="" position="225,475" size="100,100">You shouldn&#39;t see this. If you do, LeahPeach messed up the _config.js file.</tw-passagedata><tw-passagedata pid="33" name="DebugStart" tags="@start" position="275,250" size="100,100">&lt;&lt;set _pronouns to &quot;female&quot;&gt;&gt;
&lt;span id=&quot;mali-copy&quot; style=&quot;display: grid;width: max-content;align-items: center;justify-items: center;&quot;&gt;
	&lt;span id=&quot;mali-title&quot; style=&quot;display: block;border-left: 2px solid white;border-right: 2px solid white;width: min-content;padding: 0 0.5em;border-radius: 16px;margin-bottom: -0.8em;background: var(--background);z-index: 1;&quot;&gt;Cute-Puppy&lt;/span&gt;
	&lt;span id=&quot;mali-descript&quot; style=&quot;display: block;border: 2px solid white;padding: 1em;border-radius: 16px;text-align: center;&quot;&gt;
		I&#39;m nibbling on your ear... 
	&lt;/span&gt; 
&lt;/span&gt;
&lt;br&gt;
Words
&lt;br&gt;
&lt;gridcontainer id=&quot;charSelect&quot;&gt;
	&lt;&lt;set $pc.name to &quot;Elaina&quot;&gt;&gt;
	/* 
	&lt;griditem class=&quot;row2&quot;&gt;
		&lt;gridtitle&gt;Basic Settings&lt;/gridtitle&gt;
		&lt;griddescript&gt;
		&lt;h4&gt;&lt;label&gt;Name thyself:   &lt;&lt;textbox &quot;$pc.name&quot; &quot;PCName_TBD&quot;&gt;&gt;&lt;/label&gt;&lt;/h4&gt;
		&lt;br&gt;
		&lt;br&gt; 
		&lt;label&gt;Which set of pronouns do you prefer? 
			&lt;&lt;cycle &quot;_pronouns&quot; &quot;autoselect&quot;&gt;&gt;
				&lt;&lt;option &quot;she/her/hers&quot; &quot;female&quot;&gt;&gt;
				&lt;&lt;option &quot;he/him/his&quot; &quot;male&quot;&gt;&gt;
				&lt;&lt;option &quot;they/them/theirs&quot; &quot;misc&quot;&gt;&gt;
			&lt;&lt;/cycle&gt;&gt;
		&lt;/label&gt;
		&lt;br&gt;
		&lt;br&gt;
		&lt;h4&gt;Your body has:&lt;/h4&gt;
		&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;$pc.penis&quot; false true autocheck&gt;&gt; A penis.&lt;/label&gt;
		&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;$pc.breasts&quot; false true checked&gt;&gt; Breasts.&lt;/label&gt;
		&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;$pc.vagina&quot; false true checked&gt;&gt; A vagina.&lt;/label&gt; 
		
        &lt;/griddescript&gt; 
	&lt;/griditem&gt;
	*/
	&lt;&lt;set $pc.penis to false&gt;&gt;
	&lt;&lt;set $pc.breasts to true&gt;&gt;
	&lt;&lt;set $pc.vagina to true&gt;&gt;
&lt;/gridcontainer&gt;
&lt;br&gt;
&lt;&lt;link [[&quot;Combat Testing&quot;|Inbetween]]&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;br&gt;
&lt;&lt;link [[&quot;Map Testing&quot;|Map]]&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;br&gt;
&lt;&lt;link [[&quot;Textbox Testing&quot;|Textboxes]]&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;br&gt;
&lt;&lt;link [[&quot;Main Menu&quot;|MainMenu]]&gt;&gt;&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="34" name="Textboxes" tags="" position="475,475" size="100,100">&lt;&lt;button &quot;A variety of settings&quot;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		new setup.tb.TextBox({
			showBackground: false,
			backgroundSrc: &quot;&quot;,
			showDimmer: true,
			showPortrait: false,
			showSpeakerName: false,
			lines: [
				new setup.tb.Line({
					line: &quot;No name. No portrait.&quot;,
				}),
				new setup.tb.Line({
					portrait: &quot;assets/imported/img/png/turn_icon_pl.png&quot;,
					line: &quot;No name. Yes portrait.&quot;,
				}),
				new setup.tb.Line({
					speaker: &quot;Concerned Man&quot;,
					line: &quot;Yes name. No portrait.&quot;,
				}),
				new setup.tb.Line({
					portrait: &quot;assets/imported/img/png/turn_icon_pl.png&quot;,
					speaker: &quot;Concerned Man&quot;,
					line: &quot;Yes name. Yes portrait.&quot;,
				}),
			],
		});
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="ContentDisabler" tags="initialize nostats" position="0,275" size="100,100">Please select which content you do not want to encounter.

@@.warning;&lt;br&gt;If you set content to &quot;Warn&quot;, passages that contain that content will have a warning.@@
@@.warning;&lt;br&gt;If you set content to &quot;Disable&quot;, you&#39;ll never know that you even missed an option.@@

&lt;span class=&quot;row&quot;&gt;
&lt;div class=&quot;column&quot;&gt;
@@.contentdisabletitle;NSFW1@@
&lt;br&gt;@@.subtext;Subtext1.@@
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_warn-nsfw1&quot; false true autocheck&gt;&gt; Warn&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_disable-nsfw1&quot; false true autocheck&gt;&gt; Disable&lt;/label&gt;
&lt;br&gt;
&lt;br&gt;@@.contentdisabletitle;NSFW2@@
&lt;br&gt;@@.subtext;Subtext2.@@
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_warn-nsfw2&quot; false true autocheck&gt;&gt; Warn&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_disable-nsfw2&quot; false true autocheck&gt;&gt; Disable&lt;/label&gt;

&lt;/div&gt;
&lt;div class=&quot;column&quot;&gt;
@@.contentdisabletitle;nsfw3@@
&lt;br&gt;@@.subtext;Subtext3.@@
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_warn-nsfw3&quot; false true autocheck&gt;&gt; Warn&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_disable-nsfw3&quot; false true autocheck&gt;&gt; Disable&lt;/label&gt;
&lt;br&gt;
&lt;br&gt;@@.contentdisabletitle;NSFW@@
&lt;br&gt;@@.subtext;Listen, the point of this story is to be naughty.@@
&lt;br&gt;@@.warning;I&#39;m not going to stop you, but turning this on may significantly hinder your enjoyment of this story.@@
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_warn-nsfw&quot; false true autocheck&gt;&gt; Warn&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;_disable-nsfw&quot; false true autocheck&gt;&gt; Disable&lt;/label&gt;

&lt;/div&gt;
&lt;/span&gt;

&lt;&lt;done&gt;&gt;
    /* DESIRED: Check the boxes if they&#39;re selected. */

	/* Run an event handler that refreshes the passage when an option changes. */
	&lt;&lt;run 
        checkboxHandler(&quot;nsfw1&quot;);
        checkboxHandler(&quot;nsfw2&quot;);
        checkboxHandler(&quot;nsfw3&quot;);
        checkboxHandler(&quot;nsfw&quot;);

        function checkboxHandler(content) {
            let warn_content = &quot;input#checkbox--warn-&quot; + content;
            $(warn_content).on(&quot;click&quot;, function() {
                if (document.querySelector(warn_content).checked) {
                    /* Ensure the content isn&#39;t already in the array. */
                    if (!variables().ft_warning.includes(content)) {
                        variables().ft_warning.push(content);
                    } 
                } else {
                    variables().ft_warning = variables().ft_warning.filter(v =&gt; v !== content); 
                }
			    Engine.show();
            });

            let disable_content = &quot;input#checkbox--disable-&quot; + content;
            $(disable_content).on(&quot;click&quot;, function() {
                if (document.querySelector(disable_content).checked) {
                    /* Ensure the content isn&#39;t already in the array. */
                    if (!variables().ft_disable.includes(content)) {
                        variables().ft_disable.push(content);
                    } 
                } else {
                    variables().ft_disable = variables().ft_disable.filter(v =&gt; v !== content); 
                }
			    Engine.show();
            });
        };
	&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="36" name="CreditsText" tags="uibar nostats" position="925,25" size="100,100">My name is LeahPeach!
&lt;br&gt;I made dis c:
&lt;br&gt;
&lt;br&gt;
This game was made from my template, which you can browse, fork, or clone at this &lt;a class=&quot;link-external&quot; href=&quot;https://github.com/leahiel/Twine-Template&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;GitHub Repository&lt;/a&gt;
&lt;br&gt;
&lt;br&gt;
This game was made using extensive knowledge and help from the fine folks over at the Twine Games Discord (&lt;a class=&quot;link-external&quot; href=&quot;https://discord.gg/r848Gn7sRn&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Join us here!&lt;/a&gt;) Special thanks go to Chapel, Sjoerdhekking, and Greyelf for their support or help with debugging!
&lt;br&gt;
&lt;br&gt;
&lt;h3&gt;This game uses some SugarCube macros by these fine folks:&lt;/h3&gt;
&lt;br&gt;Flash Macro, © SjoerdHekking, MIT
&lt;br&gt;* Flash Macro is a port of FlashJS, © betaWeb, MIT
&lt;br&gt;* UNMODIFIED
&lt;br&gt;* Ported Macro: https://github.com/SjoerdHekking/custom-macros-sugarcube2/tree/main/Notification
&lt;br&gt;* Original Code: https://github.com/betaWeb/flashjs
&lt;br&gt;* SjoerdHekking&#39;s Itch.io: https://sjoerdhekking.itch.io/
&lt;br&gt;
&lt;br&gt;A Macro, © Maliface, Used with Explicit Written Permission
&lt;br&gt;* Readme: https://github.com/MalifaciousGames/Mali-s-Macros/blob/main/a-macro/a-macro.md
&lt;br&gt;* Other Macros by Maliface: https://github.com/MalifaciousGames/Mali-s-Macros
&lt;br&gt;
&lt;br&gt;
&lt;h3&gt;This game uses code made by other fantastic people:&lt;/h3&gt;
&lt;br&gt;function_weightedRandom.js, © AlyxMS, GNU Affero GPL v3.0
&lt;br&gt;* UNMODIFIED
&lt;br&gt;* Github: https://github.com/AlyxMS/Twine-SugarCube-repository
&lt;br&gt;
&lt;br&gt;Tooltipster v4.2.8, © Caleb Jacob and Louis Ameline, MIT
&lt;br&gt;* CSS MODIFIED by Myself, JS UNMODIFIED
&lt;br&gt;* Homepage: https://calebjacob.github.io/tooltipster/
&lt;br&gt;* Github: https://github.com/calebjacob/tooltipster
&lt;br&gt;
&lt;br&gt;jCanvas v21.0.1, © Caleb Evans, MIT
&lt;br&gt;* MODIFIED by Myself
&lt;br&gt;* Homepage: https://projects.calebevans.me/jcanvas/
&lt;br&gt;* Github: https://github.com/caleb531/jcanvas</tw-passagedata><tw-passagedata pid="37" name="DevOptionsText" tags="uibar nostats" position="1025,25" size="100,100">@@.dialog-header;Development Options@@

&lt;span class=&quot;row&quot;&gt;
&lt;div class=&quot;column&quot;&gt;

The PC has:
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;$pc.breasts&quot; false true autocheck&gt;&gt; Breasts.&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;$pc.penis&quot; false true autocheck&gt;&gt; A penis and balls.&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;checkbox &quot;$pc.vagina&quot; false true autocheck&gt;&gt; A vagina.&lt;/label&gt;
&lt;br&gt;
&lt;br&gt;

Which Passage do you want to see?
&lt;&lt;set _stage to &quot;&quot;&gt;&gt;
&lt;span id=&quot;StageSelectRadioButtonsHere&quot;&gt;&lt;/span&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;radiobutton &quot;_stage-0&quot; false&gt;&gt; Stage 0&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;radiobutton &quot;_stage-1&quot; false&gt;&gt; Stage 1&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;radiobutton &quot;_stage-2&quot; false&gt;&gt; Stage 2&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;radiobutton &quot;_stage-3&quot; false&gt;&gt; Stage 3&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;radiobutton &quot;_stage-4&quot; false&gt;&gt; Stage 4&lt;/label&gt;
&lt;br&gt;&lt;label&gt;&lt;&lt;radiobutton &quot;_stage-ex&quot; false&gt;&gt; Examples&lt;/label&gt;
&lt;br&gt;
&lt;br&gt;
&lt;span id=&quot;psglinks&quot;&gt;&lt;/span&gt;
&lt;br&gt;
&lt;br&gt;
&lt;/div&gt;
&lt;div class=&quot;column&quot;&gt;
Variable Changer:
&lt;br&gt;
&lt;br&gt;
&lt;span id=&quot;storyvars&quot;&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/span&gt;

&lt;&lt;done&gt;&gt;
&lt;&lt;script&gt;&gt;
/* TODO: Insert genitaliaHandler and passagesHandler into setup. */
genitaliaHandler(&quot;pcbreasts&quot;, State.variables.pc.breasts);
genitaliaHandler(&quot;pcpenis&quot;, State.variables.pc.penis);
genitaliaHandler(&quot;pcvagina&quot;, State.variables.pc.vagina);

passagesHandler(&quot;stage-0&quot;, &quot;@0&quot;);
passagesHandler(&quot;stage-1&quot;, &quot;@1&quot;);
passagesHandler(&quot;stage-2&quot;, &quot;@2&quot;);
passagesHandler(&quot;stage-3&quot;, &quot;@3&quot;);
passagesHandler(&quot;stage-4&quot;, &quot;@4&quot;);

let story_passages = Story.lookupWith(function(p) {
    if (!(p.tags.includes(&#39;nostats&#39;) ||
            p.tags.includes(&#39;Twine.image&#39;) ||
            p.tags.includes(&quot;.initialize&quot;) ||
            p.tags.includes(&quot;.rendering&quot;) ||
            p.tags.includes(&quot;.people&quot;) ||
            p.tags.includes(&quot;.knowledge&quot;) ||
            p.tags.includes(&quot;.location&quot;))) {
        return p;
    }
});
/* console.log(story_passages); */
/* TODO: Replace Stage Selection thing with Passage Selection thing. */


/* Ensure these areas are clear for us to append to. */
$(&#39;span#StageSelectRadioButtonsHere&#39;).empty();
$(&#39;span#storyvars&#39;).empty();



Object.keys(State.variables).sort().forEach(key =&gt; {
    /* Don&#39;t log certain variables. */
    if (
        key === &quot;dev_test&quot; || /* Obviously we don&#39;t want to manipulate this variable by accident. */
        key.startsWith(&quot;ft_&quot;) || /* The rest are objects or arrays, which would                      */
        key === &quot;chaptertitles&quot; || /* be way too complicated to get working properly.                  */
        key === &quot;pc&quot; ||
        key === &quot;meta&quot; ||
        key === &quot;user&quot;
    ) {
        return;
    }

    /* Create event handlers that check if the class has changed, and then see what changed, change the variable based on that value, and then run Engine.Show(). This will prevent us from having 10,000 event handlers. */

    if (typeof(State.variables[key]) === &quot;boolean&quot;) {
        /* For booleans, create a checkbox that has their current value in it. If checked, update variable and then re-render. */

        $(&#39;span#storyvars&#39;)
            .append(&quot;&lt;label&gt;&lt;input type=&#39;checkbox&#39; id=&#39;&quot; + key + &quot;&#39;&gt; &quot; + key + &quot;&lt;/label&gt;&lt;br&gt;&quot;);

        let btn = &#39;#&#39; + key;

        if (State.variables[key]) {
            $(btn).prop(&#39;checked&#39;, true);
        } else {
            $(btn).prop(&#39;checked&#39;, false);
        }

        /* FIXME: This isn&#39;t a good idea. This is making an individual event handler for each boolean. So if we have 6000 	bools, we have 6000 event handlers. Instead, we should apply a boolean class to each boolean input. That means we would only need one event handler, even with 6000 bools. */
        $(btn).on(&quot;click&quot;, () =&gt; {
            State.variables[key] = document.querySelector(btn).checked;
            Engine.show();
        });

    } else if (typeof(State.variables[key]) === &quot;number&quot;) {
        /* DESIRED: Variable Debugger: Numbers */
        /* add +/- to document.querySelector(&quot;#storyvars&quot;) */

    } else if (typeof(State.variables[key]) === &quot;string&quot;) {
        /* For strings, create a textbox that has the current value. When textbox is altered, update variable and re-render. */
        $(&#39;span#storyvars&#39;)
            .append(key + &quot;: &lt;input type=&#39;text&#39; id=&#39;&quot; + key + &quot;&#39; placeholder=&#39;&quot; + State.variables[key] + &quot; [current value] &#39;&gt;&lt;/textarea&gt;&lt;br&gt;&quot;);

        $(&#39;#&#39; + key).keyup(() =&gt; {
            State.variables[key] = document.querySelector(btn).value;
            Engine.show();
        });

    } else {
        /* Something to let the dev know that an object or array slipped through. */
        $(&#39;#storyvars&#39;).append(State.variables[key] + &quot; &quot; + key);
        $(&#39;#storyvars&#39;).append(&#39;&lt;span class=&quot;warning&quot;&gt; The Variable Changer is unable to handle variables of this type. You shouldn\&#39;t log this variable.&lt;/span&gt;&lt;br&gt;&#39;);

    }

});

function genitaliaHandler(btnname, varname) {
    let btn = &quot;input#checkbox-&quot; + btnname;

    /* Set checked if true. */
    if (varname) {
        $(btn).prop(&#39;checked&#39;, true);
    } else {
        $(btn).prop(&#39;checked&#39;, false);
    }

    /* Create event handler that refreshes passage on change. */
    $(btn).on(&quot;click&quot;, () =&gt; {
        varname = document.querySelector(btn).checked;
        Engine.show();
    });

}

/* Run an event handler that refreshes the passage lists when an option is selected. */
function passagesHandler(btnname, tag) {
    let btn = &quot;[name=&#39;radiobutton--&quot; + btnname + &quot;&#39;]&quot;;

    $(btn).on(&quot;click&quot;, function() {
        /* Clear text in #passages */
        $(&quot;#psglinks&quot;).empty();

        /* Get relevant passages. */
        let psgs = Story.lookup(&quot;tags&quot;, tag);

        /* Process passages. */
        let psgslink = [];
        psgs.forEach(psg =&gt; {
            let tmpstr = &quot;* &lt;a data-passage=\&quot;&quot; + psg.title + &quot;\&quot; class=\&quot;link-internal macro-link\&quot; role=\&quot;link\&quot; tabeindex=\&quot;0\&quot;&gt;&quot; + psg.title + &quot;&lt;/a&gt;&quot;;
            psgslink.push(tmpstr);
        });

        /* Place passages. */
        psgslink.forEach(link =&gt; {
            $(&quot;#psglinks&quot;).wiki(link);
        });
    });

}
&lt;&lt;/script&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="38" name="Slot_Menu_Info_Widget" tags="widget .infoscreen helper nostats" position="1100,575" size="100,100">&lt;&lt;widget SlotMenuInfo&gt;&gt;
    /** Normally I would write error the following error, but since this widget won&#39;t ever be used again, who cares:
     *  WriteError: _args[0] should be &quot;weapon&quot; || &quot;armor&quot; || &quot;accessory&quot; 
     */
    /* REVIEW: Do I want to add a button to this dialogue to switch to the appropriate mod menu dialogue? */

    /* Set tempvars. */
    &lt;&lt;set _captureArg to _args[0]&gt;&gt;
    &lt;&lt;set _capturePlayer to _args[1]&gt;&gt;
    &lt;&lt;set _listboxstr to &quot;listbox-&quot; + _args[0]&gt;&gt;
    &lt;&lt;script&gt;&gt;
        switch (State.temporary.args[0]) {
            case &quot;weapon&quot;:
                State.temporary.strplural = &quot;weapons&quot;;
                break;
            case &quot;armor&quot;:
                State.temporary.strplural = &quot;armors&quot;;
                break;
            case &quot;accessory&quot;:
                State.temporary.strplural = &quot;accessories&quot;;
                break;
        }
    &lt;&lt;/script&gt;&gt;

    &lt;&lt;capture _captureArg _listboxstr _capturePlayer&gt;&gt;
        /* Create listbox. */
        &lt;&lt;if _capturePlayer.temp&gt;&gt;
            &lt;select @id=&quot;_listboxstr&quot; class=&quot;macro-listbox&quot; @name=&quot;_listboxstr&quot; tabindex=&quot;0&quot; autocomplete=&quot;off&quot; size=&quot;2&quot;&gt;
                &lt;option value=&quot;0&quot;&gt;_capturePlayer.equippables[_captureArg].name&lt;/option&gt;
            &lt;/select&gt;
        &lt;&lt;else&gt;&gt;
            &lt;select @id=&quot;_listboxstr&quot; class=&quot;macro-listbox&quot; @name=&quot;_listboxstr&quot; tabindex=&quot;0&quot; autocomplete=&quot;off&quot; @size=&quot;$account.inventory[_strplural].length&quot;&gt; 
                &lt;&lt;for _i, _equippable range $account.inventory[_strplural]&gt;&gt;
                    /* NYI: add the `disabled` attribute if we don&#39;t own the equippable */
                    /* TODO: $account.inventory.weapons should probably be: [[weapon, bool], [weapon, bool]], where weapon as obj and bool is &quot;obtained&quot;, which will allow disabled. */
                    &lt;&lt;if _capturePlayer.equippables[_captureArg].name === _equippable.name&gt;&gt;
                        &lt;&lt;set _selectval to _i&gt;&gt;
                    &lt;&lt;/if&gt;&gt;
                    &lt;option @value=&quot;_i&quot;&gt;[_equippable.modslots] _equippable.name&lt;/option&gt;
                &lt;&lt;/for&gt;&gt;
            &lt;/select&gt;
        &lt;&lt;/if&gt;&gt;
        
        /* So that we can add attack buttons to the swap menu. */
        &lt;&lt;if _captureArg === &quot;weapon&quot;&gt;&gt;
            &lt;span id=&quot;attackButtons&quot;&gt;&lt;/span&gt;
            &lt;span id=&quot;attackInfoDescription&quot; style=&quot;display: block&quot;&gt;&lt;/span&gt;
            &lt;&lt;set $info.current to _capturePlayer&gt;&gt;
            &lt;&lt;run setup.fns.waitForElm(&quot;#attackButtons&quot;).then(() =&gt; {$.wiki(`&lt;&lt;replace &#39;#attackButtons&#39;&gt;&gt;&lt;&lt;include &quot;Show_Attacks&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;`)});&gt;&gt;
        &lt;&lt;/if&gt;&gt;

        /* The place to show the character stats. */
        &lt;span id=&quot;equipmentCharacterStats&quot;&gt;&lt;&lt;print new setup.COM.Combatant(_capturePlayer).getInfo()&gt;&gt;&lt;/span&gt;

        &lt;&lt;script&gt;&gt;
            let st = State.temporary;
            let sv = State.variables;
            /* We do this because by the time the async runs, the State changes. */
            let tmpstr = st.listboxstr;
            let captureArg = st.captureArg;
            let capturePlayer = st.capturePlayer;
            
            setup.fns.waitForElm(`#${tmpstr}`).then(()=&gt; {
                /* Set the value of the listbox to the equipped item. */
                $(`#${tmpstr}`).val(st.selectval);

                /* Make listbox selection change related vars. */
                if (!capturePlayer.temp) {
                    $(`#${tmpstr}`).change( function () {
                        sv.info.current.equippables[captureArg] = sv.account.inventory[st.strplural][$(`#${tmpstr}`).val()];

                        /* Update Inn Instance with new equipment names. */
                        sv.innInstance.generateMenu();
                        sv.innInstance.display();

                        /* Update character stats. */
                        $(&#39;#equipmentCharacterStats&#39;).empty().wiki(new setup.COM.Combatant(sv.info.current).getInfo());

                        /* Replace attacks with attacks from new weapon. */
                        if (captureArg === &quot;weapon&quot;) {
                            
                            sv.info.current = capturePlayer;
                            $.wiki(`&lt;&lt;replace &#39;#attackButtons&#39;&gt;&gt;&lt;&lt;include &quot;Show_Attacks&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;`);
                        }
                    });
                }

                $(`#${tmpstr}`).on(&#39;mouseenter&#39;, &#39;option&#39;, function (elm) {
                    var $target = $(elm.target); 

                    if ($target.is(&#39;option&#39;)) { 
                        /* DESIRED: Show updated values to combatant in Green/Red */
                        /* Make sure the combatant info returns to normal when mouse leaves listbox. */
                    }
                });
            });
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="39" name="Slot_ModMenu_Info_Widget" tags="widget .infoscreen helper nostats" position="1100,550" size="100,100">&lt;&lt;widget SlotModMenuInfo&gt;&gt;
    /** Normally I would write error the following error, but since this widget won&#39;t ever be used again, who cares:
     *  WriteError: _args[0] should be &quot;weapon&quot; || &quot;armor&quot; || &quot;accessory&quot; 
     */
    /* REVIEW: Do I want to add a button to this dialogue to switch to the appropriate swap menu dialogue? */

    /* Set tempvars. */
    &lt;&lt;set _captureArg to _args[0]&gt;&gt;
    &lt;&lt;set _capturePlayer to _args[1]&gt;&gt;
    &lt;&lt;set _listboxstr to &quot;listbox-&quot; + _captureArg + &quot;Mods&quot;&gt;&gt;
    &lt;&lt;capture _captureArg _capturePlayer&gt;&gt;
        &lt;&lt;script&gt;&gt;
            let st = State.temporary;
            let svaim = State.variables.account.inventory.mods;
            /* We do this because by the time the async runs, the State changes. */
            let captureArg = st.captureArg;

            switch (captureArg) {
                case &quot;weapon&quot;:
                    st.strcap = &quot;Weapon&quot;;
                    break;
                case &quot;armor&quot;:
                    st.strcap = &quot;Armor&quot;;
                    break;
                case &quot;accessory&quot;:
                    st.strcap = &quot;Accessory&quot;;
                    break;
            }

            /* Temp array with all the mods that have the slot type. */
            st.viableModList = [setup.COM.affixes.unequippedMod];
            for (let mod in svaim) {
                if (svaim[mod].slot === captureArg) {
                    st.viableModList.push(svaim[mod]);
                }
            }

            /* TODO: If mod is already on an equipment, remove it. */
            /* NYI: So the account mod list should be something like [[mod, bool], [mod, bool]]. Or maybe the bool is in the item itself. */
        &lt;&lt;/script&gt;&gt;

        /* Create a listbox element for every modslot, populate it with viable mods array. */
        &lt;&lt;set _selectvalmod to []&gt;&gt;

        /* Create listbox. */
        &lt;span id=&quot;modSelectionGrid&quot;&gt;
            &lt;&lt;if _capturePlayer.temp&gt;&gt;
                /* View Mods on Temporary Characters */
                &lt;&lt;for _i = 0; _i &lt; _capturePlayer.equippables[_captureArg].modslots; _i++&gt;&gt;
                    &lt;span class=&quot;modSlotTitle&quot;&gt;Slot _i&lt;/span&gt;
                    &lt;select @id=&quot;_listboxstr&quot; class=&quot;macro-listbox&quot; @name=&quot;_listboxstr&quot; tabindex=&quot;0&quot; autocomplete=&quot;off&quot; size=&quot;2&quot;&gt;
                        &lt;option value=&quot;0&quot;&gt;_capturePlayer.equippables[_captureArg].mods[_i].name&lt;/option&gt;
                    &lt;/select&gt;
                    &lt;br&gt;
                &lt;&lt;/for&gt;&gt;
            &lt;&lt;else&gt;&gt;
                /* Swap Mods on Main Characters */
                &lt;&lt;for _i = 0; _i &lt; _capturePlayer.equippables[_captureArg].modslots; _i++&gt;&gt;
                    &lt;span class=&quot;modSlotTitle&quot;&gt;Slot _i&lt;/span&gt;
                    &lt;select @id=&quot;_listboxstr&quot; @class=&quot;_listboxstr&quot; @name=&quot;_listboxstr&quot; tabindex=&quot;0&quot; @boxnum=_i @size=&quot;_capturePlayer.equippables[_captureArg].modslots&quot;&gt;
                        &lt;&lt;for _j, _mod range _viableModList&gt;&gt;
                            &lt;&lt;if _mod.name === _capturePlayer.equippables[_captureArg].mods[_i].name&gt;&gt;
                                &lt;&lt;set _selectvalmod[_i] to _j&gt;&gt;
                            &lt;&lt;/if&gt;&gt;
                            /* Check if at least one tag matches between mod and equipment. */
                            &lt;&lt;if _mod.tags.some(tag =&gt; _capturePlayer.equippables[_captureArg].tags.includes(tag))&gt;&gt;
                                &lt;option @value=_j&gt;_mod.name t._mod.tier&lt;/option&gt;
                            &lt;&lt;else&gt;&gt;
                                /* Don&#39;t show anything. */
                                /* &lt;option @value=_j disabled&gt;_mod.name t._mod.tier&lt;/option&gt; */
                            &lt;&lt;/if&gt;&gt;
                        &lt;&lt;/for&gt;&gt;
                    &lt;/select&gt;
                    &lt;br&gt;
                &lt;&lt;/for&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;/span&gt;

        /*NYI: Show attacks on mod swap screen. */
        /* &lt;&lt;if _captureArg === &quot;weapon&quot;&gt;&gt;
            Weapon Attacks
            &lt;span id=&quot;attackButtons&quot;&gt;&lt;/span&gt;
            &lt;span id=&quot;attackInfoDescription&quot; style=&quot;display: block&quot;&gt;&lt;/span&gt;
            &lt;&lt;run setup.fns.waitForElm(&quot;#attackButtons&quot;).then(() =&gt; {$.wiki(`&lt;&lt;replace &#39;#attackButtons&#39;&gt;&gt;&lt;&lt;include &quot;Show_Attacks&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;`)});&gt;&gt;
        &lt;&lt;/if&gt;&gt; */

        /* The place to show the character stats. */
        &lt;span id=&quot;equipmentCharacterStats&quot;&gt;&lt;&lt;print new setup.COM.Combatant(_capturePlayer).getInfo()&gt;&gt;&lt;/span&gt;

        /* Make listbox selection change related vars. */
        &lt;&lt;script&gt;&gt;
            let st = State.temporary;
            let sv = State.variables;
            let captureArg = st.captureArg;
            let capturePlayer = st.capturePlayer;
            let cpe = st.capturePlayer.equippables;
            let selectvalmod = st.selectvalmod;
            let viableModList = st.viableModList;

            /* Wait for all .listbox-slotMods to be done */
            setup.fns.waitForNumberOfElm(`.${st.listboxstr}`, cpe[captureArg].modslots).then(() =&gt; {
                /* Set the value of the listboxes to the equipped item. */
                for (i = 0; i &lt; cpe[captureArg].modslots; i++) {
                    $(`#listbox-${captureArg}Mods[boxnum=&quot;${i}&quot;]`).val(selectvalmod[i]);
                }
                
                $(`.${st.listboxstr}`).change( function (elm) {
                    /* Change the modslot&#39;s mod to the updated mod. */
                    cpe[captureArg].mods[$(this).attr(&quot;boxnum&quot;)] = viableModList[$(this).val()];

                    /* Update the Equippable */
                    cpe[captureArg].applyMods();

                    /* Update character stats. */
                    $(&#39;#equipmentCharacterStats&#39;).empty().wiki(new setup.COM.Combatant(capturePlayer).getInfo());

                    /* Reload this dialogue so that viableModList is updated. */
                    st.capturePlayer = capturePlayer;
                    Dialog.setup(`${st.strcap} Mods`, &quot;dialogEquipmentMod&quot;);
                    Dialog.wiki(`&lt;&lt;SlotModMenuInfo ${captureArg} _capturePlayer&gt;&gt;`);
                    Dialog.open();
                });
            });
        &lt;&lt;/script&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="40" name="Show_Attacks" tags=".infoscreen helper nostats" position="600,875" size="100,100">&lt;span id=&quot;infoScreenAttacks&quot;&gt;&lt;/span&gt;
&lt;&lt;script&gt;&gt;
setup.fns.waitForElm(&quot;#infoScreenAttacks&quot;).then((elm) =&gt; {
    $(elm).wiki(Story.get(&quot;Show_Attacks_Helper&quot;).processText());
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="41" name="Show_Attacks_Helper" tags=".infoscreen helper nostats" position="600,850" size="100,100">&lt;&lt;for _int, _attack range $info.current.equippables.weapon.attacks&gt;&gt;
    &lt;&lt;capture _attack&gt;&gt;
        &lt;&lt;run $(&quot;#infoScreenAttacks&quot;).wiki(Story.get(&quot;Player_Attack_Disabled&quot;).processText());&gt;&gt;
        &lt;&lt;run setup.fns.displayToInfoScreenOnMouseover(`#PlayerAttack${_int + 1}`, _attack, new setup.COM.Combatant($info.current));&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;</tw-passagedata><tw-passagedata pid="42" name="KnowledgeText" tags="uibar nostats" position="0,175" size="100,100">&lt;&lt;include K_Template&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="K_Template" tags=".knowledge" position="0,200" size="100,100">&lt;&lt;if true&gt;&gt;
    @@.knowledge;Template Matter:@@&lt;br&gt;
    Lorem Ipsum about template matter.
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="LocationsText" tags="uibar nostats" position="500,100" size="100,100">&lt;&lt;include L_Template&gt;&gt;</tw-passagedata><tw-passagedata pid="45" name="L_Template" tags=".location" position="500,125" size="100,100">&lt;&lt;if $loc_tmpl_disc&gt;&gt;
    @@.knowledge;Template Matter:@@&lt;br&gt;
    Lorem Ipsum about template matter.
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="46" name="PeopleText" tags="uibar nostats" position="1150,25" size="100,100">&lt;&lt;include P_Template&gt;&gt;</tw-passagedata><tw-passagedata pid="47" name="P_Template" tags=".people" position="1150,50" size="100,100">&lt;&lt;if $ppl_tmpl_met&gt;&gt;
    @@.knowledge;Template Matter:@@&lt;br&gt;
    Lorem Ipsum about template matter.
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="48" name="TooltipText" tags="uibar nostats" position="625,100" size="100,100">/* The tool tips found in this file are strictly... tooltips. They&#39;re not meant to be seen with a button in the UI bar. */</tw-passagedata><tw-passagedata pid="49" name="TT_Template" tags="nostats" position="625,125" size="100,100">@@.knowledge;Template Matter:@@&lt;br&gt;
Lorem Ipsum about template matter.</tw-passagedata><tw-passagedata pid="50" name="StoryInterface" tags=".ui nostats" position="0,150" size="100,100">&lt;div id=&quot;city-menu-container&quot; class=&quot;hidden&quot;&gt;
    &lt;span id=&quot;city-menu&quot;&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;canvas id=&quot;map&quot; class=&quot;hidden&quot;&gt;&lt;/canvas&gt;

&lt;div id=&quot;textbox-container&quot; class=&quot;hidden&quot;&gt;
    &lt;span id=&quot;textbox&quot; class=&quot;hidden&quot;&gt;
        &lt;span id=&quot;textbox-portrait&quot;&gt;&lt;/span&gt;
        &lt;span id=&quot;textbox-speaker&quot;&gt;&lt;/span&gt;
        &lt;span id=&quot;textbox-text&quot;&gt;&lt;/span&gt;
    &lt;/span&gt;
&lt;/div&gt;

&lt;div id=&quot;mainwrapper&quot;&gt;
    &lt;div id=&quot;passages&quot;&gt;&lt;/div&gt;
    &lt;div id=&quot;wrapperBottomText&quot; data-passage=&quot;uiBottomText&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;storyTabs&quot;&gt;
    &lt;ul&gt;
        &lt;!-- &lt;li id=&quot;knowledgeTab&quot; data-passage=&quot;uiKnowledge&quot;&gt;&lt;/li&gt; --&gt;
        &lt;!-- &lt;li id=&quot;peopleTab&quot; data-passage=&quot;uiPeople&quot;&gt;&lt;/li&gt; --&gt;
        &lt;!-- &lt;li id=&quot;settingsTab&quot; data-passage=&quot;uiSettings&quot;&gt;&lt;/li&gt; --&gt;
        &lt;!-- &lt;li id=&quot;disableContentsTab&quot; data-passage=&quot;uiDisableContent&quot;&gt;&lt;/li&gt; --&gt;
        &lt;!-- &lt;li id=&quot;savesTab&quot; data-passage=&quot;uiSaves&quot;&gt;&lt;/li&gt; --&gt;
        &lt;li id=&quot;creditsTab&quot; data-passage=&quot;uiCredits&quot;&gt;&lt;/li&gt;
        &lt;li id=&quot;devTab&quot; data-passage=&quot;uiDev&quot;&gt;&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&quot;databaseInfoTab&quot; data-passage=&quot;uiDatabaseInfo&quot;&gt;&lt;/div&gt;




&lt;!-- 
Most of our elements here are in a dialog so that when the user is 
done with it, they can get right back to the story. There&#39;s no back 
button or extra link needed.

Dialogs can change story variables, but they won&#39;t change on the 
current [non-dialog] passage, unless it calls:
  [Go To and Render Passage]  Engine.play(&quot;Passage&quot;) 
  [Re-Render Current Passage] Engine.show()
--&gt;</tw-passagedata><tw-passagedata pid="51" name="uiSettings" tags="ui nostats" position="0,200" size="100,100">⚙️
&lt;&lt;script&gt;&gt;
    $(&quot;li#settingsTab&quot;).click(() =&gt; UI.settings());
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="52" name="uiDisableContent" tags="ui nostats" position="0,225" size="100,100">❌
&lt;&lt;script&gt;&gt;
$(&quot;li#disableContentsTab&quot;).click(() =&gt; {
    Dialog.setup(&quot;Disable Content&quot;);
    Dialog.wiki(Story.get(&quot;ContentDisabler&quot;).processText());
    Dialog.open();
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="uiSaves" tags="ui nostats" position="0,250" size="100,100">💾
&lt;&lt;script&gt;&gt;
    $(&quot;li#savesTab&quot;).click(() =&gt; UI.saves());
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="54" name="uiCredits" tags="ui nostats" position="0,300" size="100,100">📜
&lt;&lt;script&gt;&gt;
$(&quot;li#creditsTab&quot;).click(() =&gt; {
    Dialog.setup(&quot;Credits&quot;);
    Dialog.wiki(Story.get(&quot;CreditsText&quot;).processText());
    Dialog.open();
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="55" name="uiDev" tags="ui nostats" position="0,325" size="100,100">🛠️
&lt;&lt;script&gt;&gt;
if (Config.debug) {
    $(&quot;li#devTab&quot;).click(() =&gt; {
        Dialog.setup(&quot;Debug Menu Deluxe&quot;);
        Dialog.wiki(Story.get(&#39;DevOptionsText&#39;).processText());
        Dialog.open();
    });
} else {
    $(&quot;li#devTab&quot;).css(&quot;display&quot;, &quot;none&quot;);
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="56" name="uiKnowledge" tags="ui nostats" position="0,350" size="100,100">📖
&lt;&lt;script&gt;&gt;
$(&quot;li#knowledgeTab&quot;).click(() =&gt; {
    Dialog.setup(&quot;Knowledge Base&quot;);
    Dialog.wiki(Story.get(&quot;KnowledgeText&quot;).processText());
    Dialog.open();
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="57" name="uiPeople" tags="ui nostats" position="0,375" size="100,100">🧑🏻‍🤝‍🧑🏻
&lt;&lt;script&gt;&gt;
$(&quot;li#peopleTab&quot;).click(() =&gt; {
    Dialog.setup(&quot;Person Base&quot;);
    Dialog.wiki(Story.get(&quot;PeopleText&quot;).processText());
    Dialog.open();
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="58" name="uiDatabaseInfo" tags="ui nostats" position="0,425" size="100,100">&lt;span id=&quot;database-text&quot;&gt;&lt;/span&gt;
&lt;&lt;script&gt;&gt;
if (State.variables.user.logged_in) {
    $(&quot;#database-text&quot;).text(&quot;Connected to Server&quot;);
} else {
    $(&quot;#database-text&quot;).text(&quot;Disconnected&quot;);
    $(&quot;#databaseInfoTab&quot;).css(&quot;cursor&quot;, &quot;pointer&quot;);
    $(&quot;#databaseInfoTab&quot;).click(() =&gt; {
        /* REQUIRED SERVER: We shouldn&#39;t open the window directly, rather we should open a dialogue box that tells users things, that has a link with which they can click to open the window. */
        window.open(`https://itch.io/user/oauth?client_id=9a5a87634b363c3ce3908f94c8767e1b&amp;scope=profile%3Ame&amp;response_type=token&amp;redirect_uri=https%3A%2F%2Fmetadb-a53ef.web.app%2Fitch_oauth.html&amp;state=${recall(&#39;user-uuid&#39;)}&amp;`, &quot;_blank&quot;);
    });  
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="uiBottomText" tags="ui nostats" position="0,450" size="100,100">&lt;&lt;script&gt;&gt;
    /* TODO: Make this a db call. Have this as a backup.  Oh, have it call a different DB entry if the game is out of date. */
    $(output).wiki(Story.get(&quot;StorySubtitle&quot;).processText());
&lt;&lt;/script&gt;&gt;</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("Combat Simulator"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
